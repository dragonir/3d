# æ˜é‡‘1000ç²‰ï¼ä½¿ç”¨Three.jså®ç°ä¸€ä¸ªåˆ›æ„çºªå¿µé¡µé¢ ğŸ†

![banner](./images/banner.gif)

> å£°æ˜ï¼šæœ¬æ–‡æ¶‰åŠå›¾æ–‡å’Œæ¨¡å‹ç´ æä»…ç”¨äºä¸ªäººå­¦ä¹ ã€ç ”ç©¶å’Œæ¬£èµï¼Œè¯·å‹¿äºŒæ¬¡ä¿®æ”¹ã€éæ³•ä¼ æ’­ã€è½¬è½½ã€å‡ºç‰ˆã€å•†ç”¨ã€åŠè¿›è¡Œå…¶ä»–è·åˆ©è¡Œä¸ºã€‚

## èƒŒæ™¯

ä¸çŸ¥ä¸è§‰ï¼Œæ˜é‡‘å…³æ³¨è€…å·²ç»è¶…è¿‡ `1000` äººäº†ï¼Œå› æ­¤ç‰¹åœ°åšäº†è¿™ä¸ªé¡µé¢çºªå¿µä¸€ä¸‹ã€‚

## æ•ˆæœ

é¡µé¢ä¸»ä½“å†…å®¹ä¸»è¦ç”±å››éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šæ–‡å­— `1000!`ã€æ–‡å­— `THANK YOU`ã€æ˜é‡‘ä¸‰ç»´ `Logo`ã€ä»¥åŠ `çº¸ç‰‡ç¤¼èŠ±` `ğŸ‰`ã€‚

* `ğŸ’»` æœ¬é¡µé¢é€‚é…**PCç«¯**å’Œ**ç§»åŠ¨ç«¯**ï¼Œå¤§å±è®¿é—®æ•ˆæœæ›´ä½³ã€‚
* `ğŸ‘â€ğŸ—¨` åœ¨çº¿é¢„è§ˆåœ°å€1ï¼š<https://3d-eosin.vercel.app/#/fans>
* `ğŸ‘â€ğŸ—¨` åœ¨çº¿é¢„è§ˆåœ°å€2ï¼š<https://dragonir.github.io/3d/#/fans>

![preview](./images/preview.gif)

## å®ç°

### `ğŸ“¦` èµ„æºå¼•å…¥

å¼•å…¥å¼€å‘å¿…å¤‡çš„èµ„æºï¼Œå…¶ä¸­é™¤äº†åŸºç¡€çš„ `React` å’Œæ ·å¼è¡¨ä¹‹å¤–ï¼Œ`dat.gui` ç”¨äºåŠ¨æ€æ§åˆ¶é¡µé¢å‚æ•°ï¼Œå…¶ä»–å‰©ä½™çš„ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š**Three.js**ç›¸å…³ï¼Œ `OrbitControls` ç”¨äºé•œå¤´è½¨é“æ§åˆ¶ã€`TWEEN` ç”¨äºè¡¥é—´åŠ¨ç”»æ§åˆ¶ã€`mergeBufferGeometries` ç”¨æˆ·åˆå¹¶æ¨¡å‹ã€`EffectComposer` `RenderPass` `GlitchPass` ç”¨äºç”ŸæˆåæœŸæ•…éšœæ•ˆæœåŠ¨ç”»ã€ `lineFragmentShader` æ˜¯é£çº¿çš„ `Shader`ã€**Echarts**ç›¸å…³æŒ‰éœ€å¼•å…¥éœ€è¦çš„ç»„ä»¶ï¼Œæœ€åä½¿ç”¨ `echarts.use` ä½¿å…¶ç”Ÿæ•ˆã€‚

### `ğŸ“ƒ` é¡µé¢ç»“æ„

é¡µé¢ä¸»è¦ç»“æ„å¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤ºï¼Œ`.webgl` ç”¨äºæ¸²æŸ“ `3D` æ•°å­—åœ°çƒï¼›`.header` æ˜¯é¡µé¢é¡¶éƒ¨ï¼Œé‡Œé¢åŒ…æ‹¬**æ—¶é—´**ã€**æ—¥æœŸ**ã€**æ˜Ÿé™…åæ ‡**ã€`Cyberpunk 2077 Logo`ã€æœ¬äºº `Github` ä»“åº“åœ°å€ç­‰ï¼›`.aside` æ˜¯å·¦å³ä¸¤ä¾§çš„å›¾è¡¨å±•ç¤ºåŒºåŸŸï¼›`.footer` æ˜¯åº•éƒ¨çš„ä»ªè¡¨ç›˜ï¼Œå±•ç¤ºä¸€äº›é›·è¾¾åŠ¨ç”»å’Œæ–‡æœ¬ä¿¡æ¯ï¼›å¦‚æœä»”ç»†è§‚å¯Ÿï¼Œå¯ä»¥çœ‹å‡ºèƒŒæ™¯æœ‰**å™ªç‚¹**æ•ˆæœï¼Œ`.bg` å°±æ˜¯ç”¨äºç”Ÿæˆå™ªç‚¹èƒŒæ™¯æ•ˆæœã€‚

### åˆ›å»ºæ˜é‡‘ `Logo`

```js
// åˆ›å»ºlogo
const logo = new THREE.Group();
const logoMaterial = new THREE.MeshMatcapMaterial({
  matcap: this.matcaps.logoMatcap,
  side: THREE.DoubleSide,
})
const cone = new THREE.Mesh(new THREE.ConeGeometry(4, 4, 4), logoMaterial);
logo.add(cone);
const cylinder = new THREE.Mesh(new THREE.CylinderGeometry(6, 10, 4, 4, 1), logoMaterial);
cylinder.position.y = -6
logo.add(cylinder);
const cylinder2 = new THREE.Mesh(new THREE.CylinderGeometry(12, 16, 4, 4, 1), logoMaterial);
cylinder2.position.y = -12
logo.add(cylinder2);
logo.position.set(0, 0, 0);
logo.scale.set(11, 11, 11);
logo.rotateY(Math.PI * 0.2);
logo.rotateZ(Math.PI * 0.1);
scene.add(logo);
```

![step_0](./images/step_0.png)

### åˆ›å»ºæ–‡å­— `1000!`

```js
new Text({
  ...DEFAULTS,
  text: '1000!',
  position: new THREE.Vector3(120, 160, -80),
  textOptions: {
    size: 110,
    spacing: 120
  },
  material: {
    matcap: this.matcaps.textMatcap1
  },
  animation: 'zoomAndFlip',
  onLoad: () => {
    this.confetti.pop(2);
  },
});
```

![step_1](./images/step_1.png)

### åˆ›å»ºæ–‡å­— `THANK YOU`

```js
new Text({
  ...DEFAULTS,
  text: 'THANK YOU',
  position: new THREE.Vector3(-120, -10, -80),
  textOptions: {
    size: 60,
    spacing: 100,
  },
  material: {
    matcap: this.matcaps.textMatcap2,
    opacity: .75
  },
  animation: 'upDownFlip',
});
```

![step_2](./images/step_2.png)

### åˆ›å»ºç¤¼èŠ± `ğŸ‰`

![step_3](./images/step_3.png)

### ç¼©æ”¾ç›‘å¬åŠé‡ç»˜åŠ¨ç”»

```js
const animate = () => {
  requestAnimationFrame(animate);
  controls && controls.update();
  logo && logo.rotateOnAxis(axis, Math.PI / 400);
  renderer.render(scene, camera);
}
animate();

window.addEventListener('pointermove', e => {
  e.preventDefault();
  this.mousePosition.x = e.clientX;
  this.mousePosition.y = e.clientY;
});

window.addEventListener('pointerdown', e => {
  e.preventDefault();
  this.confetti && this.confetti.pop();
});

window.addEventListener('resize', () => {
  this.width = window.innerWidth;
  this.height = window.innerHeight;
  this.camera.aspect = this.width / this.height;
  this.camera.updateProjectionMatrix();
  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
  this.renderer.setSize(this.width, this.height);
}, {
  passive: true
});
```

### æ ·å¼ç»†èŠ‚ä¼˜åŒ–

![step_4](./images/step_4.png)

https://observablehq.com/@makio135/matcaps?ui=classic

https://github.com/nidorx/matcaps

http://jeanmoreno.com/unity/matcap/

MeshMatcapMaterial

```js
MeshMatcapMaterial ç”±ä¸€ä¸ªæè´¨æ•æ‰ï¼ˆMatCapï¼Œæˆ–å…‰ç…§çƒï¼ˆLit Sphereï¼‰ï¼‰çº¹ç†æ‰€å®šä¹‰ï¼Œå…¶ç¼–ç äº†æè´¨çš„é¢œè‰²ä¸æ˜æš—ã€‚

ç”±äºmapcapå›¾åƒæ–‡ä»¶ç¼–ç äº†çƒ˜ç„™è¿‡çš„å…‰ç…§ï¼Œå› æ­¤MeshMatcapMaterial ä¸å¯¹ç¯å…‰ä½œå‡ºååº”ã€‚
å®ƒå°†ä¼šæŠ•å°„é˜´å½±åˆ°ä¸€ä¸ªæ¥å—é˜´å½±çš„ç‰©ä½“ä¸Š(and shadow clipping works)ï¼Œä½†ä¸ä¼šäº§ç”Ÿè‡ªèº«é˜´å½±æˆ–æ˜¯æ¥å—é˜´å½±ã€‚

// iOS iframe auto-resize workaround
if ( /(iPad|iPhone|iPod)/g.test( navigator.userAgent ) ) {
const scene = document.getElementById( 'scene' );
scene.style.width = getComputedStyle( scene ).width;
scene.style.height = getComputedStyle( scene ).height;
scene.setAttribute( 'scrolling', 'no' );
}

æ„é€ å‡½æ•°(Constructor)
MeshMatcapMaterial( parameters : Object )
parameters - (å¯é€‰)ç”¨äºå®šä¹‰æè´¨å¤–è§‚çš„å¯¹è±¡ï¼Œå…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§ã€‚
æè´¨çš„ä»»ä½•å±æ€§éƒ½å¯ä»¥ä»æ­¤å¤„ä¼ å…¥(åŒ…æ‹¬ä»Materialç»§æ‰¿çš„ä»»ä½•å±æ€§)ã€‚

å±æ€§colorä¾‹å¤–ï¼Œå…¶å¯ä»¥ä½œä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²ä¼ é€’ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸º 0xffffffï¼ˆç™½è‰²ï¼‰ï¼Œå†…éƒ¨è°ƒç”¨Color.set(color)ã€‚

å±æ€§(Properties)
å…±æœ‰å±æ€§è¯·å‚è§å…¶åŸºç±»Materialã€‚

.alphaMap : Texture
alphaè´´å›¾æ˜¯ä¸€å¼ ç°åº¦çº¹ç†ï¼Œç”¨äºæ§åˆ¶æ•´ä¸ªè¡¨é¢çš„ä¸é€æ˜åº¦ã€‚ï¼ˆé»‘è‰²ï¼šå®Œå…¨é€æ˜ï¼›ç™½è‰²ï¼šå®Œå…¨ä¸é€æ˜ï¼‰ã€‚
é»˜è®¤å€¼ä¸ºnullã€‚

ä»…ä½¿ç”¨çº¹ç†çš„é¢œè‰²ï¼Œå¿½ç•¥alphaé€šé“ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚
å¯¹äºRGBå’ŒRGBAçº¹ç†ï¼ŒWebGLæ¸²æŸ“å™¨åœ¨é‡‡æ ·æ­¤çº¹ç†æ—¶å°†ä½¿ç”¨ç»¿è‰²é€šé“ï¼Œ
å› ä¸ºåœ¨DXTå‹ç¼©å’Œæœªå‹ç¼©RGB 565æ ¼å¼ä¸­ä¸ºç»¿è‰²æä¾›äº†é¢å¤–çš„ç²¾åº¦ã€‚
Luminance-onlyä»¥åŠluminance/alphaçº¹ç†ä¹Ÿä»ç„¶æœ‰æ•ˆã€‚

.bumpMap : Texture
ç”¨äºåˆ›å»ºå‡¹å‡¸è´´å›¾çš„çº¹ç†ã€‚é»‘è‰²å’Œç™½è‰²å€¼æ˜ å°„åˆ°ä¸å…‰ç…§ç›¸å…³çš„æ„ŸçŸ¥æ·±åº¦ã€‚å‡¹å‡¸å®é™…ä¸Šä¸ä¼šå½±å“å¯¹è±¡çš„å‡ ä½•å½¢çŠ¶ï¼Œåªå½±å“å…‰ç…§ã€‚å¦‚æœå®šä¹‰äº†æ³•çº¿è´´å›¾ï¼Œåˆ™å°†å¿½ç•¥è¯¥è´´å›¾ã€‚

.bumpScale : Float
å‡¹å‡¸è´´å›¾ä¼šå¯¹æè´¨äº§ç”Ÿå¤šå¤§å½±å“ã€‚å…¸å‹èŒƒå›´æ˜¯0-1ã€‚é»˜è®¤å€¼ä¸º1ã€‚

.color : Color
æè´¨çš„é¢œè‰²(Color)ï¼Œé»˜è®¤å€¼ä¸ºç™½è‰² (0xffffff)ã€‚

.displacementMap : Texture
ä½ç§»è´´å›¾ä¼šå½±å“ç½‘æ ¼é¡¶ç‚¹çš„ä½ç½®ï¼Œä¸ä»…å½±å“æè´¨çš„å…‰ç…§å’Œé˜´å½±çš„å…¶ä»–è´´å›¾ä¸åŒï¼Œç§»ä½çš„é¡¶ç‚¹å¯ä»¥æŠ•å°„é˜´å½±ï¼Œé˜»æŒ¡å…¶ä»–å¯¹è±¡ï¼Œ
ä»¥åŠå……å½“çœŸå®çš„å‡ ä½•ä½“ã€‚ä½ç§»çº¹ç†æ˜¯æŒ‡ï¼šç½‘æ ¼çš„æ‰€æœ‰é¡¶ç‚¹è¢«æ˜ å°„ä¸ºå›¾åƒä¸­æ¯ä¸ªåƒç´ çš„å€¼ï¼ˆç™½è‰²æ˜¯æœ€é«˜çš„ï¼‰ï¼Œå¹¶ä¸”è¢«é‡å®šä½ã€‚

.displacementScale : Float
ä½ç§»è´´å›¾å¯¹ç½‘æ ¼çš„å½±å“ç¨‹åº¦ï¼ˆé»‘è‰²æ˜¯æ— ä½ç§»ï¼Œç™½è‰²æ˜¯æœ€å¤§ä½ç§»ï¼‰ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ä½ç§»è´´å›¾ï¼Œåˆ™ä¸ä¼šåº”ç”¨æ­¤å€¼ã€‚é»˜è®¤å€¼ä¸º1ã€‚

.displacementBias : Float
ä½ç§»è´´å›¾åœ¨ç½‘æ ¼é¡¶ç‚¹ä¸Šçš„åç§»é‡ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ä½ç§»è´´å›¾ï¼Œåˆ™ä¸ä¼šåº”ç”¨æ­¤å€¼ã€‚é»˜è®¤å€¼ä¸º0ã€‚

.flatShading : Boolean
å®šä¹‰æè´¨æ˜¯å¦ä½¿ç”¨å¹³é¢ç€è‰²è¿›è¡Œæ¸²æŸ“ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚

.map : Texture
é¢œè‰²è´´å›¾ã€‚é»˜è®¤ä¸ºnullã€‚çº¹ç†è´´å›¾é¢œè‰²ç”±æ¼«åå°„é¢œè‰².colorè°ƒèŠ‚ã€‚

.matcap : Texture
matcapè´´å›¾ï¼Œé»˜è®¤ä¸ºnullã€‚

.morphNormals : Boolean
å®šä¹‰æ˜¯å¦ä½¿ç”¨morphNormalsã€‚è®¾ç½®ä¸ºtrueå¯å°†morphNormalå±æ€§ä»geometryä¼ é€’åˆ°shaderã€‚é»˜è®¤å€¼ä¸ºfalseã€‚

.morphTargets : Boolean
å®šä¹‰æè´¨æ˜¯å¦ä½¿ç”¨morphTargetsã€‚é»˜è®¤å€¼ä¸ºfalseã€‚

.normalMap : Texture
ç”¨äºåˆ›å»ºæ³•çº¿è´´å›¾çš„çº¹ç†ã€‚RGBå€¼ä¼šå½±å“æ¯ä¸ªåƒç´ ç‰‡æ®µçš„æ›²é¢æ³•çº¿ï¼Œå¹¶æ›´æ”¹é¢œè‰²ç…§äº®çš„æ–¹å¼ã€‚æ³•çº¿è´´å›¾ä¸ä¼šæ”¹å˜æ›²é¢çš„å®é™…å½¢çŠ¶ï¼Œåªä¼šæ”¹å˜å…‰ç…§ã€‚
In case the material has a normal map authored using the left handed convention, the y component of normalScale
should be negated to compensate for the different handedness.

.normalMapType : Integer
æ³•çº¿è´´å›¾çš„ç±»å‹ã€‚

é€‰é¡¹ä¸ºTHREE.TangentSpaceNormalMapï¼ˆé»˜è®¤ï¼‰å’ŒTHREE.ObjectSpaceNormalMapã€‚

.normalScale : Vector2
æ³•çº¿è´´å›¾å¯¹æè´¨çš„å½±å“ç¨‹åº¦ã€‚å…¸å‹èŒƒå›´æ˜¯0-1ã€‚é»˜è®¤å€¼æ˜¯Vector2è®¾ç½®ä¸ºï¼ˆ1,1ï¼‰ã€‚
```

## æ€»ç»“

æœ¬æ–‡åŒ…å«çš„çŸ¥è¯†ç‚¹ä¸»è¦åŒ…æ‹¬ï¼š

> æƒ³äº†è§£å…¶ä»–å‰ç«¯çŸ¥è¯†æˆ–å…¶ä»–æœªåœ¨æœ¬æ–‡ä¸­è¯¦ç»†æè¿°çš„ `Web 3D` å¼€å‘æŠ€æœ¯ç›¸å…³çŸ¥è¯†ï¼Œå¯é˜…è¯»æˆ‘å¾€æœŸçš„æ–‡ç« ã€‚**è½¬è½½è¯·æ³¨æ˜åŸæ–‡åœ°å€å’Œä½œè€…**ã€‚å¦‚æœè§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸è¦å¿˜äº†**ä¸€é”®ä¸‰è¿å“¦ ğŸ‘**ã€‚

## é™„å½•

* [æˆ‘çš„3Dä¸“æ å¯ä»¥ç‚¹å‡»æ­¤é“¾æ¥è®¿é—® ğŸ‘ˆ](https://juejin.cn/column/7049923956257587213)
* [1]. [ğŸ¦Š Three.js å®ç°3Då¼€æ”¾ä¸–ç•Œå°æ¸¸æˆï¼šé˜¿ç‹¸çš„å¤šå…ƒå®‡å®™](https://juejin.cn/post/7081429595689320478)
* [2]. [ğŸ”¥ Three.js ç«ç„°æ•ˆæœå®ç°è‰¾å°”ç™»æ³•ç¯åŠ¨æ€logo](https://juejin.cn/post/7077726955528781832)
* [3]. [ğŸ¼ Three.js å®ç°2022å†¬å¥¥ä¸»é¢˜3Dè¶£å‘³é¡µé¢ï¼Œå«å†°å¢©å¢©](https://juejin.cn/post/7060292943608807460)
* `...`

* [1]. [ğŸ“· å‰ç«¯å®ç°å¾ˆå“‡å¡çš„æµè§ˆå™¨ç«¯æ‰«ç åŠŸèƒ½](https://juejin.cn/post/7018722520345870350)
* [2]. [ğŸŒ å‰ç«¯ç“¦ç‰‡åœ°å›¾åŠ è½½ä¹‹å¡å°”è¾¾ä¼ è¯´æ—·é‡ä¹‹æ¯](https://juejin.cn/post/7007432493569671182)
* [3]. [ğŸ˜± ä»…ç”¨CSSå‡ æ­¥å®ç°èµ›åšæœ‹å…‹2077é£æ ¼è§†è§‰æ•ˆæœ](https://juejin.cn/post/6972759988632551460)
* `...`

## å‚è€ƒ

* [1]. [https://threejs.org](https://threejs.org)
* [2]. [https://github.com/dataarts/dat.gui/blob/master/API.md](https://github.com/dataarts/dat.gui/blob/master/API.md)
* [3]. [https://echarts.apache.org/zh/index.html](https://echarts.apache.org/zh/index.html)
* [4]. [https://www.cnblogs.com/pangys/p/13276936.html](https://www.cnblogs.com/pangys/p/13276936.html)
* [5]. [https://developer.mozilla.org/zh-CN/docs/Web/CSS/gradient/radial-gradient](https://developer.mozilla.org/zh-CN/docs/Web/CSS/gradient/radial-gradient)
* [6]. [https://developer.mozilla.org/zh-CN/docs/Web/CSS/clip-path](https://developer.mozilla.org/zh-CN/docs/Web/CSS/clip-path)