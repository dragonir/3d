# æ˜é‡‘1000ç²‰ï¼ä½¿ç”¨Three.jså®ç°ä¸€ä¸ªåˆ›æ„çºªå¿µé¡µé¢ ğŸ†

![banner](./images/banner.gif)

> å£°æ˜ï¼šæœ¬æ–‡æ¶‰åŠå›¾æ–‡å’Œæ¨¡å‹ç´ æä»…ç”¨äºä¸ªäººå­¦ä¹ ã€ç ”ç©¶å’Œæ¬£èµï¼Œè¯·å‹¿äºŒæ¬¡ä¿®æ”¹ã€éæ³•ä¼ æ’­ã€è½¬è½½ã€å‡ºç‰ˆã€å•†ç”¨ã€åŠè¿›è¡Œå…¶ä»–è·åˆ©è¡Œä¸ºã€‚

![logo](./images/logo.awebp)

## èƒŒæ™¯

ä¸çŸ¥ä¸è§‰ï¼Œæ˜é‡‘å…³æ³¨è€…å·²ç»è¶…è¿‡ `1000` äººäº†ï¼Œå› æ­¤ç‰¹åœ°åšäº†è¿™ä¸ªé¡µé¢çºªå¿µä¸€ä¸‹ã€‚

## æ•ˆæœ

é¡µé¢ä¸»ä½“å†…å®¹ä¸»è¦ç”±å››éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šæ–‡å­— `1000!`ã€æ–‡å­— `THANK YOU`ã€æ˜é‡‘ä¸‰ç»´ `Logo`ã€ä»¥åŠ `çº¸ç‰‡ç¤¼èŠ±` `ğŸ‰`ã€‚

* `ğŸ’»` æœ¬é¡µé¢é€‚é…**PCç«¯**å’Œ**ç§»åŠ¨ç«¯**ï¼Œå¤§å±è®¿é—®æ•ˆæœæ›´ä½³ã€‚
* `ğŸ‘â€ğŸ—¨` åœ¨çº¿é¢„è§ˆåœ°å€1ï¼š<https://3d-eosin.vercel.app/#/fans>
* `ğŸ‘â€ğŸ—¨` åœ¨çº¿é¢„è§ˆåœ°å€2ï¼š<https://dragonir.github.io/3d/#/fans>

![preview](./images/preview.gif)

## å®ç°

### `ğŸ“¦` èµ„æºå¼•å…¥

å¼•å…¥å¼€å‘å¿…å¤‡çš„èµ„æºï¼Œå…¶ä¸­é™¤äº†åŸºç¡€çš„ `React` å’Œæ ·å¼è¡¨ä¹‹å¤–ï¼Œ`dat.gui` ç”¨äºåŠ¨æ€æ§åˆ¶é¡µé¢å‚æ•°ï¼Œå…¶ä»–å‰©ä½™çš„ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š**Three.js**ç›¸å…³ï¼Œ `OrbitControls` ç”¨äºé•œå¤´è½¨é“æ§åˆ¶ã€`TWEEN` ç”¨äºè¡¥é—´åŠ¨ç”»æ§åˆ¶ã€`mergeBufferGeometries` ç”¨æˆ·åˆå¹¶æ¨¡å‹ã€`EffectComposer` `RenderPass` `GlitchPass` ç”¨äºç”ŸæˆåæœŸæ•…éšœæ•ˆæœåŠ¨ç”»ã€ `lineFragmentShader` æ˜¯é£çº¿çš„ `Shader`ã€**Echarts**ç›¸å…³æŒ‰éœ€å¼•å…¥éœ€è¦çš„ç»„ä»¶ï¼Œæœ€åä½¿ç”¨ `echarts.use` ä½¿å…¶ç”Ÿæ•ˆã€‚

### `ğŸ“ƒ` é¡µé¢ç»“æ„

é¡µé¢ä¸»è¦ç»“æ„å¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤ºï¼Œ`.webgl` ç”¨äºæ¸²æŸ“ `3D` æ•°å­—åœ°çƒï¼›`.header` æ˜¯é¡µé¢é¡¶éƒ¨ï¼Œé‡Œé¢åŒ…æ‹¬**æ—¶é—´**ã€**æ—¥æœŸ**ã€**æ˜Ÿé™…åæ ‡**ã€`Cyberpunk 2077 Logo`ã€æœ¬äºº `Github` ä»“åº“åœ°å€ç­‰ï¼›`.aside` æ˜¯å·¦å³ä¸¤ä¾§çš„å›¾è¡¨å±•ç¤ºåŒºåŸŸï¼›`.footer` æ˜¯åº•éƒ¨çš„ä»ªè¡¨ç›˜ï¼Œå±•ç¤ºä¸€äº›é›·è¾¾åŠ¨ç”»å’Œæ–‡æœ¬ä¿¡æ¯ï¼›å¦‚æœä»”ç»†è§‚å¯Ÿï¼Œå¯ä»¥çœ‹å‡ºèƒŒæ™¯æœ‰**å™ªç‚¹**æ•ˆæœï¼Œ`.bg` å°±æ˜¯ç”¨äºç”Ÿæˆå™ªç‚¹èƒŒæ™¯æ•ˆæœã€‚

### åˆ›å»ºæ˜é‡‘ `Logo`

```js
// åˆ›å»ºlogo
const logo = new THREE.Group();
const logoMaterial = new THREE.MeshMatcapMaterial({
  matcap: this.matcaps.logoMatcap,
  side: THREE.DoubleSide,
})
const cone = new THREE.Mesh(new THREE.ConeGeometry(4, 4, 4), logoMaterial);
logo.add(cone);
const cylinder = new THREE.Mesh(new THREE.CylinderGeometry(6, 10, 4, 4, 1), logoMaterial);
cylinder.position.y = -6
logo.add(cylinder);
const cylinder2 = new THREE.Mesh(new THREE.CylinderGeometry(12, 16, 4, 4, 1), logoMaterial);
cylinder2.position.y = -12
logo.add(cylinder2);
logo.position.set(0, 0, 0);
logo.scale.set(11, 11, 11);
logo.rotateY(Math.PI * 0.2);
logo.rotateZ(Math.PI * 0.1);
scene.add(logo);
```

![step_0](./images/step_0.png)

### åˆ›å»ºæ–‡å­— `1000!`

```js
new Text({
  ...DEFAULTS,
  text: '1000!',
  position: new THREE.Vector3(120, 160, -80),
  textOptions: {
    size: 110,
    spacing: 120
  },
  material: {
    matcap: this.matcaps.textMatcap1
  },
  animation: 'zoomAndFlip',
  onLoad: () => {
    this.confetti.pop(2);
  },
});
```

![step_1](./images/step_1.png)

### åˆ›å»ºæ–‡å­— `THANK YOU`

```js
new Text({
  ...DEFAULTS,
  text: 'THANK YOU',
  position: new THREE.Vector3(-120, -10, -80),
  textOptions: {
    size: 60,
    spacing: 100,
  },
  material: {
    matcap: this.matcaps.textMatcap2,
    opacity: .75
  },
  animation: 'upDownFlip',
});
```

![step_2](./images/step_2.png)

### åˆ›å»ºç¤¼èŠ± `ğŸ‰`

![step_3](./images/step_3.png)

### ç¼©æ”¾ç›‘å¬åŠé‡ç»˜åŠ¨ç”»

```js
const animate = () => {
  requestAnimationFrame(animate);
  controls && controls.update();
  logo && logo.rotateOnAxis(axis, Math.PI / 400);
  renderer.render(scene, camera);
}
animate();

window.addEventListener('pointermove', e => {
  e.preventDefault();
  this.mousePosition.x = e.clientX;
  this.mousePosition.y = e.clientY;
});

window.addEventListener('pointerdown', e => {
  e.preventDefault();
  this.confetti && this.confetti.pop();
});

window.addEventListener('resize', () => {
  this.width = window.innerWidth;
  this.height = window.innerHeight;
  this.camera.aspect = this.width / this.height;
  this.camera.updateProjectionMatrix();
  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
  this.renderer.setSize(this.width, this.height);
}, {
  passive: true
});
```

### æ ·å¼ç»†èŠ‚ä¼˜åŒ–

åˆ°è¿™ä¸€æ­¥ï¼Œé¡µé¢çš„å…¨éƒ¨åŠŸèƒ½å…¨éƒ¨å®Œæˆäº†ï¼Œç°åœ¨æ¥è£…é¥°ä¸€ä¸‹é¡µé¢ï¼Œå°† `renderer` è®¾ç½®ä¸ºé€æ˜ï¼Œç„¶ååœ¨ `CSS` ä¸­ä½¿ç”¨ä¸€å¼ å¥½çœ‹çš„ç§‘æŠ€æ„Ÿå›¾ç‰‡ä½œä¸ºé¡µé¢èƒŒæ™¯ï¼Œæœ€ååŠ ä¸Šå‡ ä¸ªè§’è½é‡Œçš„å›¾ç‰‡è£…é¥°ç‰©å’Œ `Github` å›¾æ ‡é“¾æ¥ï¼ŒåŠ ä¸€ç‚¹ç‚¹ `CSS` åŠ¨ç”»ï¼Œé¡µé¢æ•´ä½“è§†è§‰æ•ˆæœå°±å¾—åˆ°äº†ä¸é”™çš„æå‡ `ğŸ˜‰`ã€‚

![step_4](./images/step_4.png)

https://observablehq.com/@makio135/matcaps?ui=classic

https://github.com/nidorx/matcaps

http://jeanmoreno.com/unity/matcap/

### `ğŸ’¡` MeshMatcapMaterial

![matcap_sample_0](./images/matcap_sample_0.png)
![matcap_sample_1](./images/matcap_sample_1.png)
![matcap_sample_2](./images/matcap_sample_2.png)

`MeshMatcapMaterial` ç”±ä¸€ä¸ªæè´¨æ•æ‰ï¼ˆMatCapï¼Œæˆ–å…‰ç…§çƒï¼ˆLit Sphereï¼‰ï¼‰çº¹ç†æ‰€å®šä¹‰ï¼Œå…¶ç¼–ç äº†æè´¨çš„é¢œè‰²ä¸æ˜æš—ã€‚
ç”±äºmapcapå›¾åƒæ–‡ä»¶ç¼–ç äº†çƒ˜ç„™è¿‡çš„å…‰ç…§ï¼Œå› æ­¤MeshMatcapMaterial ä¸å¯¹ç¯å…‰ä½œå‡ºååº”ã€‚
å®ƒå°†ä¼šæŠ•å°„é˜´å½±åˆ°ä¸€ä¸ªæ¥å—é˜´å½±çš„ç‰©ä½“ä¸Š(and shadow clipping works)ï¼Œä½†ä¸ä¼šäº§ç”Ÿè‡ªèº«é˜´å½±æˆ–æ˜¯æ¥å—é˜´å½±ã€‚

**æ„é€ å‡½æ•°**ï¼š

```js
MeshMatcapMaterial(parameters: Object)
```

`parameters`ï¼šå¯é€‰ï¼Œç”¨äºå®šä¹‰æè´¨å¤–è§‚çš„å¯¹è±¡ï¼Œå…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§ï¼Œæè´¨çš„ä»»ä½•å±æ€§éƒ½å¯ä»¥ä»æ­¤å¤„ä¼ å…¥ï¼ŒåŒ…æ‹¬ä» `Material` ç»§æ‰¿çš„ä»»ä½•å±æ€§ã€‚

* `.color[Color]`ï¼šæè´¨çš„é¢œè‰²ï¼Œé»˜è®¤å€¼ä¸ºç™½è‰² `0xffffff`ã€‚
* `.matcap[Texture]`ï¼š`matcap` è´´å›¾ï¼Œé»˜è®¤ä¸º `null`ã€‚
* å…±æœ‰å±æ€§è¯·å‚è§å…¶åŸºç±»Materialã€‚

## æ€»ç»“

æœ¬æ–‡åŒ…å«çš„çŸ¥è¯†ç‚¹ä¸»è¦åŒ…æ‹¬ï¼š

> æƒ³äº†è§£å…¶ä»–å‰ç«¯çŸ¥è¯†æˆ–å…¶ä»–æœªåœ¨æœ¬æ–‡ä¸­è¯¦ç»†æè¿°çš„ `Web 3D` å¼€å‘æŠ€æœ¯ç›¸å…³çŸ¥è¯†ï¼Œå¯é˜…è¯»æˆ‘å¾€æœŸçš„æ–‡ç« ã€‚**è½¬è½½è¯·æ³¨æ˜åŸæ–‡åœ°å€å’Œä½œè€…**ã€‚å¦‚æœè§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸è¦å¿˜äº†**ä¸€é”®ä¸‰è¿å“¦ ğŸ‘**ã€‚

## é™„å½•

* [æˆ‘çš„3Dä¸“æ å¯ä»¥ç‚¹å‡»æ­¤é“¾æ¥è®¿é—® ğŸ‘ˆ](https://juejin.cn/column/7049923956257587213)
* [1]. [ğŸ¦Š Three.js å®ç°3Då¼€æ”¾ä¸–ç•Œå°æ¸¸æˆï¼šé˜¿ç‹¸çš„å¤šå…ƒå®‡å®™](https://juejin.cn/post/7081429595689320478)
* [2]. [ğŸ”¥ Three.js ç«ç„°æ•ˆæœå®ç°è‰¾å°”ç™»æ³•ç¯åŠ¨æ€logo](https://juejin.cn/post/7077726955528781832)
* [3]. [ğŸ¼ Three.js å®ç°2022å†¬å¥¥ä¸»é¢˜3Dè¶£å‘³é¡µé¢ï¼Œå«å†°å¢©å¢©](https://juejin.cn/post/7060292943608807460)
* `...`

* [1]. [ğŸ“· å‰ç«¯å®ç°å¾ˆå“‡å¡çš„æµè§ˆå™¨ç«¯æ‰«ç åŠŸèƒ½](https://juejin.cn/post/7018722520345870350)
* [2]. [ğŸŒ å‰ç«¯ç“¦ç‰‡åœ°å›¾åŠ è½½ä¹‹å¡å°”è¾¾ä¼ è¯´æ—·é‡ä¹‹æ¯](https://juejin.cn/post/7007432493569671182)
* [3]. [ğŸ˜± ä»…ç”¨CSSå‡ æ­¥å®ç°èµ›åšæœ‹å…‹2077é£æ ¼è§†è§‰æ•ˆæœ](https://juejin.cn/post/6972759988632551460)
* `...`

## å‚è€ƒ

* [1]. [https://threejs.org](https://threejs.org)
* [2]. [https://github.com/dataarts/dat.gui/blob/master/API.md](https://github.com/dataarts/dat.gui/blob/master/API.md)
* [3]. [https://echarts.apache.org/zh/index.html](https://echarts.apache.org/zh/index.html)
* [4]. [https://www.cnblogs.com/pangys/p/13276936.html](https://www.cnblogs.com/pangys/p/13276936.html)
* [5]. [https://developer.mozilla.org/zh-CN/docs/Web/CSS/gradient/radial-gradient](https://developer.mozilla.org/zh-CN/docs/Web/CSS/gradient/radial-gradient)
* [6]. [https://developer.mozilla.org/zh-CN/docs/Web/CSS/clip-path](https://developer.mozilla.org/zh-CN/docs/Web/CSS/clip-path)