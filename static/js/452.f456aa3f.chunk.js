"use strict";(self.webpackChunk_3d_examples=self.webpackChunk_3d_examples||[]).push([[452],{5452:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var a=n(5671),i=n(3144),o=n(136),s=n(4062),r=n(7313),d=n(3562),h=n(2518),c=n(8847),l=n(6417),p=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;return(0,a.Z)(this,r),(e=t.call(this)).state={loadingProcess:0,sceneReady:!1},e.initThree=function(){function e(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function t(e,t,n){if(e!==t)throw new TypeError("Private static access of wrong provenance");return n.get?n.get.call(e):n.value}function o(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function s(e,t,n){var a=t.get(e);if(!a)throw new TypeError("attempted to set private field on non-instance");if(a.set)a.set.call(e,n);else{if(!a.writable)throw new TypeError("attempted to set read only private field");a.value=n}return n}console.clear();var r=new WeakMap,l=new WeakMap,p=new WeakMap,u=new WeakMap,w=new WeakMap,m=new WeakMap,v=new WeakMap,f=new WeakMap,b=new WeakSet,g=new WeakSet,y=new WeakSet,M=new WeakSet,k=new WeakSet,x=new WeakMap,S=new WeakMap,W=new WeakMap,E=(0,i.Z)((function n(){var i=this;(0,a.Z)(this,n),k.add(this),M.add(this),y.add(this),g.add(this),b.add(this),r.set(this,{writable:!0,value:void 0}),l.set(this,{writable:!0,value:void 0}),p.set(this,{writable:!0,value:[]}),u.set(this,{writable:!0,value:!1}),w.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),v.set(this,{writable:!0,value:void 0}),f.set(this,{writable:!0,value:void 0}),x.set(this,{writable:!0,value:function(e,t,n){e.position.copy(e.body.position),e.quaternion.copy(e.body.quaternion);var a=e.body.position.y<6&&e.body.position.y>-1?.2:0;e.body.angularDamping=a,e.body.linearDamping=a;var s=1+e.position.y/50;e.material.opacity=s,s<=0&&(e.material.dispose(),e.geometry.dispose(),o(i,f).removeBody(e.body),o(i,m).remove(e),o(i,w).renderLists.dispose(),n.splice(t,1))}}),S.set(this,{writable:!0,value:function(e){var a=e.contact.getImpactVelocityAlongNormal();a<t(n,n,D)||(o(i,r).lookAt(new d.Pa4(a/400,a/300,a/200)),setTimeout((function(){return o(i,r).lookAt(t(n,n,j))}),a))}}),W.set(this,{writable:!0,value:function(){var a=1/t(n,n,P),s=window,d=s.innerHeight,h=s.innerWidth;o(i,w).setSize(h,d),o(i,r).aspect=h/d,o(i,r).updateProjectionMatrix(),o(i,f).step(a),o(i,p).forEach(o(i,x)),o(i,u)&&e(i,b,A).call(i),document.querySelector("#count h2").innerHTML=o(i,p).length.toString().padStart(3,"0"),o(i,w).render(o(i,m),o(i,r))}}),s(this,m,new d.xsS),o(this,m).fog=new d.ybr(0,-10,1024),s(this,f,new c.World),o(this,f).gravity.set(0,-30,0),o(this,f).broadphase=new c.NaiveBroadphase,o(this,f).defaultContactMaterial.restitution=.65,s(this,r,new d.cPb(30,window.innerWidth/window.innerHeight,.5,1e4)),o(this,r).position.set(0,200,-225),o(this,r).lookAt(t(n,n,j)),o(this,m).add(o(this,r)),e(this,M,F).call(this),e(this,k,q).call(this),e(this,y,L).call(this),s(this,w,new d.CP7({antialias:!0,canvas:document.querySelector(".webgl")})),o(this,w).setSize(window.innerWidth,window.innerHeight),o(this,w).shadowMap.enabled=!0;var h=function(e,t){t.preventDefault(),t.stopPropagation(),s(i,u,e)};document.body.addEventListener("mousedown",h.bind(this,!0)),document.body.addEventListener("mouseup",h.bind(this,!1)),document.body.addEventListener("touchstart",h.bind(this,!0)),document.body.addEventListener("touchend",h.bind(this,!1)),window.addEventListener("selectstart",(function(e){return e.preventDefault(),!1})),e(this,g,T).call(this),o(this,w).setAnimationLoop(o(this,W))})),j={writable:!0,value:new d.Pa4(0,0,0)},D={writable:!0,value:5},P={writable:!0,value:15},A=function(){Date.now()-o(this,v)<10||e(this,y,L).call(this)},T=function(){s(this,l,new h.z(o(this,r),o(this,w).domElement)),o(this,l).enablePan=!1,o(this,l).minDistance=0,o(this,l).maxDistance=1500,o(this,l).rotateSpeed=.5,o(this,l).keyPanSpeed=140,o(this,l).listenToKeyEvents(window)},L=function(){var e=Math.round(Math.random())?1:-1,t=o(this,p).length>0,a=t?Math.floor(25*Math.random())*e:0,i=t?Math.floor(25*Math.random())*e:0,r=new d.dpR,h=new d.Kj0(new d.xo$(5,32,16),new d.Wid({bumpMap:r.load(n(3791)),bumpScale:.25,color:16777215,map:r.load(n(8646)),metalness:0,opacity:1,roughness:1,transparent:!0})),l=new c.Sphere(5),u=new c.Body({friction:30,mass:1});u.addShape(l),u.position.set(a,100,i),u.quaternion.setFromAxisAngle(new c.Vec3(1,1,1),Math.floor(Math.random()*Math.PI)),u.addEventListener("collide",o(this,S)),o(this,f).add(u),h.castShadow=!0,h.position.set(a,100,i),h.body=u,o(this,p).push(h),o(this,m).add(h),s(this,v,Date.now())},F=function(){var e=new d.Mig(16777215,.5);o(this,m).add(e);var t=new d.Ox3(16777215,.9),n=200;t.position.set(n,n,0),t.castShadow=!0,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024,t.shadow.camera.left=-n,t.shadow.camera.right=n,t.shadow.camera.top=n,t.shadow.camera.bottom=-n,t.shadow.camera.far=600,t.shadow.camera.near=n,t.shadow.darkness=.5,o(this,m).add(t)},q=function(){var e=100,t=new d.dpR,a=new d.DvJ(e,2,e),i=new d.Wid({color:16777215,bumpMap:t.load(n(1795)),map:t.load(n(2052)),metalness:.3,roughMap:t.load(n(5394)),roughness:1,side:d.ehD}),s=new d.Kj0(a,i),r=new c.Box(new c.Vec3(50,1,50)),h=new c.Body({linearDamping:1,mass:0});h.position=new c.Vec3(0,0,0),h.quaternion.setFromAxisAngle(new c.Vec3(0,1,0),Math.PI/2),h.addShape(r),o(this,f).add(h),s.receiveShadow=!0,s.body=h,o(this,m).add(s);var l=new d.Wid({color:16777215,metalness:.2,opacity:.8,roughMap:t.load(n(5394)),roughness:1,transparent:1}),p=new d.DvJ(5,.1,e),u=new d.Kj0(p,l);u.receiveShadow=!0,u.position.set(0,1,0),o(this,m).add(u)};new E},e.mixers=[],e}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){this.initThree()}},{key:"componentWillUnmount",value:function(){this.setState=function(){}}},{key:"render",value:function(){return(0,l.jsxs)("div",{className:"tennis_page",children:[(0,l.jsx)("canvas",{className:"webgl"}),(0,l.jsxs)("div",{id:"count",children:[(0,l.jsx)("h2",{}),"\u7f51\u7403\u6570\u91cf"]}),(0,l.jsx)("div",{id:"instructions",children:"\u70b9\u51fb\u6216\u957f\u6309\u5730\u9762\u751f\u6210\u66f4\u591a\u7f51\u7403 \ud83c\udfbe"}),(0,l.jsxs)("a",{className:"github",href:"https://github.com/dragonir/3d",target:"_blank",rel:"noreferrer",children:[(0,l.jsx)("svg",{height:"36","aria-hidden":"true",viewBox:"0 0 16 16",version:"1.1",width:"36","data-view-component":"true",children:(0,l.jsx)("path",{fill:"#FFFFFF",fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),(0,l.jsx)("span",{className:"author",children:"@dragonir"})]})]})}}]),r}(r.Component)},3791:function(e,t,n){e.exports=n.p+"static/media/tennis-ball-bumpmap.49211c9feda76ddbbecc.png"},8646:function(e,t,n){e.exports=n.p+"static/media/tennis-ball-colormap.afa890d0cff40433dd2a.png"},1795:function(e,t,n){e.exports=n.p+"static/media/tennis-court-bumpmap.c53e8820eb0cd3c39c45.png"},5394:function(e,t,n){e.exports=n.p+"static/media/tennis-court-roughmap.74d3d1040efec19c2c56.png"},2052:function(e,t,n){e.exports=n.p+"static/media/tennis-court-texture.d1a831ce31e2e031cf63.png"}}]);