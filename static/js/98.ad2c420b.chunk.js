"use strict";(self.webpackChunk_3d_examples=self.webpackChunk_3d_examples||[]).push([[98],{5762:function(e,t,i){i.r(t),i.d(t,{default:function(){return w}});var s=i(1413),n=i(5671),a=i(3144),r=i(136),o=i(9388),h=i(7313),d=i(2518),l=i(7943),c=i(6417),u=i.g.THREE,w=function(e){(0,r.Z)(i,e);var t=(0,o.Z)(i);function i(){var e;return(0,n.Z)(this,i),(e=t.call(this)).state={loadingProcess:0,sceneReady:!1},e.initThree=function(){var e={width:window.innerWidth,height:window.innerHeight},t=function(e){return e*(Math.PI/180)},i=function(e){e.traverse((function(e){e instanceof u.Mesh&&(e.castShadow=!0,e.receiveShadow=!0)}))},r=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=Math.random()*(t-e)+e;return i?s:Math.floor(s)},o=function(e,t,i,s,n){return(n-s)*(e-t)/(i-t)+s},h=function(e,t){return e.vertices.forEach((function(e){e.x+=o(Math.random(),0,1,-t,t),e.y+=o(Math.random(),0,1,-t,t),e.z+=o(Math.random(),0,1,-t,t)}))},c=function(){function t(i){(0,n.Z)(this,t),this.params=(0,s.Z)({x:0,y:0,z:0,aspectRatio:e.width/e.height,fieldOfView:60,nearPlane:.1,farPlane:3e3},i),this.camera=null,this.scene=null,this.controls=null,this.renderer=null}return(0,a.Z)(t,[{key:"initStats",value:function(){this.stats=new l.Z,this.stats.setMode(0),this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement)}},{key:"initScene",value:function(){this.scene=new u.Scene,this.scene.background=null,this.scene.fog=new u.FogExp2(7198202,.015)}},{key:"initCamera",value:function(){this.camera=new u.PerspectiveCamera(this.params.fieldOfView,this.params.aspectRatio,this.params.nearPlane,this.params.farPlane),this.camera.updateProjectionMatrix(),this.camera.position.set(6,8.5,25),this.camera.lookAt(this.scene.position)}},{key:"initControls",value:function(){this.controls=new d.z(this.camera,this.renderer.domElement),this.controls.minDistance=10,this.controls.maxDistance=1e4,this.controls.autoRotate=!0,this.controls.autoRotateSpeed=-3}},{key:"initRenderer",value:function(){var t=!0;window.devicePixelRatio>1&&(t=!1);var i=document.querySelector("[data-canvas]");this.renderer=new u.WebGLRenderer({canvas:i,alpha:!0,antialias:t,powerPreference:"high-performance"}),this.renderer.setSize(e.width,e.height),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.soft=!0}},{key:"initLights",value:function(){this.directionalLight=new u.DirectionalLight(16777215,.4,100),this.light=new u.HemisphereLight(16777215,11765132,.9),this.scene.add(this.light),this.scene.add(this.directionalLight),this.directionalLight.position.set(10,12,8),this.directionalLight.castShadow=!0,this.directionalLight.receiveShadow=!0,this.directionalLight.shadow.mapSize.width=512,this.directionalLight.shadow.mapSize.height=512,this.directionalLight.shadow.camera.near=.5,this.directionalLight.shadow.camera.far=500}},{key:"render",value:function(){this.stats.begin(),requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera),this.stats.end()}},{key:"init",value:function(){this.initStats(),this.initScene(),this.initCamera(),this.initRenderer(),this.initControls(),this.initLights()}}]),t}(),w=function(){function e(t,i){(0,n.Z)(this,e),this.params=(0,s.Z)({x:0,y:0,z:0,herbs:2},i),this.island=new u.Group,t.add(this.island),this.island.position.x=this.params.x,this.island.position.y=this.params.y,this.island.position.z=this.params.z,this.cloudMaterial=new u.MeshPhongMaterial({color:14612991,transparent:!0,opacity:.8,flatShading:!0}),this.greenMaterial=new u.MeshPhongMaterial({color:3642193,flatShading:!0}),this.earthMaterial=new u.MeshPhongMaterial({color:6704689,flatShading:!0}),this.stoneMaterial=new u.MeshLambertMaterial({color:10399404})}return(0,a.Z)(e,[{key:"drawGround",value:function(){this.ground=new u.Group;var e=new u.CylinderGeometry(7,2,9,12,5);h(e,.6),e.translate(0,-.5,0);var t=new u.Mesh(e,this.earthMaterial),s=new u.CylinderGeometry(7.4,5.5,3.7,30,2);h(s,.2),s.translate(0,3.1,0);var n=new u.Mesh(s,this.greenMaterial),a=new u.TetrahedronGeometry(r(.5,1.5),r(2,3));h(a,.2);var o=new u.Mesh(a,this.earthMaterial);o.scale.set(r(1,1.5,!0),r(1,1.8,!0),r(1,1.5,!0)),o.position.set(-5,r(-4,-1,!0),r(-2,2,!0)),this.ground.add(o),this.ground.add(t),this.ground.add(n),this.ground.position.y=-5.6,i(this.ground),this.island.add(this.ground)}},{key:"drawCloud",value:function(){this.clouds=new u.Group;var e=new u.SphereGeometry(2,6,6);h(e,.2);var t=new u.Mesh(e,this.cloudMaterial);t.scale.set(1,.8,1);var s=t.clone();s.scale.set(.75,.5,1),s.position.set(1.95,-.5,0);var n=t.clone();n.scale.set(.75,.5,1),n.position.set(-1.85,-1,0),this.clouds.add(t),this.clouds.add(s),this.clouds.add(n),i(this.clouds),this.clouds.position.x=-5,this.clouds.position.y=8,this.clouds.position.z=-4.6,this.island.add(this.clouds);var a=this.clouds.clone();a.scale.set(1,1.2,1.2),a.position.x=6,a.position.y=-9,a.position.z=4,this.island.add(a)}},{key:"drawRocks",value:function(){this.rocks=new u.Group;var e=new u.DodecahedronGeometry(1,0),t=new u.Mesh(e,this.stoneMaterial);t.scale.set(r(.8,1.2,!0),r(.5,3,!0),1);var s=t.clone();s.scale.set(r(.8,1.2,!0),r(.5,3,!0),1),s.position.set(1.2,0,-1.3),this.rocks.add(t),this.rocks.add(s),this.rocks.position.x=-5,this.rocks.position.y=0,this.rocks.position.z=-2.5,i(this.rocks),this.island.add(this.rocks)}},{key:"drawHerbs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:1.1,y:0,z:2},t=.2;this.herbs=new u.Group;var s,n=new u.ConeBufferGeometry(t,1,6),a=new u.Mesh(n,this.greenMaterial);for(a.position.set(0,-.4,0),a.rotation.set(0,r(-.7,.7,!0),0),this.herbs.add(a),s=0;s<2;s++){var o=a.clone();o.position.set(r(-.5,.5,!0),-.4,r(-.5,.5,!0)),o.rotation.set(r(-.2,.2,!0),r(-.7,.7,!0),r(-.2,.2,!0)),this.herbs.add(o)}this.herbs.position.x=e.x,this.herbs.position.y=e.y,this.herbs.position.z=e.z,i(this.herbs),this.island.add(this.herbs)}},{key:"init",value:function(){var e;for(this.drawGround(),this.drawCloud(),this.drawRocks(),this.drawHerbs(),e=0;e<this.params.herbs;e++)this.drawHerbs({x:r(-5,5,!0),y:0,z:r(-5,5,!0)})}}]),e}(),p=function(){function e(t,i){(0,n.Z)(this,e),this.params=(0,s.Z)({x:0,y:0,z:0},i),this.bblock=new u.Group,t.add(this.bblock),this.bblock.position.x=this.params.x,this.bblock.position.y=this.params.y,this.bblock.position.z=this.params.z,this.arms=[],this.legs=[],this.skinMaterial=new u.MeshPhongMaterial({color:16767916,flatShading:!1}),this.hairMaterial=new u.MeshPhongMaterial({color:5521210,flatShading:!1}),this.pantsMaterial=new u.MeshPhongMaterial({color:3355443,flatShading:!1}),this.sweatMaterial=new u.MeshPhongMaterial({color:16777215,flatShading:!1}),this.shoesMaterial=new u.MeshPhongMaterial({color:16777215,flatShading:!1})}return(0,a.Z)(e,[{key:"drawHead",value:function(){this.head=new u.Mesh(new u.BoxBufferGeometry(2.5,2.5,2.5),this.skinMaterial),this.head.castShadow=!0,this.head.receiveShadow=!0,this.head.position.set(0,4.8,0),this.hair=new u.Mesh(new u.BoxBufferGeometry(2.95,2.5,2.3),this.hairMaterial),this.hair.castShadow=!0,this.hair.receiveShadow=!0,this.hair.position.set(0,5.3,-.3),this.hairFront=new u.Mesh(new u.BoxBufferGeometry(1.5,.5,.8),this.hairMaterial),this.hairFront.castShadow=!0,this.hairFront.receiveShadow=!0,this.hairFront.position.set(0,6.3,.85);var e=new u.Geometry,t=new u.BoxGeometry(1.3,1.3,1.3).translate(0,0,0),s=new u.BoxGeometry(.8,.8,.8).translate(0,.5,-.5);e.merge(t),e.merge(s),this.hairBun=new u.Mesh(e,this.hairMaterial),this.hairBun.position.set(0,6.3,-1.3),i(this.hairBun),this.bblock.add(this.head),this.bblock.add(this.hair),this.bblock.add(this.hairFront),this.bblock.add(this.hairBun)}},{key:"drawEyes",value:function(){this.retines=new u.Group,this.eyesbrow=new u.Group;var e,t=new u.BoxBufferGeometry(.2,.5,.1),s=new u.BoxBufferGeometry(.8,.25,.1);for(e=0;e<2;e++){var n=new u.Mesh(t,this.pantsMaterial),a=new u.Mesh(s,this.hairMaterial);this.retines.add(n),this.eyesbrow.add(a);var r=e%2===0?.5:-.5;n.position.x=r,a.position.x=r}this.head.add(this.retines),this.head.add(this.eyesbrow),i(this.eyesbrow),this.retines.position.y=0,this.retines.position.z=1.3,this.eyesbrow.position.y=.7,this.eyesbrow.position.z=1.3}},{key:"drawBody",value:function(){this.body=new u.Mesh(new u.BoxBufferGeometry(2.3,2,2.2),this.sweatMaterial),this.body.castShadow=!0,this.body.receiveShadow=!0,this.body.position.set(0,2.5,0),this.bblock.add(this.body)}},{key:"drawArms",value:function(){var e,t=new u.BoxBufferGeometry(.45,1.9,.85),s=new u.BoxBufferGeometry(.45,.2,.65);for(e=0;e<2;e++){var n=new u.Group,a=new u.Mesh(t,this.sweatMaterial),r=new u.Mesh(s,this.skinMaterial);n.add(a),n.add(r),this.arms.push(n),this.bblock.add(n),i(n);var o=e%2===0?1:-1;n.position.x=1.4*o,n.position.y=3.5,a.position.y=-.95,r.position.y=-2}}},{key:"drawLegs",value:function(){var e,t=new u.BoxBufferGeometry(.9,1.8,1.6),s=new u.BoxBufferGeometry(.75,.45,1.9);for(e=0;e<2;e++){var n=new u.Group,a=new u.Mesh(t,this.pantsMaterial),r=new u.Mesh(s,this.shoesMaterial);n.add(a),n.add(r),this.legs.push(n),this.bblock.add(n),i(n);var o=e%2===0?.5:-.5;n.position.x=o,n.position.y=1.4,a.position.y=-.81,r.position.y=-1.8-.1,r.position.z=.2}}},{key:"moveArms",value:function(e){this.arms.forEach((function(i,s){var n=s%2===0?1:-1;i.rotation.x=t(e*n)}))}},{key:"moveLegs",value:function(e){this.legs.forEach((function(i,s){var n=s%2===0?1:-1;i.rotation.x=t(e*n)}))}},{key:"init",value:function(){this.drawHead(),this.drawEyes(),this.drawBody(),this.drawArms(),this.drawLegs()}}]),e}(),f=new c;f.init(),f.render(),new w(f.scene,{x:0,y:0,z:0,herbs:10}).init();var m=new p(f.scene);m.init(),new w(f.scene,{x:25,y:-40,z:-70,herbs:10}).init(),new p(f.scene,{x:25,y:-40,z:-70,herbs:10}).init(),new w(f.scene,{x:-70,y:20,z:-100,herbs:10}).init(),new p(f.scene,{x:-70,y:20,z:-100,herbs:10}).init(),document.querySelector("[data-input-both]").addEventListener("input",(function(e){m.moveArms(-e.target.value),m.moveLegs(e.target.value)})),window.addEventListener("resize",(function(){e.width=window.innerWidth,e.height=window.innerHeight,f.camera.aspect=e.width/e.height,f.camera.updateProjectionMatrix(),f.renderer.setSize(window.innerWidth,window.innerHeight)}))},e.mixers=[],e}return(0,a.Z)(i,[{key:"componentDidMount",value:function(){this.initThree()}},{key:"componentWillUnmount",value:function(){this.setState=function(){}}},{key:"render",value:function(){return(0,c.jsxs)("div",{className:"demo",children:[(0,c.jsx)("canvas",{className:"webgl","data-canvas":!0}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{for:"bothAngle",children:"Move Character (Wip)"}),(0,c.jsx)("input",{type:"range",min:"-90",max:"90",value:"0","data-input-both":!0,id:"bothAngle"})]}),100===this.state.loadingProcess?"":(0,c.jsx)("div",{className:"loading",children:(0,c.jsxs)("span",{className:"progress",children:[this.state.loadingProcess," %"]})}),(0,c.jsxs)("a",{className:"github",href:"https://github.com/dragonir/3d",target:"_blank",rel:"noreferrer",children:[(0,c.jsx)("svg",{height:"36","aria-hidden":"true",viewBox:"0 0 16 16",version:"1.1",width:"36","data-view-component":"true",children:(0,c.jsx)("path",{fill:"#FFFFFF",fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),(0,c.jsx)("span",{className:"author",children:"@dragonir"})]})]})}}]),i}(h.Component)},7943:function(e,t){var i=function e(){var t=0,i=document.createElement("div");function s(e){return i.appendChild(e.dom),e}function n(e){for(var s=0;s<i.children.length;s++)i.children[s].style.display=s===e?"block":"none";t=e}i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(e){e.preventDefault(),n(++t%i.children.length)}),!1);var a=(performance||Date).now(),r=a,o=0,h=s(new e.Panel("FPS","#0ff","#002")),d=s(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=s(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:s,showPanel:n,begin:function(){a=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();if(d.update(e-a,200),e>=r+1e3&&(h.update(1e3*o/(e-r),100),r=e,o=0,l)){var t=performance.memory;l.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:i,setMode:n}};i.Panel=function(e,t,i){var s=1/0,n=0,a=Math.round,r=a(window.devicePixelRatio||1),o=80*r,h=48*r,d=3*r,l=2*r,c=3*r,u=15*r,w=74*r,p=30*r,f=document.createElement("canvas");f.width=o,f.height=h,f.style.cssText="width:80px;height:48px";var m=f.getContext("2d");return m.font="bold "+9*r+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=i,m.fillRect(0,0,o,h),m.fillStyle=t,m.fillText(e,d,l),m.fillRect(c,u,w,p),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(c,u,w,p),{dom:f,update:function(h,y){s=Math.min(s,h),n=Math.max(n,h),m.fillStyle=i,m.globalAlpha=1,m.fillRect(0,0,o,u),m.fillStyle=t,m.fillText(a(h)+" "+e+" ("+a(s)+"-"+a(n)+")",d,l),m.drawImage(f,c+r,u,w-r,p,c,u,w-r,p),m.fillRect(c+w-r,u,r,p),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(c+w-r,u,r,a((1-h/y)*p))}}},t.Z=i}}]);