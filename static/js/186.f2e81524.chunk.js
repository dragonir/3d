(self.webpackChunk_3d_examples=self.webpackChunk_3d_examples||[]).push([[186],{7186:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return w}});var n=t(5671),a=t(3144),i=t(136),o=t(4062),s=t(7313),l=t(3562),c=t(40),u=t(9737),d=t(6438),f=t(8665),m=t.n(f),v=t(4556),x=t.n(v),p=t(6417),w=function(e){(0,i.Z)(s,e);var r=(0,o.Z)(s);function s(e){var a;return(0,n.Z)(this,s),(a=r.call(this,e)).initThree=function(){var e=document.getElementById("container"),r=new l.CP7({antialias:!0});r.setPixelRatio(window.devicePixelRatio),r.setSize(a.width,a.height),r.shadowMap.enabled=!0,a.renderer=r,e.appendChild(r.domElement);var n=new l.xsS;n.background=new l.Ilk(14540253),a.scene=n;var i=new l.cPb(70,window.innerWidth/window.innerHeight,.001,1e3);i.position.set(0,0,7),a.camera=i,window.addEventListener("resize",(function(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}),!1);var o=new l.DvJ(.001,.001,.001),s=new l.YBo({color:14423578}),f=new l.Kj0(o,s);f.position.set(0,0,0);var v=new l.Ox3(14540253,1);v.intensity=1.2,v.position.set(-5,8,3),v.castShadow=!0,v.target=f,v.shadow.mapSize.width=6144,v.shadow.mapSize.height=6144,v.shadow.camera.top=10,v.shadow.camera.bottom=-5,v.shadow.camera.left=-5,v.shadow.camera.right=10,n.add(v);var p=new l.Mig(14540253);n.add(p);var w=function(e,r){var t,n,a=e.position;t=(t=e.children[0].geometry.clone()).applyMatrix((new l.yGw).makeTranslation(a.x,a.y,a.z)),n=(n=e.children[1].geometry).clone().applyMatrix((new l.yGw).makeTranslation(a.x,a.y,a.z));var i=e.children[0].geometry.attributes.position.array.length/3,o=e.children[1].geometry.attributes.position.array.length/3,s=new Array(i).fill(r/100);t.addAttribute("offset",new l.TlE(new Float32Array(s),1));var c=new Array(o).fill(r/100);n.addAttribute("offset",new l.TlE(new Float32Array(c),1));for(var u=new l.Pa4(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),d=new Array(3*i).fill(0),f=new Array(3*o).fill(0),m=0;m<3*i;m+=3)d[m]=u.x,d[m+1]=u.y,d[m+2]=u.z;t.addAttribute("axis",new l.TlE(new Float32Array(d),3));for(var v=0;v<3*o;v+=3)f[v]=u.x,f[v+1]=u.y,f[v+2]=u.z;n.addAttribute("axis",new l.TlE(new Float32Array(f),3));for(var x=function(e){for(var r=e.attributes.position.array,t=r.length,n=0,a=0,i=0,o=0;o<t;o+=3)n+=r[o],a+=r[o+1],i+=r[o+2];return{x:3*n/t,y:3*a/t,z:3*i/t}}(t),p=new Array(3*i).fill(0),w=new Array(3*o).fill(0),h=0;h<3*i;h+=3)p[h]=x.x,p[h+1]=x.y,p[h+2]=x.z;for(var y=0;y<3*o;y+=3)w[y]=x.x,w[y+1]=x.y,w[y+2]=x.z;return t.addAttribute("centroId",new l.TlE(new Float32Array(p),3)),n.addAttribute("centroId",new l.TlE(new Float32Array(w),3)),{surface:t,volume:n}};a.textureCube=(new l.cBK).load([t(5730),t(1305),t(1203),t(4864),t(3528),t(334)]),a.material=new l.jyz({extensions:{derivatives:"#extension GL_OES_standard_derivatives : enable"},side:l.ehD,uniforms:{time:{type:"f",value:0},progress:{type:"f",value:0},inside:{type:"f",value:0},surfaceColor:{type:"v3",value:a.surfaceColor},insideColor:{type:"v3",value:a.insideColor},tCube:{value:a.textureCube},pixels:{type:"v2",value:new l.FM8(a.width,a.height)},uvRate1:{value:new l.FM8(1,1)}},vertexShader:x(),fragmentShader:m()}),a.material1=a.material.clone(),a.material1.uniforms.inside.value=1,function(){var e=[],r=[],t=[],i=0;(new c.E).load(d,(function(o){o.scene.traverse((function(r){"Voronoi_Fracture"===r.name&&(r.children[0].children.length>2?r.children.forEach((function(r){r.children.forEach((function(r){e.push(r.clone())}))})):r.children.forEach((function(r){e.push(r.clone())})))})),e.filter((function(e){if(e.isMesh)return!1;i++;var n=w(e,i);return a.inverted?(t.push(n.surface),r.push(n.volume)):(r.push(n.surface),t.push(n.volume)),!0})),new l.Kj0((0,u.qf)(r,!1),a.material).frustumCulled=!1,new l.Kj0((0,u.qf)(t,!1),a.material).frustumCulled=!1,n.add(o.scene),a.heart=o.scene}))}(),function e(){a.heart&&(a.heart.rotation.y+=.01),a.time+=.05,a.mouseX+=.05*(a.targetmouseX-a.mouseX),a.material&&(a.material.uniforms.progress.value=Math.abs(a.progress)),a.material1&&(a.material1.uniforms.progress.value=Math.abs(a.progress)),requestAnimationFrame(e),r.render(n,i)}()},a.renderer=null,a.scene=null,a.camera=null,a.width=window.innerWidth,a.height=window.innerHeight,a.mouseX=0,a.mouseY=0,a.targetmouseX=0,a.targetmouseY=0,a.heart=null,a.textureCube=null,a.material=null,a.material1=null,a.progress=0,a.inverted=!1,a}return(0,a.Z)(s,[{key:"componentDidMount",value:function(){this.initThree()}},{key:"render",value:function(){return(0,p.jsx)("div",{id:"container"})}}]),s}(s.Component)},8665:function(e){e.exports="uniform float time;\r\nuniform float progress;\r\nuniform float inside;\r\nuniform vec3 surfaceColor;\r\nuniform vec3 insideColor;\r\nuniform samplerCube tCube;\r\n\r\nvarying vec2 vUv;\r\nvarying vec2 vUv1;\r\nvarying vec3 eye;\r\nvarying vec3 vNormal;\r\nvarying vec3 vReflect;\r\n\r\n\r\nvoid main ()\t{\r\n\tvec3 r = reflect(eye, vNormal);\r\n\tfloat m = 2. * sqrt(pow(r.x, 2.) + pow(r.y, 2.) + pow(r.z + 1., 2.));\r\n\tvec2 vN = r.xy / m + .5;\r\n\tvec4 reflectedColor = textureCube(tCube, vec3(-vReflect.x, vReflect.yz));\r\n\r\n\tvec3 light = normalize(vec3(12.,10.,10.));\r\n\tvec3 light1 = normalize(vec3(-12.,-10.,-10.));\r\n\tfloat l = clamp(dot(light, vNormal),0.5,1.);\r\n\tl += clamp(dot(light1, vNormal),0.5,1.)/2.;\r\n\r\n\tif (inside>0.5) {\r\n\t\tgl_FragColor = vec4(l,l,l,1.)*vec4(surfaceColor,1.);\r\n\t} else {\r\n\t\tgl_FragColor = reflectedColor*vec4(insideColor,1.);\r\n\t}\r\n}"},4556:function(e){e.exports="uniform float time;\r\nuniform float progress;\r\nuniform float inside;\r\n\r\nattribute vec3 centroId;\r\nattribute vec3 axis;\r\nattribute float offset;\r\n\r\nvarying vec3 eye;\r\nvarying vec3 vNormal;\r\nvarying vec3 vReflect;\r\n\r\nmat4 rotationMatrix(vec3 axis, float angle) {\r\n    axis = normalize(axis);\r\n    float s = sin(angle);\r\n    float c = cos(angle);\r\n    float oc = 1.0 - c;\r\n    \r\n    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\r\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\r\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\r\n                0.0,                                0.0,                                0.0,                                1.0);\r\n}\r\n\r\nvec3 rotate(vec3 v, vec3 axis, float angle) {\r\n  mat4 m = rotationMatrix(axis, angle);\r\n  return (m * vec4(v, 1.0)).xyz;\r\n}\r\n\r\nvec3 bezier4(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\r\n  return mix(mix(mix(a, b, t), mix(b, c, t), t), mix(mix(b, c, t), mix(c, d, t), t), t);\r\n}\r\n\r\nfloat easeInOutQuint(float t){\r\n  return t < 0.5 ? 16.0 * t * t * t * t * t : 1.0 + 16.0 * (--t) * t * t * t * t;\r\n}\r\nfloat easeOutQuint(float t){\r\n  return 1. + (--t) * t * t * t * t;\r\n}\r\nfloat easeOut(float t){\r\n  return  t * t * t;\r\n}\r\n\r\n\r\nvoid main() {\r\n\r\n\r\n\r\n  vec3 newposition = position;\r\n\r\n\r\n  float vTemp =  1. - (centroId.z*1.4 + 1.)/2.;\r\n\r\n  float tProgress = max(0.0, (progress - vTemp*0.5) /0.5);\r\n\r\n  vec3 newnormal = rotate(normal,axis,tProgress*(3. + offset*10.));\r\n  vNormal = newnormal;\r\n\r\n  newposition = rotate(newposition - centroId,axis,(1. - vTemp)*tProgress*(3. + offset*10.)) + centroId;\r\n  newposition += newposition + (1.5 - vTemp)*centroId*(tProgress)*(3. + vTemp*7. + offset*3.);\r\n\r\n\r\n\r\n  eye = normalize( vec3( modelViewMatrix * vec4( newposition, 1.0 ) ) );\r\n  vec4 worldPosition = modelMatrix * vec4( newposition, 1.0 );\r\n  vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * newnormal );\r\n  vec3 I = worldPosition.xyz - cameraPosition;\r\n  vReflect = reflect( I, worldNormal );\r\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( newposition, 1.0 );\r\n}"},6438:function(e,r,t){"use strict";e.exports=t.p+"static/media/heart.fe55d3de7019f6c39a69.glb"},1305:function(e,r,t){"use strict";e.exports=t.p+"static/media/nx.41d97f803e0b307aca04.jpg"},4864:function(e,r,t){"use strict";e.exports=t.p+"static/media/ny.96ca45f510df7d63ce27.jpg"},334:function(e,r,t){"use strict";e.exports=t.p+"static/media/nz.7e443a87322a46b519d9.jpg"},5730:function(e,r,t){"use strict";e.exports=t.p+"static/media/px.29af852ad77ee9943f86.jpg"},1203:function(e,r,t){"use strict";e.exports=t.p+"static/media/py.d4185b45c9ff16c5da03.jpg"},3528:function(e,r,t){"use strict";e.exports=t.p+"static/media/pz.e78185d64e25a98a11a4.jpg"}}]);