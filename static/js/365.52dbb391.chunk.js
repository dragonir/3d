(self.webpackChunk_3d_examples=self.webpackChunk_3d_examples||[]).push([[365],{708:function(e,t,n){"use strict";var r=n(6892),a={animateCamera:function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2e3,s=arguments.length>5?arguments[5]:void 0,o=new r.w.Tween({x1:e.position.x,y1:e.position.y,z1:e.position.z,x2:t.target.x,y2:t.target.y,z2:t.target.z});o.to({x1:n.x,y1:n.y,z1:n.z,x2:a.x,y2:a.y,z2:a.z},i),o.onUpdate((function(n){e.position.x=n.x1,e.position.y=n.y1,e.position.z=n.z1,t.target.x=n.x2,t.target.y=n.y2,t.target.z=n.z2,t.update()})),o.onComplete((function(){t.enabled=!0,s()})),o.easing(r.w.Easing.Cubic.InOut),o.start()}};t.Z=a},9365:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(4165),a=n(5861),i=n(5671),s=n(3144),o=n(7326),l=n(136),u=n(4062),c=n(7313),p=n(2518),h=n(6892),d=n(708),f=n(5042),m=n(7196),E=n(3956),v=n(6806),g=n(5680),T=n(8082),R=n(5947),y=n(1175),M=n(8710),_=n(6417);n(7905);var w=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(e){var s;return(0,i.Z)(this,n),(s=t.call(this,e)).state={loadingProcess:0},s.initThree=function(){var e,t,n,i,l,u,c,_=null,w=[],S=[],H=new THREE.Group,b=new THREE.Clock,A=(window.innerWidth,window.innerHeight,(0,o.Z)(s));function L(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight)}!function(){e=document.getElementById("container"),(u=new THREE.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),u.setSize(window.innerWidth,window.innerHeight),u.shadowMap.enabled=!0,e.appendChild(u.domElement),(l=new THREE.Scene).background=(new THREE.TextureLoader).load(T),l.fog=new THREE.Fog(16777215,10,100),(i=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,1e3)).position.set(0,30,100),i.lookAt(new THREE.Vector3(0,0,0));var s=new THREE.BoxGeometry(.001,.001,.001),o=new THREE.MeshLambertMaterial({color:14423578}),h=new THREE.Mesh(s,o);h.position.set(0,0,0),(c=new THREE.DirectionalLight(16777215,1)).intensity=1,c.position.set(16,16,8),c.castShadow=!0,c.target=h,c.shadow.mapSize.width=6144,c.shadow.mapSize.height=6144,c.shadow.camera.top=40,c.shadow.camera.bottom=-40,c.shadow.camera.left=-40,c.shadow.camera.right=40,l.add(c);var b=new THREE.AmbientLight(13631487);b.intensity=1,l.add(b);var x=new THREE.LoadingManager;x.onStart=function(e,t,n){},x.onLoad=function(){console.log("Loading complete!")},x.onProgress=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,a,s){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:100===Math.floor(a/s*100)?(A.loadingProcessTimeout&&clearTimeout(A.loadingProcessTimeout),A.loadingProcessTimeout=setTimeout((function(){A.setState({loadingProcess:Math.floor(a/s*100)}),d.Z.animateCamera(i,t,{x:0,y:-1,z:20},{x:0,y:0,z:5},3600,(function(){}))}),800)):A.setState({loadingProcess:Math.floor(a/s*100)});case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();var I=new THREE.GLTFLoader(x);I.load(f,(function(e){e.scene.traverse((function(e){e.isMesh&&(w.push(e),e.material.metalness=.1,e.material.roughness=.8,"Mesh_2"===e.name&&(e.material.metalness=.5,e.receiveShadow=!0),"Mesh_17"===e.name&&(e.material.metalness=.2,e.material.roughness=.8),e.name)})),e.scene.rotation.y=Math.PI/4,e.scene.position.set(15,-20,0),e.scene.scale.set(.9,.9,.9),_=e.scene,l.add(_)})),I.load(g,(function(e){e.scene.traverse((function(e){e.isMesh&&(w.push(e),e.castShadow=!0,"mesh_0001"===e.name&&(e.material.metalness=.1,e.material.roughness=.1,e.material.map=(new THREE.TextureLoader).load(M)),"\u67f1\u4f53"===e.name&&(e.material.metalness=.6,e.material.roughness=0,e.material.refractionRatio=1,e.material.color=new THREE.Color(15658734)))})),e.scene.rotation.y=Math.PI/24,e.scene.position.set(2,-7,-1),e.scene.scale.set(4,4,4);var t=e.animations[0];t=(n=new THREE.AnimationMixer(e.scene)).clipAction(t).play().getClip(),l.add(e.scene)})),I.load(E,(function(e){e.scene.traverse((function(e){e.isMesh&&(w.push(e),"\u76ae\u80a4"===e.name&&(e.material.metalness=.3,e.material.roughness=.8),"\u5916\u58f3"===e.name&&(e.material.transparent=!0,e.material.opacity=.4,e.material.metalness=.4,e.material.roughness=0,e.material.refractionRatio=1.6,e.castShadow=!0,e.material.envMap=(new THREE.TextureLoader).load(T),e.material.envMapIntensity=1),"\u56f4\u8116"===e.name&&(e.material.transparent=!0,e.material.opacity=.6,e.material.metalness=.4,e.material.roughness=.6))})),e.scene.rotation.y=Math.PI/24,e.scene.position.set(-5,-11.5,0),e.scene.scale.set(24,24,24),l.add(e.scene)})),I.load(v,(function(e){e.scene.traverse((function(e){e.isMesh&&(e.castShadow=!0,w.push(e))})),e.scene.rotation.y=Math.PI/3,e.scene.position.set(-20,-10.8,0),e.scene.scale.set(12,12,12),l.add(e.scene)}));var C=new THREE.MeshPhysicalMaterial({map:(new THREE.TextureLoader).load(y),transparent:!0,side:THREE.DoubleSide,metalness:.2,roughness:.8,depthTest:!0,depthWrite:!1,skinning:!1,fog:!1,reflectivity:.1,refractionRatio:0}),P=new THREE.MeshDepthMaterial({depthPacking:THREE.RGBADepthPacking,map:(new THREE.TextureLoader).load(y),alphaTest:.5});I.load(m,(function(e){e.scene.traverse((function(e){e.isMesh&&(w.push(e),e.material=C,e.custromMaterial=P)})),e.scene.position.set(14,-9,0),e.scene.scale.set(16,16,16),l.add(e.scene);var t=e.scene.clone();t.position.set(10,-8,-15),t.scale.set(18,18,18),l.add(t);var n=e.scene.clone();n.position.set(-18,-8,-16),n.scale.set(22,22,22),l.add(n)})),[{key:"cycle_0",color:558530,position:{x:-250,y:0,z:0}},{key:"cycle_1",color:0,position:{x:-10,y:0,z:1}},{key:"cycle_2",color:15545166,position:{x:230,y:0,z:0}},{key:"cycle_3",color:16494898,position:{x:-125,y:-100,z:-5}},{key:"cycle_4",color:1870652,position:{x:115,y:-100,z:10}}].map((function(e){var t=new THREE.Mesh(new THREE.TorusGeometry(100,10,10,50),new THREE.MeshLambertMaterial({color:new THREE.Color(e.color),side:THREE.DoubleSide}));t.castShadow=!0,t.position.set(e.position.x,e.position.y,e.position.z),w.push(t),H.add(t)})),H.scale.set(.036,.036,.036),H.position.set(0,10,-8),l.add(H);for(var O=(new THREE.TextureLoader).load(R),D=new THREE.Geometry,F=new THREE.PointsMaterial({size:1,transparent:!0,opacity:.8,map:O,blending:THREE.AdditiveBlending,sizeAttenuation:!0,depthTest:!1}),U=100,G=0;G<1500;G++){var k=new THREE.Vector3(Math.random()*U-50,Math.random()*U*1.5,Math.random()*U-50);k.velocityY=.1+Math.random()/3,k.velocityX=(Math.random()-.5)/3,D.vertices.push(k)}D.center(),(S=new THREE.Points(D,F)).position.y=-30,l.add(S),(t=new p.z(i,u.domElement)).target.set(0,0,0),t.enableDamping=!0,t.enablePan=!1,t.enableZoom=!1,t.minPolarAngle=1.4,t.maxPolarAngle=1.8,t.minAzimuthAngle=-.8,t.maxAzimuthAngle=.8,window.addEventListener("resize",L,!1)}(),function e(){requestAnimationFrame(e),u.render(l,i),t&&t.update(),h.w&&h.w.update(),H&&(H.rotation.y+=.01),S.geometry.vertices.forEach((function(e){e.y=e.y-e.velocityY,e.x=e.x-e.velocityX,e.y<=0&&(e.y=60),(e.x<=-20||e.x>=20)&&(e.velocityX=-1*e.velocityX)})),S.geometry.verticesNeedUpdate=!0;var r=b.getDelta();n&&n.update(r)}();var x=new THREE.Raycaster,I=new THREE.Vector2;window.addEventListener("click",(function(e){I.x=e.clientX/window.innerWidth*2-1,I.y=-e.clientY/window.innerHeight*2+1,x.setFromCamera(I,i);var t=x.intersectObjects(w);t.length>0&&console.log(t[0].object)}),!1)},s}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this.initThree()}},{key:"render",value:function(){return(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{id:"container"}),100===this.state.loadingProcess?"":(0,_.jsx)("div",{className:"olympic_loading",children:(0,_.jsxs)("div",{className:"box",children:[this.state.loadingProcess," %"]})})]})}}]),n}(c.Component)},7905:function(){THREE.GLTFLoader=function(){function e(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.dracoLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,t,n,r){var a,i=this;a=void 0!==this.resourcePath?this.resourcePath:void 0!==this.path?this.path:THREE.LoaderUtils.extractUrlBase(e),i.manager.itemStart(e);var s=function(t){r?r(t):console.error(t),i.manager.itemEnd(e),i.manager.itemError(e)},o=new THREE.FileLoader(i.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.load(e,(function(n){try{i.parse(n,a,(function(n){t(n),i.manager.itemEnd(e)}),s)}catch(r){s(r)}}),n,s)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},parse:function(e,t,o,l){var h,d={};if("string"===typeof e)h=e;else if(THREE.LoaderUtils.decodeText(new Uint8Array(e,0,4))===s){try{d[n.KHR_BINARY_GLTF]=new u(e)}catch(T){return void(l&&l(T))}h=d[n.KHR_BINARY_GLTF].content}else h=THREE.LoaderUtils.decodeText(new Uint8Array(e));var f=JSON.parse(h);if(void 0===f.asset||f.asset.version[0]<2)l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(f.extensionsUsed)for(var m=0;m<f.extensionsUsed.length;++m){var E=f.extensionsUsed[m],v=f.extensionsRequired||[];switch(E){case n.KHR_LIGHTS_PUNCTUAL:d[E]=new a(f);break;case n.KHR_MATERIALS_UNLIT:d[E]=new i(f);break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:d[E]=new p;break;case n.KHR_DRACO_MESH_COMPRESSION:d[E]=new c(f,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:d[n.MSFT_TEXTURE_DDS]=new r;break;default:v.indexOf(E)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+E+'".')}}var g=new k(f,d,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});g.parse((function(e,t,n,r,a){var i={scene:e,scenes:t,cameras:n,animations:r,asset:a.asset,parser:g,userData:{}};C(d,i,a),o(i)}),l)}}};var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(){if(!THREE.DDSLoader)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=new THREE.DDSLoader}function a(e){this.name=n.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[n.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function i(e){this.name=n.KHR_MATERIALS_UNLIT}a.prototype.loadLight=function(e){var t,n=this.lightDefs[e],r=new THREE.Color(16777215);void 0!==n.color&&r.fromArray(n.color);var a=void 0!==n.range?n.range:0;switch(n.type){case"directional":(t=new THREE.DirectionalLight(r)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new THREE.PointLight(r)).distance=a;break;case"spot":(t=new THREE.SpotLight(r)).distance=a,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,t.angle=n.spot.outerConeAngle,t.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return t.decay=2,void 0!==n.intensity&&(t.intensity=n.intensity),t.name=n.name||"light_"+e,Promise.resolve(t)},i.prototype.getMaterialType=function(e){return THREE.MeshBasicMaterial},i.prototype.extendParams=function(e,t,n){var r=[];e.color=new THREE.Color(1,1,1),e.opacity=1;var a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var i=a.baseColorFactor;e.color.fromArray(i),e.opacity=i[3]}void 0!==a.baseColorTexture&&r.push(n.assignTexture(e,"map",a.baseColorTexture.index))}return Promise.all(r)};var s="glTF",o=1313821514,l=5130562;function u(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,12);if(this.header={magic:THREE.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==s)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var r=new DataView(e,12),a=0;a<r.byteLength;){var i=r.getUint32(a,!0);a+=4;var u=r.getUint32(a,!0);if(a+=4,u===o){var c=new Uint8Array(e,12+a,i);this.content=THREE.LoaderUtils.decodeText(c)}else if(u===l){var p=12+a;this.body=e.slice(p,p+i)}a+=i}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function c(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function p(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return THREE.ShaderMaterial},extendParams:function(e,t,n){var r=t.extensions[this.name],a=THREE.ShaderLib.standard,i=THREE.UniformsUtils.clone(a.uniforms),s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),o=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),u=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),c=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),p=a.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",o).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",u).replace("#include <lights_physical_fragment>",c);delete i.roughness,delete i.metalness,delete i.roughnessMap,delete i.metalnessMap,i.specular={value:(new THREE.Color).setHex(1118481)},i.glossiness={value:.5},i.specularMap={value:null},i.glossinessMap={value:null},e.vertexShader=a.vertexShader,e.fragmentShader=p,e.uniforms=i,e.defines={STANDARD:""},e.color=new THREE.Color(1,1,1),e.opacity=1;var h=[];if(Array.isArray(r.diffuseFactor)){var d=r.diffuseFactor;e.color.fromArray(d),e.opacity=d[3]}if(void 0!==r.diffuseTexture&&h.push(n.assignTexture(e,"map",r.diffuseTexture.index)),e.emissive=new THREE.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new THREE.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var f=r.specularGlossinessTexture.index;h.push(n.assignTexture(e,"glossinessMap",f)),h.push(n.assignTexture(e,"specularMap",f))}return Promise.all(h)},createMaterial:function(e){var t=new THREE.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,r=0,a=n.length;r<a;r++)t[n[r]]=e[n[r]];return t},refreshUniforms:function(e,t,n,r,a,i){if(!0===a.isGLTFSpecularGlossinessMaterial){var s,o=a.uniforms,l=a.defines;o.opacity.value=a.opacity,o.diffuse.value.copy(a.color),o.emissive.value.copy(a.emissive).multiplyScalar(a.emissiveIntensity),o.map.value=a.map,o.specularMap.value=a.specularMap,o.alphaMap.value=a.alphaMap,o.lightMap.value=a.lightMap,o.lightMapIntensity.value=a.lightMapIntensity,o.aoMap.value=a.aoMap,o.aoMapIntensity.value=a.aoMapIntensity,a.map?s=a.map:a.specularMap?s=a.specularMap:a.displacementMap?s=a.displacementMap:a.normalMap?s=a.normalMap:a.bumpMap?s=a.bumpMap:a.glossinessMap?s=a.glossinessMap:a.alphaMap?s=a.alphaMap:a.emissiveMap&&(s=a.emissiveMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),o.uvTransform.value.copy(s.matrix)),o.envMap.value=a.envMap,o.envMapIntensity.value=a.envMapIntensity,o.flipEnvMap.value=a.envMap&&a.envMap.isCubeTexture?-1:1,o.refractionRatio.value=a.refractionRatio,o.specular.value.copy(a.specular),o.glossiness.value=a.glossiness,o.glossinessMap.value=a.glossinessMap,o.emissiveMap.value=a.emissiveMap,o.bumpMap.value=a.bumpMap,o.normalMap.value=a.normalMap,o.displacementMap.value=a.displacementMap,o.displacementScale.value=a.displacementScale,o.displacementBias.value=a.displacementBias,null!==o.glossinessMap.value&&void 0===l.USE_GLOSSINESSMAP&&(l.USE_GLOSSINESSMAP="",l.USE_ROUGHNESSMAP=""),null===o.glossinessMap.value&&void 0!==l.USE_GLOSSINESSMAP&&(delete l.USE_GLOSSINESSMAP,delete l.USE_ROUGHNESSMAP)}}}}function h(e,t,n,r){THREE.Interpolant.call(this,e,t,n,r)}c.prototype.decodePrimitive=function(e,t){var n=this.json,r=this.dracoLoader,a=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,s={},o={},l={};for(var u in i)u in w&&(s[w[u]]=i[u]);for(u in e.attributes)if(void 0!==w[u]&&void 0!==i[u]){var c=n.accessors[e.attributes[u]],p=R[c.componentType];l[w[u]]=p,o[w[u]]=!0===c.normalized}return t.getDependency("bufferView",a).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],a=o[n];void 0!==a&&(r.normalized=a)}t(e)}),s,l)}))}))},h.prototype=Object.create(THREE.Interpolant.prototype),h.prototype.constructor=h,h.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r*3+r,i=0;i!==r;i++)t[i]=n[a+i];return t},h.prototype.beforeStart_=h.prototype.copySampleValue_,h.prototype.afterEnd_=h.prototype.copySampleValue_,h.prototype.interpolate_=function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=2*s,l=3*s,u=r-t,c=(n-t)/u,p=c*c,h=p*c,d=e*l,f=d-l,m=2*h-3*p+1,E=h-2*p+c,v=-2*h+3*p,g=h-p,T=0;T!==s;T++){var R=i[f+T+s],y=i[f+T+o]*u,M=i[d+T+s],_=i[d+T]*u;a[T]=m*R+E*y+v*M+g*_}return a};var d=0,f=1,m=2,E=3,v=4,g=5,T=6,R=(THREE.Matrix3,THREE.Matrix4,THREE.Vector2,THREE.Vector3,THREE.Vector4,THREE.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),y={9728:THREE.NearestFilter,9729:THREE.LinearFilter,9984:THREE.NearestMipMapNearestFilter,9985:THREE.LinearMipMapNearestFilter,9986:THREE.NearestMipMapLinearFilter,9987:THREE.LinearMipMapLinearFilter},M={33071:THREE.ClampToEdgeWrapping,33648:THREE.MirroredRepeatWrapping,10497:THREE.RepeatWrapping},_=(THREE.BackSide,THREE.FrontSide,THREE.NeverDepth,THREE.LessDepth,THREE.EqualDepth,THREE.LessEqualDepth,THREE.GreaterEqualDepth,THREE.NotEqualDepth,THREE.GreaterEqualDepth,THREE.AlwaysDepth,THREE.AddEquation,THREE.SubtractEquation,THREE.ReverseSubtractEquation,THREE.ZeroFactor,THREE.OneFactor,THREE.SrcColorFactor,THREE.OneMinusSrcColorFactor,THREE.SrcAlphaFactor,THREE.OneMinusSrcAlphaFactor,THREE.DstAlphaFactor,THREE.OneMinusDstAlphaFactor,THREE.DstColorFactor,THREE.OneMinusDstColorFactor,THREE.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),w={POSITION:"position",NORMAL:"normal",TEXCOORD_0:"uv",TEXCOORD0:"uv",TEXCOORD:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",COLOR0:"color",COLOR:"color",WEIGHTS_0:"skinWeight",WEIGHT:"skinWeight",JOINTS_0:"skinIndex",JOINT:"skinIndex"},S={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},H={CUBICSPLINE:THREE.InterpolateSmooth,LINEAR:THREE.InterpolateLinear,STEP:THREE.InterpolateDiscrete},b="OPAQUE",A="MASK",L="BLEND",x={"image/png":THREE.RGBAFormat,"image/jpeg":THREE.RGBFormat};function I(e,t){return"string"!==typeof e||""===e?"":/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e}function C(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function P(e,t){void 0!==t.extras&&("object"===typeof t.extras?e.userData=t.extras:console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function O(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var a=t.extras.targetNames;if(e.morphTargetInfluences.length===a.length){e.morphTargetDictionary={};for(n=0,r=a.length;n<r;n++)e.morphTargetDictionary[a[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function D(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}function F(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function U(e,t){for(var n=0,r=e.length;n<r;n++){var a=e[n];if(i=a.primitive,s=t,i.indices===s.indices&&D(i.attributes,s.attributes))return a.promise}var i,s;return null}function G(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,n=e.itemSize,r=e.array.slice(0,t*n),a=0;a<t;++a)r[a]=e.getX(a),n>=2&&(r[a+1]=e.getY(a)),n>=3&&(r[a+2]=e.getZ(a)),n>=4&&(r[a+3]=e.getW(a));return new THREE.BufferAttribute(r,n,e.normalized)}return e.clone()}function k(e,n,r){this.json=e||{},this.extensions=n||{},this.options=r||{},this.cache=new t,this.primitiveCache=[],this.multiplePrimitivesCache=[],this.multiPassGeometryCache=[],this.textureLoader=new THREE.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new THREE.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function B(e,t,n){var r=t.attributes,a=[];function i(t,r){return n.getDependency("accessor",t).then((function(t){e.addAttribute(r,t)}))}for(var s in r){var o=w[s];o&&(o in e.attributes||a.push(i(r[s],o)))}if(void 0!==t.indices&&!e.index){var l=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));a.push(l)}return P(e,t),Promise.all(a).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,a=!1,i=0,s=t.length;i<s&&(void 0!==(u=t[i]).POSITION&&(r=!0),void 0!==u.NORMAL&&(a=!0),!r||!a);i++);if(!r&&!a)return Promise.resolve(e);var o=[],l=[];for(i=0,s=t.length;i<s;i++){var u=t[i];if(r){var c=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION).then((function(e){return G(e)})):e.attributes.position;o.push(c)}a&&(c=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL).then((function(e){return G(e)})):e.attributes.normal,l.push(c))}return Promise.all([Promise.all(o),Promise.all(l)]).then((function(n){for(var i=n[0],s=n[1],o=0,l=t.length;o<l;o++){var u=t[o],c="morphTarget"+o;if(r&&void 0!==u.POSITION){var p=i[o];p.name=c;for(var h=e.attributes.position,d=0,f=p.count;d<f;d++)p.setXYZ(d,p.getX(d)+h.getX(d),p.getY(d)+h.getY(d),p.getZ(d)+h.getZ(d))}if(a&&void 0!==u.NORMAL){var m=s[o];m.name=c;var E=e.attributes.normal;for(d=0,f=m.count;d<f;d++)m.setXYZ(d,m.getX(d)+E.getX(d),m.getY(d)+E.getY(d),m.getZ(d)+E.getZ(d))}}return r&&(e.morphAttributes.position=i),a&&(e.morphAttributes.normal=s),e}))}(e,t.targets,n):e}))}return k.prototype.parse=function(e,t){var n=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then((function(t){var r=t.scenes||[],a=r[n.scene||0],i=t.animations||[],s=t.cameras||[];e(a,r,s,i,n)})).catch(t)},k.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r={},a={},i=0,s=t.length;i<s;i++)for(var o=t[i].joints,l=0,u=o.length;l<u;l++)e[o[l]].isBone=!0;for(var c=0,p=e.length;c<p;c++){var h=e[c];void 0!==h.mesh&&(void 0===r[h.mesh]&&(r[h.mesh]=a[h.mesh]=0),r[h.mesh]++,void 0!==h.skin&&(n[h.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=a},k.prototype.getDependency=function(e,t){var r=e+":"+t,a=this.cache.get(r);if(!a){switch(e){case"scene":a=this.loadScene(t);break;case"node":a=this.loadNode(t);break;case"mesh":a=this.loadMesh(t);break;case"accessor":a=this.loadAccessor(t);break;case"bufferView":a=this.loadBufferView(t);break;case"buffer":a=this.loadBuffer(t);break;case"material":a=this.loadMaterial(t);break;case"texture":a=this.loadTexture(t);break;case"skin":a=this.loadSkin(t);break;case"animation":a=this.loadAnimation(t);break;case"camera":a=this.loadCamera(t);break;case"light":a=this.extensions[n.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,a)}return a},k.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t},k.prototype.getMultiDependencies=function(e){for(var t={},n=[],r=0,a=e.length;r<a;r++){var i=e[r],s=this.getDependencies(i);s=s.then(function(e,n){t[e]=n}.bind(this,i+("mesh"===i?"es":"s"))),n.push(s)}return Promise.all(n).then((function(){return t}))},k.prototype.loadBuffer=function(e){var t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var a=this.options;return new Promise((function(e,n){r.load(I(t.uri,a.path),e,void 0,(function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},k.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))},k.prototype.loadAccessor=function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return null;var a=[];return void 0!==r.bufferView?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),void 0!==r.sparse&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then((function(e){var a,i,s=e[0],o=_[r.type],l=R[r.componentType],u=l.BYTES_PER_ELEMENT,c=u*o,p=r.byteOffset||0,h=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;if(h&&h!==c){var f="InterleavedBuffer:"+r.bufferView+":"+r.componentType,m=t.cache.get(f);m||(a=new l(s),m=new THREE.InterleavedBuffer(a,h/u),t.cache.add(f,m)),i=new THREE.InterleavedBufferAttribute(m,o,p/u,d)}else a=null===s?new l(r.count*o):new l(s,p,r.count*o),i=new THREE.BufferAttribute(a,o,d);if(void 0!==r.sparse){var E=_.SCALAR,v=R[r.sparse.indices.componentType],g=r.sparse.indices.byteOffset||0,T=r.sparse.values.byteOffset||0,y=new v(e[1],g,r.sparse.count*E),M=new l(e[2],T,r.sparse.count*o);null!==s&&i.setArray(i.array.slice());for(var w=0,S=y.length;w<S;w++){var H=y[w];if(i.setX(H,M[w*o]),o>=2&&i.setY(H,M[w*o+1]),o>=3&&i.setZ(H,M[w*o+2]),o>=4&&i.setW(H,M[w*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return i}))},k.prototype.loadTexture=function(e){var t,r=this,a=this.json,i=this.options,s=this.textureLoader,o=window.URL||window.webkitURL,l=a.textures[e],u=l.extensions||{},c=(t=u[n.MSFT_TEXTURE_DDS]?a.images[u[n.MSFT_TEXTURE_DDS].source]:a.images[l.source]).uri,p=!1;return void 0!==t.bufferView&&(c=r.getDependency("bufferView",t.bufferView).then((function(e){p=!0;var n=new Blob([e],{type:t.mimeType});return c=o.createObjectURL(n)}))),Promise.resolve(c).then((function(e){var t=THREE.Loader.Handlers.get(e);return t||(t=u[n.MSFT_TEXTURE_DDS]?r.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:s),new Promise((function(n,r){t.load(I(e,i.path),n,void 0,r)}))})).then((function(e){!0===p&&o.revokeObjectURL(c),e.flipY=!1,void 0!==l.name&&(e.name=l.name),t.mimeType in x&&(e.format=x[t.mimeType]);var n=(a.samplers||{})[l.sampler]||{};return e.magFilter=y[n.magFilter]||THREE.LinearFilter,e.minFilter=y[n.minFilter]||THREE.LinearMipMapLinearFilter,e.wrapS=M[n.wrapS]||THREE.RepeatWrapping,e.wrapT=M[n.wrapT]||THREE.RepeatWrapping,e}))},k.prototype.assignTexture=function(e,t,n){return this.getDependency("texture",n).then((function(n){e[t]=n}))},k.prototype.loadMaterial=function(e){var t,r=this,a=this.json,i=this.extensions,s=a.materials[e],o={},l=s.extensions||{},u=[];if(l[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var c=i[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=c.getMaterialType(s),u.push(c.extendParams(o,s,r))}else if(l[n.KHR_MATERIALS_UNLIT]){var p=i[n.KHR_MATERIALS_UNLIT];t=p.getMaterialType(s),u.push(p.extendParams(o,s,r))}else{t=THREE.MeshStandardMaterial;var h=s.pbrMetallicRoughness||{};if(o.color=new THREE.Color(1,1,1),o.opacity=1,Array.isArray(h.baseColorFactor)){var d=h.baseColorFactor;o.color.fromArray(d),o.opacity=d[3]}if(void 0!==h.baseColorTexture&&u.push(r.assignTexture(o,"map",h.baseColorTexture.index)),o.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,o.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture){var f=h.metallicRoughnessTexture.index;u.push(r.assignTexture(o,"metalnessMap",f)),u.push(r.assignTexture(o,"roughnessMap",f))}}!0===s.doubleSided&&(o.side=THREE.DoubleSide);var m=s.alphaMode||b;return m===L?o.transparent=!0:(o.transparent=!1,m===A&&(o.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&t!==THREE.MeshBasicMaterial&&(u.push(r.assignTexture(o,"normalMap",s.normalTexture.index)),o.normalScale=new THREE.Vector2(1,1),void 0!==s.normalTexture.scale&&o.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&t!==THREE.MeshBasicMaterial&&(u.push(r.assignTexture(o,"aoMap",s.occlusionTexture.index)),void 0!==s.occlusionTexture.strength&&(o.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&t!==THREE.MeshBasicMaterial&&(o.emissive=(new THREE.Color).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&t!==THREE.MeshBasicMaterial&&u.push(r.assignTexture(o,"emissiveMap",s.emissiveTexture.index)),Promise.all(u).then((function(){var e;return e=t===THREE.ShaderMaterial?i[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new t(o),void 0!==s.name&&(e.name=s.name),e.normalScale&&(e.normalScale.y=-e.normalScale.y),e.map&&(e.map.encoding=THREE.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=THREE.sRGBEncoding),e.specularMap&&(e.specularMap.encoding=THREE.sRGBEncoding),P(e,s),s.extensions&&C(i,e,s),e}))},k.prototype.loadGeometries=function(e){var t,r=this,a=this.extensions,i=this.primitiveCache,s=function(e){if(e.length<2)return!1;var t=e[0],n=t.targets||[];if(void 0===t.indices)return!1;for(var r=1,a=e.length;r<a;r++){var i=e[r];if(t.mode!==i.mode)return!1;if(void 0===i.indices)return!1;if(!D(t.attributes,i.attributes))return!1;var s=i.targets||[];if(n.length!==s.length)return!1;for(var o=0,l=n.length;o<l;o++)if(!D(n[o],s[o]))return!1}return!0}(e);s&&(t=e,e=[e[0]]);for(var o=[],l=0,u=e.length;l<u;l++){var c,p=e[l],h=U(i,p);if(h)o.push(h);else c=p.extensions&&p.extensions[n.KHR_DRACO_MESH_COMPRESSION]?a[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(p,r).then((function(e){return B(e,p,r)})):B(new THREE.BufferGeometry,p,r),i.push({primitive:p,promise:c}),o.push(c)}return Promise.all(o).then((function(n){if(s){var a=n[0],i=function(e,t,n){for(var r=0,a=e.length;r<a;r++){var i=e[r];if(t===i.baseGeometry&&F(n,i.primitives))return i.geometry}return null}(h=r.multiPassGeometryCache,a,t);if(null!==i)return[i.geometry];var o=new THREE.BufferGeometry;for(var l in o.name=a.name,o.userData=a.userData,a.attributes)o.addAttribute(l,a.attributes[l]);for(var l in a.morphAttributes)o.morphAttributes[l]=a.morphAttributes[l];for(var u=[],c=0,p=t.length;c<p;c++)u.push(r.getDependency("accessor",t[c].indices));return Promise.all(u).then((function(e){for(var n=[],r=0,i=0,s=t.length;i<s;i++){for(var l=e[i],u=0,c=l.count;u<c;u++)n.push(l.array[u]);o.addGroup(r,l.count,i),r+=l.count}return o.setIndex(n),h.push({geometry:o,baseGeometry:a,primitives:t}),[o]}))}if(n.length>1&&void 0!==THREE.BufferGeometryUtils){for(c=1,p=e.length;c<p;c++)if(e[0].mode!==e[c].mode)return n;var h;i=function(e,t){for(var n=0,r=e.length;n<r;n++){var a=e[n];if(F(t,a.baseGeometries))return a.geometry}return null}(h=r.multiplePrimitivesCache,n);if(i){if(null!==i.geometry)return[i.geometry]}else{o=THREE.BufferGeometryUtils.mergeBufferGeometries(n,!0);if(h.push({geometry:o,baseGeometries:n}),null!==o)return[o]}}return n}))},k.prototype.loadMesh=function(e){for(var t=this,r=this.json,a=this.extensions,i=r.meshes[e],s=i.primitives,o=[],l=0,u=s.length;l<u;l++){var c=void 0===s[l].material?new THREE.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:THREE.FrontSide}):this.getDependency("material",s[l].material);o.push(c)}return Promise.all(o).then((function(r){return t.loadGeometries(s).then((function(o){for(var l=1===o.length&&o[0].groups.length>0,u=[],c=0,p=o.length;c<p;c++){var h,R=o[c],y=s[c],M=l?r:r[c];if(y.mode===v||y.mode===g||y.mode===T||void 0===y.mode)h=!0===i.isSkinnedMesh?new THREE.SkinnedMesh(R,M):new THREE.Mesh(R,M),y.mode===g?h.drawMode=THREE.TriangleStripDrawMode:y.mode===T&&(h.drawMode=THREE.TriangleFanDrawMode);else if(y.mode===f)h=new THREE.LineSegments(R,M);else if(y.mode===E)h=new THREE.Line(R,M);else if(y.mode===m)h=new THREE.LineLoop(R,M);else{if(y.mode!==d)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);h=new THREE.Points(R,M)}Object.keys(h.geometry.morphAttributes).length>0&&O(h,i),h.name=i.name||"mesh_"+e,o.length>1&&(h.name+="_"+c),P(h,i),u.push(h);for(var _=l?h.material:[h.material],w=void 0!==R.attributes.color,S=void 0===R.attributes.normal,H=!0===h.isSkinnedMesh,b=Object.keys(R.morphAttributes).length>0,A=b&&void 0!==R.morphAttributes.normal,L=0,x=_.length;L<x;L++){M=_[L];if(h.isPoints){var I="PointsMaterial:"+M.uuid,C=t.cache.get(I);C||(C=new THREE.PointsMaterial,THREE.Material.prototype.copy.call(C,M),C.color.copy(M.color),C.map=M.map,C.lights=!1,t.cache.add(I,C)),M=C}else if(h.isLine){I="LineBasicMaterial:"+M.uuid;var D=t.cache.get(I);D||(D=new THREE.LineBasicMaterial,THREE.Material.prototype.copy.call(D,M),D.color.copy(M.color),D.lights=!1,t.cache.add(I,D)),M=D}if(w||S||H||b){I="ClonedMaterial:"+M.uuid+":";M.isGLTFSpecularGlossinessMaterial&&(I+="specular-glossiness:"),H&&(I+="skinning:"),w&&(I+="vertex-colors:"),S&&(I+="flat-shading:"),b&&(I+="morph-targets:"),A&&(I+="morph-normals:");var F=t.cache.get(I);F||(F=M.isGLTFSpecularGlossinessMaterial?a[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(M):M.clone(),H&&(F.skinning=!0),w&&(F.vertexColors=THREE.VertexColors),S&&(F.flatShading=!0),b&&(F.morphTargets=!0),A&&(F.morphNormals=!0),t.cache.add(I,F)),M=F}_[L]=M,M.aoMap&&void 0===R.attributes.uv2&&void 0!==R.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),R.addAttribute("uv2",new THREE.BufferAttribute(R.attributes.uv.array,2))),M.isGLTFSpecularGlossinessMaterial&&(h.onBeforeRender=a[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)}h.material=l?_:_[0]}if(1===u.length)return u[0];var U=new THREE.Group;for(c=0,p=u.length;c<p;c++)U.add(u[c]);return U}))}))},k.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new THREE.PerspectiveCamera(THREE.Math.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new THREE.OrthographicCamera(r.xmag/-2,r.xmag/2,r.ymag/2,r.ymag/-2,r.znear,r.zfar)),void 0!==n.name&&(t.name=n.name),P(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},k.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))},k.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],n=[],r=[],a=[],i=[],s=[],o=0,l=t.channels.length;o<l;o++){var u=t.channels[o],c=t.samplers[u.sampler],p=u.target,d=void 0!==p.node?p.node:p.id,f=void 0!==t.parameters?t.parameters[c.input]:c.input,m=void 0!==t.parameters?t.parameters[c.output]:c.output;n.push(this.getDependency("node",d)),r.push(this.getDependency("accessor",f)),a.push(this.getDependency("accessor",m)),i.push(c),s.push(p)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(a),Promise.all(i),Promise.all(s)]).then((function(n){for(var r=n[0],a=n[1],i=n[2],s=n[3],o=n[4],l=[],u=0,c=r.length;u<c;u++){var p=r[u],d=a[u],f=i[u],m=s[u],E=o[u];if(void 0!==p){var v;switch(p.updateMatrix(),p.matrixAutoUpdate=!0,S[E.path]){case S.weights:v=THREE.NumberKeyframeTrack;break;case S.rotation:v=THREE.QuaternionKeyframeTrack;break;default:v=THREE.VectorKeyframeTrack}var g=p.name?p.name:p.uuid,T=void 0!==m.interpolation?H[m.interpolation]:THREE.InterpolateLinear,R=[];S[E.path]===S.weights?p.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&R.push(e.name?e.name:e.uuid)})):R.push(g);for(var y=0,M=R.length;y<M;y++){var _=new v(R[y]+"."+S[E.path],THREE.AnimationUtils.arraySlice(d.array,0),THREE.AnimationUtils.arraySlice(f.array,0),T);"CUBICSPLINE"===m.interpolation&&(_.createInterpolant=function(e){return new h(this.times,this.values,this.getValueSize()/3,e)},_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(_)}}}var w=void 0!==t.name?t.name:"animation_"+e;return new THREE.AnimationClip(w,void 0,l)}))},k.prototype.loadNode=function(e){var t=this.json,r=this.extensions,a=this,i=t.meshReferences,s=t.meshUses,o=t.nodes[e];return new Promise((function(e){!0===o.isBone?e(new THREE.Bone):void 0!==o.mesh?a.getDependency("mesh",o.mesh).then((function(t){var n;if(i[o.mesh]>1){var r=s[o.mesh]++;(n=t.clone()).name+="_instance_"+r,n.onBeforeRender=t.onBeforeRender;for(var a=0,l=n.children.length;a<l;a++)n.children[a].name+="_instance_"+r,n.children[a].onBeforeRender=t.children[a].onBeforeRender}else n=t;e(n)})):void 0!==o.camera?a.getDependency("camera",o.camera).then(e):o.extensions&&o.extensions[n.KHR_LIGHTS_PUNCTUAL]&&void 0!==o.extensions[n.KHR_LIGHTS_PUNCTUAL].light?a.getDependency("light",o.extensions[n.KHR_LIGHTS_PUNCTUAL].light).then(e):e(new THREE.Object3D)})).then((function(e){if(void 0!==o.name&&(e.name=THREE.PropertyBinding.sanitizeNodeName(o.name)),P(e,o),o.extensions&&C(r,e,o),void 0!==o.matrix){var t=new THREE.Matrix4;t.fromArray(o.matrix),e.applyMatrix(t)}else void 0!==o.translation&&e.position.fromArray(o.translation),void 0!==o.rotation&&e.quaternion.fromArray(o.rotation),void 0!==o.scale&&e.scale.fromArray(o.scale);return e}))},k.prototype.loadScene=function(){function e(t,n,r,a){var i=r.nodes[t];return a.getDependency("node",t).then((function(e){return void 0===i.skin?e:a.getDependency("skin",i.skin).then((function(e){for(var n=[],r=0,i=(t=e).joints.length;r<i;r++)n.push(a.getDependency("node",t.joints[r]));return Promise.all(n)})).then((function(n){for(var r=!0===e.isGroup?e.children:[e],a=0,i=r.length;a<i;a++){for(var s=r[a],o=[],l=[],u=0,c=n.length;u<c;u++){var p=n[u];if(p){o.push(p);var h=new THREE.Matrix4;void 0!==t.inverseBindMatrices&&h.fromArray(t.inverseBindMatrices.array,16*u),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}s.bind(new THREE.Skeleton(o,l),s.matrixWorld)}return e}));var t})).then((function(t){n.add(t);var s=[];if(i.children)for(var o=i.children,l=0,u=o.length;l<u;l++){var c=o[l];s.push(e(c,t,r,a))}return Promise.all(s)}))}return function(t){var n=this.json,r=this.extensions,a=this.json.scenes[t],i=new THREE.Scene;void 0!==a.name&&(i.name=a.name),P(i,a),a.extensions&&C(r,i,a);for(var s=a.nodes||[],o=[],l=0,u=s.length;l<u;l++)o.push(e(s[l],i,n,this));return Promise.all(o).then((function(){return i}))}}(),e}()},3956:function(e,t,n){"use strict";e.exports=n.p+"static/media/bingdwendwen.bd7d37ead8bb47ccaa79.glb"},5680:function(e,t,n){"use strict";e.exports=n.p+"static/media/flag.73c81d66494359ddbc6e.glb"},5042:function(e,t,n){"use strict";e.exports=n.p+"static/media/land.7188100a8dbff49b41bc.glb"},7196:function(e,t,n){"use strict";e.exports=n.p+"static/media/tree.f250bceb208161a8fcef.gltf"},6806:function(e,t,n){"use strict";e.exports=n.p+"static/media/xuerongrong.2de949bd2eb58f3f9516.glb"},8710:function(e,t,n){"use strict";e.exports=n.p+"static/media/flag.a12d1476c6ee8e21517a.png"},8082:function(e,t,n){"use strict";e.exports=n.p+"static/media/sky.f8b8ce554883ed304721.jpg"},5947:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAAASFBMVEX////////////////////////////////////////////////////////////////////////////////////////////////OfZ3oAAAAGHRSTlMCCSZLGRQOazsw6bzWzbOimZGBc17eiVLsmOFWAAAAk0lEQVQY04WRWQ7DIAxEGxtiwOyQ5P43rVWhVm1kdT6fR+Pt8UfbS79wt9YYa/ftGxoA7wGMFD7UgHcoch7Mmwt1OGkMmuiEL7MFd1FvtbZOlwO7LbNHOktmzuUk9GJf5tkLpxgTlz6XXTBSy+kI4Ui5ES4sGaNyDKLIdUiKgrUQpaUyoL7OfXnlVOph72/Qn6brCeCNCf0cc6BdAAAAAElFTkSuQmCC"},1175:function(e,t,n){"use strict";e.exports=n.p+"static/media/tree.5b95f66c07d500d76b55.png"},6892:function(e,t,n){"use strict";n.d(t,{w:function(){return i}});var r=function(){this._tweens={},this._tweensAddedDuringUpdate={}};r.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(e=void 0!==e?e:i.now();0<n.length;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var a=this._tweens[n[r]];a&&!1===a.update(e)&&(a._isPlaying=!1,t||delete this._tweens[n[r]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var a,i=new r;i.Group=r,i._nextId=0,i.nextId=function(){return i._nextId++},"undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?i.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?i.now=self.performance.now.bind(self.performance):void 0!==Date.now?i.now=Date.now:i.now=function(){return(new Date).getTime()},i.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=i.Easing.Linear.None,this._interpolationFunction=i.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||i,this._id=i.nextId()},i.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},duration:function(e){return this._duration=e,this},start:function(e){for(var t in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"==typeof e?i.now()+parseFloat(e):e:i.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array==0&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},group:function(e){return this._group=e,this},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,n,r;if(e<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=0===this._duration||1<n?1:n,r=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[t]){var a=this._valuesStart[t]||0,i=this._valuesEnd[t];i instanceof Array?this._object[t]=this._interpolationFunction(i,r):("string"==typeof i&&(i="+"===i.charAt(0)||"-"===i.charAt(0)?a+parseFloat(i):parseFloat(i)),"number"==typeof i&&(this._object[t]=a+(i-a)*r))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1!==n)return!0;if(0<this._repeat){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var s=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=s}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var o=0,l=this._chainedTweens.length;o<l;o++)this._chainedTweens[o].start(this._startTime+this._duration);return!1}},i.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)}},Bounce:{In:function(e){return 1-i.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*i.Easing.Bounce.In(2*e):.5*i.Easing.Bounce.Out(2*e-1)+.5}}},i.Interpolation={Linear:function(e,t){var n=e.length-1,r=n*t,a=Math.floor(r),s=i.Interpolation.Utils.Linear;return t<0?s(e[0],e[1],r):1<t?s(e[n],e[n-1],n-r):s(e[a],e[n<a+1?n:a+1],r-a)},Bezier:function(e,t){for(var n=0,r=e.length-1,a=Math.pow,s=i.Interpolation.Utils.Bernstein,o=0;o<=r;o++)n+=a(1-t,r-o)*a(t,o)*e[o]*s(r,o);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,a=Math.floor(r),s=i.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(a=Math.floor(r=n*(1+t))),s(e[(a-1+n)%n],e[a],e[(a+1)%n],e[(a+2)%n],r-a)):t<0?e[0]-(s(e[0],e[0],e[1],e[1],-r)-e[0]):1<t?e[n]-(s(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):s(e[a?a-1:0],e[a],e[n<a+1?n:a+1],e[n<a+2?n:a+2],r-a)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=i.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var r=t;1<r;r--)n*=r;return e[t]=n}}(),CatmullRom:function(e,t,n,r,a){var i=.5*(n-e),s=.5*(r-t),o=a*a;return(2*t-2*n+i+s)*(a*o)+(-3*t+3*n-2*i-s)*o+i*a+t}}},a=void 0,"function"==typeof define&&define.amd?define([],(function(){return i})):"undefined"!=typeof module&&"object"==typeof exports?module.exports=i:void 0!==a&&(a.TWEEN=i)}}]);