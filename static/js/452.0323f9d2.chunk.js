"use strict";(self.webpackChunk_3d_examples=self.webpackChunk_3d_examples||[]).push([[452],{5452:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var a=n(5671),i=n(3144),s=n(136),o=n(4062),r=n(7313),d=n(3562),h=n(2518),l=n(8847),c=n(6417),p=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.call(this)).state={loadingProcess:0,sceneReady:!1},e.initThree=function(){function e(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function t(e,t,n){if(e!==t)throw new TypeError("Private static access of wrong provenance");return n.get?n.get.call(e):n.value}function n(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function s(e,t,n){var a=t.get(e);if(!a)throw new TypeError("attempted to set private field on non-instance");if(a.set)a.set.call(e,n);else{if(!a.writable)throw new TypeError("attempted to set read only private field");a.value=n}return n}console.clear();var o=new WeakMap,r=new WeakMap,c=new WeakMap,p=new WeakMap,u=new WeakMap,w=new WeakMap,m=new WeakMap,v=new WeakMap,g=new WeakSet,f=new WeakSet,b=new WeakSet,y=new WeakSet,M=new WeakSet,k=new WeakMap,x=new WeakMap,S=new WeakMap,W=(0,i.Z)((function i(){var h=this;(0,a.Z)(this,i),M.add(this),y.add(this),b.add(this),f.add(this),g.add(this),o.set(this,{writable:!0,value:void 0}),r.set(this,{writable:!0,value:void 0}),c.set(this,{writable:!0,value:[]}),p.set(this,{writable:!0,value:!1}),u.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),v.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:function(e,t,a){e.position.copy(e.body.position),e.quaternion.copy(e.body.quaternion);var i=e.body.position.y<6&&e.body.position.y>-1?.2:0;e.body.angularDamping=i,e.body.linearDamping=i;var s=1+e.position.y/50;e.material.opacity=s,s<=0&&(e.material.dispose(),e.geometry.dispose(),n(h,v).removeBody(e.body),n(h,w).remove(e),n(h,u).renderLists.dispose(),a.splice(t,1))}}),x.set(this,{writable:!0,value:function(e){var a=e.contact.getImpactVelocityAlongNormal();a<t(i,i,E)||(n(h,o).lookAt(new d.Pa4(a/400,a/300,a/200)),setTimeout((function(){return n(h,o).lookAt(t(i,i,j))}),a))}}),S.set(this,{writable:!0,value:function(){var a=1/t(i,i,P),s=window,r=s.innerHeight,d=s.innerWidth;n(h,u).setSize(d,r),n(h,o).aspect=d/r,n(h,o).updateProjectionMatrix(),n(h,v).step(a),n(h,c).forEach(n(h,k)),n(h,p)&&e(h,g,D).call(h),document.querySelector("#count h2").innerHTML=n(h,c).length.toString().padStart(3,"0"),n(h,u).render(n(h,w),n(h,o))}}),s(this,w,new d.xsS),n(this,w).fog=new d.ybr(0,-10,1024),s(this,v,new l.World),n(this,v).gravity.set(0,-30,0),n(this,v).broadphase=new l.NaiveBroadphase,n(this,v).defaultContactMaterial.restitution=.65,s(this,o,new d.cPb(30,window.innerWidth/window.innerHeight,.5,1e4)),n(this,o).position.set(0,300,-225),n(this,o).lookAt(t(i,i,j)),n(this,w).add(n(this,o)),e(this,y,B).call(this),e(this,M,C).call(this),e(this,b,A).call(this),s(this,u,new d.CP7({antialias:!0,canvas:document.querySelector(".webgl")})),n(this,u).setSize(window.innerWidth,window.innerHeight),n(this,u).shadowMap.enabled=!0,document.body.appendChild(n(this,u).domElement);var W=function(e,t){t.preventDefault(),t.stopPropagation(),s(h,p,e)};document.body.addEventListener("mousedown",W.bind(this,!0)),document.body.addEventListener("mouseup",W.bind(this,!1)),document.body.addEventListener("touchstart",W.bind(this,!0)),document.body.addEventListener("touchend",W.bind(this,!1)),window.addEventListener("selectstart",(function(e){return e.preventDefault(),!1})),e(this,f,T).call(this),n(this,u).setAnimationLoop(n(this,S))})),j={writable:!0,value:new d.Pa4(0,0,0)},E={writable:!0,value:5},P={writable:!0,value:15},D=function(){Date.now()-n(this,m)<10||e(this,b,A).call(this)},T=function(){s(this,r,new h.z(n(this,o),n(this,u).domElement)),n(this,r).enablePan=!1,n(this,r).minDistance=0,n(this,r).maxDistance=1500,n(this,r).rotateSpeed=.5,n(this,r).keyPanSpeed=140,n(this,r).listenToKeyEvents(window)},A=function(){var e=Math.round(Math.random())?1:-1,t=n(this,c).length>0,a=t?Math.floor(25*Math.random())*e:0,i=t?Math.floor(25*Math.random())*e:0,o=new d.dpR,r=(new d.xo$(5,32,16),new d.Kj0(new d.xo$(5,32,16),new d.Wid({bumpMap:o.load("https://assets.codepen.io/829639/TennisBallBump.jpeg"),bumpScale:.25,color:16777215,map:o.load("https://assets.codepen.io/829639/TennisBallColorMap.jpeg"),metalness:0,opacity:1,roughness:1,transparent:!0}))),h=new l.Sphere(5),p=new l.Body({friction:30,mass:1});p.addShape(h),p.position.set(a,100,i),p.quaternion.setFromAxisAngle(new l.Vec3(1,1,1),Math.floor(Math.random()*Math.PI)),p.addEventListener("collide",n(this,x)),n(this,v).add(p),r.castShadow=!0,r.position.set(a,100,i),r.body=p,n(this,c).push(r),n(this,w).add(r),s(this,m,Date.now())},B=function(){var e=new d.Mig(16777215,.5);n(this,w).add(e);var t=new d.Ox3(16777215,.9),a=200;t.position.set(a,a,0),t.castShadow=!0,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024,t.shadow.camera.left=-a,t.shadow.camera.right=a,t.shadow.camera.top=a,t.shadow.camera.bottom=-a,t.shadow.camera.far=600,t.shadow.camera.near=a,t.shadow.darkness=.5,n(this,w).add(t)},C=function(){var e=100,t=new d.dpR,a=new d.DvJ(e,2,e),i=new d.Wid({color:16777215,bumpMap:t.load("https://assets.codepen.io/829639/tennis-court-bumpmap.png"),map:t.load("https://assets.codepen.io/829639/tennis-court-texture.jpeg"),metalness:.3,roughMap:t.load("https://assets.codepen.io/829639/tennis-court-roughmap.png"),roughness:1,side:d.ehD}),s=new d.Kj0(a,i),o=new l.Box(new l.Vec3(50,1,50)),r=new l.Body({linearDamping:1,mass:0});r.position=new l.Vec3(0,0,0),r.quaternion.setFromAxisAngle(new l.Vec3(0,1,0),Math.PI/2),r.addShape(o),n(this,v).add(r),s.receiveShadow=!0,s.body=r,n(this,w).add(s);var h=new d.Wid({color:16777215,metalness:.2,opacity:.8,roughMap:t.load("https://assets.codepen.io/829639/tennis-court-roughmap.png"),roughness:1,transparent:1}),c=new d.DvJ(5,.1,e),p=new d.Kj0(c,h);p.receiveShadow=!0,p.position.set(0,1,0),n(this,w).add(p)};new W},e.mixers=[],e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.initThree()}},{key:"componentWillUnmount",value:function(){this.setState=function(){}}},{key:"render",value:function(){return(0,c.jsxs)("div",{className:"tennis",children:[(0,c.jsx)("h1",{id:"",children:"Generating and disposing of objects"}),(0,c.jsxs)("div",{id:"count",children:[(0,c.jsx)("h2",{}),"Balls"]}),(0,c.jsx)("div",{id:"instructions",children:"Click / touch + hold to drop more balls."}),(0,c.jsx)("canvas",{className:"webgl"}),100===this.state.loadingProcess?"":(0,c.jsx)("div",{className:"loading",children:(0,c.jsxs)("span",{className:"progress",children:[this.state.loadingProcess," %"]})}),(0,c.jsxs)("a",{className:"github",href:"https://github.com/dragonir/3d",target:"_blank",rel:"noreferrer",children:[(0,c.jsx)("svg",{height:"36","aria-hidden":"true",viewBox:"0 0 16 16",version:"1.1",width:"36","data-view-component":"true",children:(0,c.jsx)("path",{fill:"#FFFFFF",fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),(0,c.jsx)("span",{className:"author",children:"@dragonir"})]})]})}}]),n}(r.Component)}}]);