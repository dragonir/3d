/*! For license information please see 232.a0890641.chunk.js.LICENSE.txt */
(self.webpackChunk_3d_examples=self.webpackChunk_3d_examples||[]).push([[232],{7228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},2858:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3646:function(e,t,n){var r=n(7228);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},1506:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},4575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9100:function(e,t,n){var r=n(9489),i=n(7067);function o(t,n,a){return i()?(e.exports=o=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=o=function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o},e.exports.__esModule=!0,e.exports.default=e.exports),o.apply(null,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},3913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},3269:function(e,t,n){var r=n(379);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}},e.exports.__esModule=!0,e.exports.default=e.exports},9842:function(e,t,n){var r=n(9754),i=n(7067),o=n(8585);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var a=r(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},6525:function(e,t,n){var r=n(8331);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},9754:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2205:function(e,t,n){var r=n(9489);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},7067:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},6860:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},3884:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8206:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8585:function(e,t,n){var r=n(8).default,i=n(1506);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9489:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3038:function(e,t,n){var r=n(2858),i=n(3884),o=n(379),a=n(521);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},8331:function(e,t,n){var r=n(9754);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},319:function(e,t,n){var r=n(3646),i=n(6860),o=n(379),a=n(8206);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},379:function(e,t,n){var r=n(7228);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},5467:function(e,t,n){e.exports=n(8251)},4324:function(e){"use strict";var t=!("undefined"===typeof window||!window.document||!window.document.createElement),n={canUseDOM:t,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};e.exports=n},7009:function(e){var t,n,r,i,o,a,s,l,u,c,p,d,h,v,f,m=!1;function b(){if(!m){m=!0;var e=navigator.userAgent,b=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),_=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(d=/\b(iPhone|iP[ao]d)/.exec(e),h=/\b(iP[ao]d)/.exec(e),c=/Android/i.exec(e),v=/FBAN\/\w+;/i.exec(e),f=/Mobile/i.exec(e),p=!!/Win64/.exec(e),b){(t=b[1]?parseFloat(b[1]):b[5]?parseFloat(b[5]):NaN)&&document&&document.documentMode&&(t=document.documentMode);var g=/(?:Trident\/(\d+.\d+))/.exec(e);a=g?parseFloat(g[1])+4:t,n=b[2]?parseFloat(b[2]):NaN,r=b[3]?parseFloat(b[3]):NaN,(i=b[4]?parseFloat(b[4]):NaN)?(b=/(?:Chrome\/(\d+\.\d+))/.exec(e),o=b&&b[1]?parseFloat(b[1]):NaN):o=NaN}else t=n=r=o=i=NaN;if(_){if(_[1]){var w=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);s=!w||parseFloat(w[1].replace("_","."))}else s=!1;l=!!_[2],u=!!_[3]}else s=l=u=!1}}var _={ie:function(){return b()||t},ieCompatibilityMode:function(){return b()||a>t},ie64:function(){return _.ie()&&p},firefox:function(){return b()||n},opera:function(){return b()||r},webkit:function(){return b()||i},safari:function(){return _.webkit()},chrome:function(){return b()||o},windows:function(){return b()||l},osx:function(){return b()||s},linux:function(){return b()||u},iphone:function(){return b()||d},mobile:function(){return b()||d||h||c||f},nativeApp:function(){return b()||v},android:function(){return b()||c},ipad:function(){return b()||h}};e.exports=_},6024:function(e,t,n){"use strict";var r,i=n(4324);i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=function(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,o=n in document;if(!o){var a=document.createElement("div");a.setAttribute(n,"return;"),o="function"===typeof a[n]}return!o&&r&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}},8251:function(e,t,n){"use strict";var r=n(7009),i=n(6024);function o(e){var t=0,n=0,r=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=10*t,i=10*n,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||i)&&e.deltaMode&&(1==e.deltaMode?(r*=40,i*=40):(r*=800,i*=800)),r&&!t&&(t=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:i}}o.getEventType=function(){return r.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},e.exports=o},1001:function(e){e.exports=function(){var e=function e(){function t(e){return i.appendChild(e.dom),e}function n(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";r=e}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(e){e.preventDefault(),n(++r%i.children.length)}),!1);var o=(performance||Date).now(),a=o,s=0,l=t(new e.Panel("FPS","#0ff","#002")),u=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:t,showPanel:n,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(u.update(e-o,200),e>a+1e3&&(l.update(1e3*s/(e-a),100),a=e,s=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:i,setMode:n}};return e.Panel=function(e,t,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,u=3*a,c=2*a,p=3*a,d=15*a,h=74*a,v=30*a,f=document.createElement("canvas");f.width=s,f.height=l,f.style.cssText="width:80px;height:48px";var m=f.getContext("2d");return m.font="bold "+9*a+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=n,m.fillRect(0,0,s,l),m.fillStyle=t,m.fillText(e,u,c),m.fillRect(p,d,h,v),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(p,d,h,v),{dom:f,update:function(l,b){r=Math.min(r,l),i=Math.max(i,l),m.fillStyle=n,m.globalAlpha=1,m.fillRect(0,0,s,d),m.fillStyle=t,m.fillText(o(l)+" "+e+" ("+o(r)+"-"+o(i)+")",u,c),m.drawImage(f,p+a,d,h-a,v,p,d,h-a,v),m.fillRect(p+h-a,d,a,v),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(p+h-a,d,a,o((1-l/b)*v))}}},e}()},850:function(e,t,n){"use strict";function r(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function i(e){for(var t={},n=0;n<e.length;n++){var i=r(e[n]);for(var o in i)t[o]=i[o]}return t}n.d(t,{Rh:function(){return i}})},4427:function(e,t,n){var r=n(6525).default,i=n(9754).default,o=n(9100).default,a=n(1506).default,s=n(3269).default,l=n(319).default,u=n(9713).default,c=n(2205).default,p=n(9842).default,d=n(3038).default,h=n(4575).default,v=n(3913).default;!function(e){"use strict";var t=function(){function e(t){h(this,e);var n=t.split("-"),r=d(n,2),i=r[0],o=r[1],a=i.split(".");this.major=parseInt(a[0],10),this.minor=parseInt(a[1],10),this.patch=parseInt(a[2],10),this.prerelease=null!==o&&void 0!==o?o:null}return v(e,[{key:"toString",value:function(){var e=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[e,this.prerelease].join("-"):e}}]),e}(),n=function(){function e(t){h(this,e),this.controller_=t}return v(e,[{key:"disabled",get:function(){return this.controller_.viewProps.get("disabled")},set:function(e){this.controller_.viewProps.set("disabled",e)}},{key:"hidden",get:function(){return this.controller_.viewProps.get("hidden")},set:function(e){this.controller_.viewProps.set("hidden",e)}},{key:"dispose",value:function(){this.controller_.viewProps.set("disposed",!0)}}]),e}(),f=v((function e(t){h(this,e),this.target=t})),m=function(e){c(n,e);var t=p(n);function n(e,r,i,o){var a;return h(this,n),(a=t.call(this,e)).value=r,a.presetKey=i,a.last=null===o||void 0===o||o,a}return v(n)}(f),b=function(e){c(n,e);var t=p(n);function n(e,r,i){var o;return h(this,n),(o=t.call(this,e)).value=r,o.presetKey=i,o}return v(n)}(f),_=function(e){c(n,e);var t=p(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).expanded=r,i}return v(n)}(f);function g(e){return e}function w(e){return null===e||void 0===e}function y(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var x={alreadydisposed:function(){return"View has been already disposed"},invalidparams:function(e){return"Invalid parameters for '".concat(e.name,"'")},nomatchingcontroller:function(e){return"No matching controller for '".concat(e.key,"'")},nomatchingview:function(e){return"No matching view for '".concat(JSON.stringify(e.params),"'")},notbindable:function(){return"Value is not bindable"},propertynotfound:function(e){return"Property '".concat(e.name,"' not found")},shouldneverhappen:function(){return"This error should never happen"}},k=function(){function e(t){var n;h(this,e),this.message=null!==(n=x[t.type](g(t.context)))&&void 0!==n?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}return v(e,null,[{key:"alreadyDisposed",value:function(){return new e({type:"alreadydisposed"})}},{key:"notBindable",value:function(){return new e({type:"notbindable"})}},{key:"propertyNotFound",value:function(t){return new e({type:"propertynotfound",context:{name:t}})}},{key:"shouldNeverHappen",value:function(){return new e({type:"shouldneverhappen"})}}]),e}(),C=function(){function e(t,n,r){h(this,e),this.obj_=t,this.key_=n,this.presetKey_=null!==r&&void 0!==r?r:n}return v(e,[{key:"key",get:function(){return this.key_}},{key:"presetKey",get:function(){return this.presetKey_}},{key:"read",value:function(){return this.obj_[this.key_]}},{key:"write",value:function(e){this.obj_[this.key_]=e}},{key:"writeProperty",value:function(t,n){var r=this.read();if(!e.isBindable(r))throw k.notBindable();if(!(t in r))throw k.propertyNotFound(t);r[t]=n}}],[{key:"isBindable",value:function(e){return null!==e&&"object"===typeof e}}]),e}(),P=function(e){c(n,e);var t=p(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"label",get:function(){return this.controller_.props.get("label")},set:function(e){this.controller_.props.set("label",e)}},{key:"title",get:function(){var e;return null!==(e=this.controller_.valueController.props.get("title"))&&void 0!==e?e:""},set:function(e){this.controller_.valueController.props.set("title",e)}},{key:"on",value:function(e,t){var n=this,r=t.bind(this);return this.controller_.valueController.emitter.on(e,(function(){r(new f(n))})),this}}]),n}(n),E=function(){function e(){h(this,e),this.observers_={}}return v(e,[{key:"on",value:function(e,t){var n=this.observers_[e];return n||(n=this.observers_[e]=[]),n.push({handler:t}),this}},{key:"off",value:function(e,t){var n=this.observers_[e];return n&&(this.observers_[e]=n.filter((function(e){return e.handler!==t}))),this}},{key:"emit",value:function(e,t){var n=this.observers_[e];n&&n.forEach((function(e){e.handler(t)}))}}]),e}(),S="tp";function V(e){return function(t,n){return[S,"-",e,"v",t?"_".concat(t):"",n?"-".concat(n):""].join("")}}function A(e,t){return function(n){return t(e(n))}}function T(e){return e.rawValue}function L(e,t){e.emitter.on("change",A(T,t)),t(e.rawValue)}function M(e,t,n){L(e.value(t),n)}function D(e,t,n){n?e.classList.add(t):e.classList.remove(t)}function R(e,t){return function(n){D(e,t,n)}}function B(e,t){L(e,(function(e){t.textContent=null!==e&&void 0!==e?e:""}))}var U=V("btn"),O=v((function e(t,n){h(this,e),this.element=t.createElement("div"),this.element.classList.add(U()),n.viewProps.bindClassModifiers(this.element);var r=t.createElement("button");r.classList.add(U("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;var i=t.createElement("div");i.classList.add(U("t")),B(n.props.value("title"),i),this.buttonElement.appendChild(i)})),F=function(){function e(t,n){h(this,e),this.emitter=new E,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new O(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return v(e,[{key:"onClick_",value:function(){this.emitter.emit("click",{sender:this})}}]),e}(),I=function(){function e(t,n){var r;h(this,e),this.constraint_=null===n||void 0===n?void 0:n.constraint,this.equals_=null!==(r=null===n||void 0===n?void 0:n.equals)&&void 0!==r?r:function(e,t){return e===t},this.emitter=new E,this.rawValue_=t}return v(e,[{key:"constraint",get:function(){return this.constraint_}},{key:"rawValue",get:function(){return this.rawValue_},set:function(e){this.setRawValue(e,{forceEmit:!1,last:!0})}},{key:"setRawValue",value:function(e,t){var n=null!==t&&void 0!==t?t:{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(e):e;(!this.equals_(this.rawValue_,r)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,rawValue:r,sender:this}))}}]),e}(),j=function(){function e(t){h(this,e),this.emitter=new E,this.value_=t}return v(e,[{key:"rawValue",get:function(){return this.value_},set:function(e){this.setRawValue(e,{forceEmit:!1,last:!0})}},{key:"setRawValue",value:function(e,t){var n=null!==t&&void 0!==t?t:{forceEmit:!1,last:!0};(this.value_!==e||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:n,rawValue:this.value_,sender:this}))}}]),e}();function N(e,t){var n=null===t||void 0===t?void 0:t.constraint,r=null===t||void 0===t?void 0:t.equals;return n||r?new I(e,t):new j(e)}var K=function(){function e(t){var n=this;h(this,e),this.emitter=new E,this.valMap_=t;var r=function(e){n.valMap_[e].emitter.on("change",(function(){n.emitter.emit("change",{key:e,sender:n})}))};for(var i in this.valMap_)r(i)}return v(e,[{key:"get",value:function(e){return this.valMap_[e].rawValue}},{key:"set",value:function(e,t){this.valMap_[e].rawValue=t}},{key:"value",value:function(e){return this.valMap_[e]}}],[{key:"createCore",value:function(e){return Object.keys(e).reduce((function(t,n){return Object.assign(t,u({},n,N(e[n])))}),{})}},{key:"fromObject",value:function(t){return new e(this.createCore(t))}}]),e}();function H(e,t){return g(Object.keys(t).reduce((function(n,r){if(void 0!==n){var i=(0,t[r])(e[r]);return i.succeeded?Object.assign(Object.assign({},n),u({},r,i.value)):void 0}}),{}))}function G(e,t){return e.reduce((function(e,n){if(void 0!==e){var r=t(n);if(r.succeeded&&void 0!==r.value)return[].concat(l(e),[r.value])}}),[])}function z(e){return null!==e&&"object"===typeof e}function q(e){return function(t){return function(n){if(!t&&void 0===n)return{succeeded:!1,value:void 0};if(t&&void 0===n)return{succeeded:!0,value:void 0};var r=e(n);return void 0!==r?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}}function Z(e){return{custom:function(t){return q(t)(e)},boolean:q((function(e){return"boolean"===typeof e?e:void 0}))(e),number:q((function(e){return"number"===typeof e?e:void 0}))(e),string:q((function(e){return"string"===typeof e?e:void 0}))(e),function:q((function(e){return"function"===typeof e?e:void 0}))(e),constant:function(t){return q((function(e){return e===t?t:void 0}))(e)},raw:q((function(e){return e}))(e),object:function(t){return q((function(e){if(z(e))return H(e,t)}))(e)},array:function(t){return q((function(e){if(Array.isArray(e))return G(e,t)}))(e)}}}var W={optional:Z(!0),required:Z(!1)};function Y(e,t){var n=W.required.object(t)(e);return n.succeeded?n.value:void 0}function X(e){return e&&e.parentElement&&e.parentElement.removeChild(e),null}function $(){return["veryfirst","first","last","verylast"]}var Q=V(""),J={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"},ee=function(){function e(t){var n=this;h(this,e),this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;var r=this.view.element;this.blade.value("positions").emitter.on("change",(function(){$().forEach((function(e){r.classList.remove(Q(void 0,J[e]))})),n.blade.get("positions").forEach((function(e){r.classList.add(Q(void 0,J[e]))}))})),this.viewProps.handleDispose((function(){X(r)}))}return v(e,[{key:"parent",get:function(){return this.parent_}}]),e}(),te="http://www.w3.org/2000/svg";function ne(e){e.offsetHeight}function re(e,t){var n=e.style.transition;e.style.transition="none",t(),e.style.transition=n}function ie(e){return void 0!==e.ontouchstart}function oe(){return new Function("return this")()}function ae(){return g(oe()).document}function se(){return"document"in oe()}function le(e){return se()?e.getContext("2d"):null}var ue={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function ce(e,t){var n=e.createElementNS(te,"svg");return n.innerHTML=ue[t],n}function pe(e,t,n){e.insertBefore(t,e.children[n])}function de(e){e.parentElement&&e.parentElement.removeChild(e)}function he(e){for(;e.children.length>0;)e.removeChild(e.children[0])}function ve(e){for(;e.childNodes.length>0;)e.removeChild(e.childNodes[0])}function fe(e){return e.relatedTarget?g(e.relatedTarget):"explicitOriginalTarget"in e?e.explicitOriginalTarget:null}var me=V("lbl");function be(e,t){var n=e.createDocumentFragment();return t.split("\n").map((function(t){return e.createTextNode(t)})).forEach((function(t,r){r>0&&n.appendChild(e.createElement("br")),n.appendChild(t)})),n}var _e=v((function e(t,n){var r=this;h(this,e),this.element=t.createElement("div"),this.element.classList.add(me()),n.viewProps.bindClassModifiers(this.element);var i=t.createElement("div");i.classList.add(me("l")),M(n.props,"label",(function(e){w(e)?r.element.classList.add(me(void 0,"nol")):(r.element.classList.remove(me(void 0,"nol")),ve(i),i.appendChild(be(t,e)))})),this.element.appendChild(i),this.labelElement=i;var o=t.createElement("div");o.classList.add(me("v")),this.element.appendChild(o),this.valueElement=o})),ge=function(e){c(n,e);var t=p(n);function n(e,r){var i;h(this,n);var o=r.valueController.viewProps;return(i=t.call(this,Object.assign(Object.assign({},r),{view:new _e(e,{props:r.props,viewProps:o}),viewProps:o}))).props=r.props,i.valueController=r.valueController,i.view.valueElement.appendChild(i.valueController.view.element),i}return v(n)}(ee),we={id:"button",type:"blade",accept:function(e){var t=W,n=Y(e,{title:t.required.string,view:t.required.constant("button"),label:t.optional.string});return n?{params:n}:null},controller:function(e){return new ge(e.document,{blade:e.blade,props:K.fromObject({label:e.params.label}),valueController:new F(e.document,{props:K.fromObject({title:e.params.title}),viewProps:e.viewProps})})},api:function(e){return e.controller instanceof ge&&e.controller.valueController instanceof F?new P(e.controller):null}},ye=function(e){c(n,e);var t=p(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).value=e.value,r}return v(n)}(ee);function xe(){return new K({positions:N([],{equals:y})})}var ke=function(e){c(n,e);var t=p(n);function n(e){return h(this,n),t.call(this,e)}return v(n,[{key:"styleExpanded",get:function(){var e;return null!==(e=this.get("temporaryExpanded"))&&void 0!==e?e:this.get("expanded")}},{key:"styleHeight",get:function(){if(!this.styleExpanded)return"0";var e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!w(e)?"".concat(e,"px"):"auto"}},{key:"bindExpandedClass",value:function(e,t){var n=this;M(this,"expanded",(function(){n.styleExpanded?e.classList.add(t):e.classList.remove(t)}))}}],[{key:"create",value:function(e){var t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null};return new n(K.createCore(t))}}]),n}(K);function Ce(e,t){var n=0;return re(t,(function(){e.set("expandedHeight",null),e.set("temporaryExpanded",!0),ne(t),n=t.clientHeight,e.set("temporaryExpanded",null),ne(t)})),n}function Pe(e,t){t.style.height=e.styleHeight}function Ee(e,t){e.value("expanded").emitter.on("beforechange",(function(){e.set("completed",!1),w(e.get("expandedHeight"))&&e.set("expandedHeight",Ce(e,t)),e.set("shouldFixHeight",!0),ne(t)})),e.emitter.on("change",(function(){Pe(e,t)})),Pe(e,t),t.addEventListener("transitionend",(function(t){"height"===t.propertyName&&(e.set("shouldFixHeight",!1),e.set("expandedHeight",null),e.set("completed",!0))}))}var Se=function(e){c(n,e);var t=p(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).rackApi_=r,i}return v(n)}(n);function Ve(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"button"}))}function Ae(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"folder"}))}function Te(e,t){var n=t||{};return e.addBlade(Object.assign(Object.assign({},n),{view:"separator"}))}function Le(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"tab"}))}var Me=function(){function e(t){h(this,e),this.emitter=new E,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}return v(e,[{key:"items",get:function(){return this.items_}},{key:"allItems",value:function(){return Array.from(this.cache_)}},{key:"find",value:function(e){var t,n=s(this.allItems());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"includes",value:function(e){return this.cache_.has(e)}},{key:"add",value:function(e,t){var n=this;if(this.includes(e))throw k.shouldNeverHappen();var r=void 0!==t?t:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);var i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach((function(e){n.cache_.add(e)}))),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}},{key:"remove",value:function(e){var t=this.items_.indexOf(e);if(!(t<0)){this.items_.splice(t,1),this.cache_.delete(e);var n=this.extract_(e);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}}},{key:"onSubListAdd_",value:function(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}},{key:"onSubListRemove_",value:function(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}]),e}(),De=function(e){c(n,e);var t=p(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).onBindingChange_=r.onBindingChange_.bind(a(r)),r.emitter_=new E,r.controller_.binding.emitter.on("change",r.onBindingChange_),r}return v(n,[{key:"label",get:function(){return this.controller_.props.get("label")},set:function(e){this.controller_.props.set("label",e)}},{key:"on",value:function(e,t){var n=t.bind(this);return this.emitter_.on(e,(function(e){n(e.event)})),this}},{key:"refresh",value:function(){this.controller_.binding.read()}},{key:"onBindingChange_",value:function(e){var t=e.sender.target.read();this.emitter_.emit("change",{event:new m(this,g(t),this.controller_.binding.target.presetKey,e.options.last)})}}]),n}(n),Re=function(e){c(n,e);var t=p(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r)).binding=r.binding,i}return v(n)}(ge),Be=function(e){c(n,e);var t=p(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).onBindingUpdate_=r.onBindingUpdate_.bind(a(r)),r.emitter_=new E,r.controller_.binding.emitter.on("update",r.onBindingUpdate_),r}return v(n,[{key:"label",get:function(){return this.controller_.props.get("label")},set:function(e){this.controller_.props.set("label",e)}},{key:"on",value:function(e,t){var n=t.bind(this);return this.emitter_.on(e,(function(e){n(e.event)})),this}},{key:"refresh",value:function(){this.controller_.binding.read()}},{key:"onBindingUpdate_",value:function(e){var t=e.sender.target.read();this.emitter_.emit("update",{event:new b(this,g(t),this.controller_.binding.target.presetKey)})}}]),n}(n),Ue=function(e){c(n,e);var t=p(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r)).binding=r.binding,i.viewProps.bindDisabled(i.binding.ticker),i.viewProps.handleDispose((function(){i.binding.dispose()})),i}return v(n)}(ge);function Oe(e){return e instanceof je?e.apiSet_:e instanceof Se?e.rackApi_.apiSet_:null}function Fe(e,t){var n=e.find((function(e){return e.controller_===t}));if(!n)throw k.shouldNeverHappen();return n}function Ie(e,t,n){if(!C.isBindable(e))throw k.notBindable();return new C(e,t,n)}var je=function(e){c(n,e);var t=p(n);function n(e,r){var i;h(this,n),(i=t.call(this,e)).onRackAdd_=i.onRackAdd_.bind(a(i)),i.onRackRemove_=i.onRackRemove_.bind(a(i)),i.onRackInputChange_=i.onRackInputChange_.bind(a(i)),i.onRackMonitorUpdate_=i.onRackMonitorUpdate_.bind(a(i)),i.emitter_=new E,i.apiSet_=new Me(Oe),i.pool_=r;var o=i.controller_.rack;return o.emitter.on("add",i.onRackAdd_),o.emitter.on("remove",i.onRackRemove_),o.emitter.on("inputchange",i.onRackInputChange_),o.emitter.on("monitorupdate",i.onRackMonitorUpdate_),o.children.forEach((function(e){i.setUpApi_(e)})),i}return v(n,[{key:"children",get:function(){var e=this;return this.controller_.rack.children.map((function(t){return Fe(e.apiSet_,t)}))}},{key:"addInput",value:function(e,t,n){var r=n||{},i=this.controller_.view.element.ownerDocument,o=this.pool_.createInput(i,Ie(e,t,r.presetKey),r),a=new De(o);return this.add(a,r.index)}},{key:"addMonitor",value:function(e,t,n){var r=n||{},i=this.controller_.view.element.ownerDocument,o=this.pool_.createMonitor(i,Ie(e,t),r),a=new Be(o);return g(this.add(a,r.index))}},{key:"addFolder",value:function(e){return Ae(this,e)}},{key:"addButton",value:function(e){return Ve(this,e)}},{key:"addSeparator",value:function(e){return Te(this,e)}},{key:"addTab",value:function(e){return Le(this,e)}},{key:"add",value:function(e,t){this.controller_.rack.add(e.controller_,t);var n=this.apiSet_.find((function(t){return t.controller_===e.controller_}));return n&&this.apiSet_.remove(n),this.apiSet_.add(e),e}},{key:"remove",value:function(e){this.controller_.rack.remove(e.controller_)}},{key:"addBlade",value:function(e){var t=this.controller_.view.element.ownerDocument,n=this.pool_.createBlade(t,e),r=this.pool_.createBladeApi(n);return this.add(r,e.index)}},{key:"on",value:function(e,t){var n=t.bind(this);return this.emitter_.on(e,(function(e){n(e.event)})),this}},{key:"setUpApi_",value:function(e){this.apiSet_.find((function(t){return t.controller_===e}))||this.apiSet_.add(this.pool_.createBladeApi(e))}},{key:"onRackAdd_",value:function(e){this.setUpApi_(e.bladeController)}},{key:"onRackRemove_",value:function(e){if(e.isRoot){var t=Fe(this.apiSet_,e.bladeController);this.apiSet_.remove(t)}}},{key:"onRackInputChange_",value:function(e){var t=e.bladeController;if(t instanceof Re){var n=Fe(this.apiSet_,t),r=t.binding;this.emitter_.emit("change",{event:new m(n,g(r.target.read()),r.target.presetKey,e.options.last)})}else if(t instanceof ye){var i=Fe(this.apiSet_,t);this.emitter_.emit("change",{event:new m(i,t.value.rawValue,void 0,e.options.last)})}}},{key:"onRackMonitorUpdate_",value:function(e){if(!(e.bladeController instanceof Ue))throw k.shouldNeverHappen();var t=Fe(this.apiSet_,e.bladeController),n=e.bladeController.binding;this.emitter_.emit("update",{event:new b(t,g(n.target.read()),n.target.presetKey)})}}]),n}(n),Ne=function(e){c(n,e);var t=p(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,new je(e.rackController,r))).emitter_=new E,i.controller_.foldable.value("expanded").emitter.on("change",(function(e){i.emitter_.emit("fold",{event:new _(a(i),e.sender.rawValue)})})),i.rackApi_.on("change",(function(e){i.emitter_.emit("change",{event:e})})),i.rackApi_.on("update",(function(e){i.emitter_.emit("update",{event:e})})),i}return v(n,[{key:"expanded",get:function(){return this.controller_.foldable.get("expanded")},set:function(e){this.controller_.foldable.set("expanded",e)}},{key:"title",get:function(){return this.controller_.props.get("title")},set:function(e){this.controller_.props.set("title",e)}},{key:"children",get:function(){return this.rackApi_.children}},{key:"addInput",value:function(e,t,n){return this.rackApi_.addInput(e,t,n)}},{key:"addMonitor",value:function(e,t,n){return this.rackApi_.addMonitor(e,t,n)}},{key:"addFolder",value:function(e){return this.rackApi_.addFolder(e)}},{key:"addButton",value:function(e){return this.rackApi_.addButton(e)}},{key:"addSeparator",value:function(e){return this.rackApi_.addSeparator(e)}},{key:"addTab",value:function(e){return this.rackApi_.addTab(e)}},{key:"add",value:function(e,t){return this.rackApi_.add(e,t)}},{key:"remove",value:function(e){this.rackApi_.remove(e)}},{key:"addBlade",value:function(e){return this.rackApi_.addBlade(e)}},{key:"on",value:function(e,t){var n=t.bind(this);return this.emitter_.on(e,(function(e){n(e.event)})),this}}]),n}(Se),Ke=function(e){c(n,e);var t=p(n);function n(e){var r;return h(this,n),(r=t.call(this,{blade:e.blade,view:e.view,viewProps:e.rackController.viewProps})).rackController=e.rackController,r}return v(n)}(ee),He=v((function e(t,n){h(this,e);var r=V(n.viewName);this.element=t.createElement("div"),this.element.classList.add(r()),n.viewProps.bindClassModifiers(this.element)}));function Ge(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof Re&&r.binding===t)return r}return null}function ze(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof Ue&&r.binding===t)return r}return null}function qe(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof ye&&r.value===t)return r}return null}function Ze(e){return e instanceof Xe?e.rack:e instanceof Ke?e.rackController.rack:null}function We(e){var t=Ze(e);return t?t.bcSet_:null}var Ye=function(){function e(t){var n;h(this,e),this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new E,this.blade_=null!==t&&void 0!==t?t:null,null===(n=this.blade_)||void 0===n||n.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new Me(We),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}return v(e,[{key:"children",get:function(){return this.bcSet_.items}},{key:"add",value:function(e,t){e.parent&&e.parent.remove(e),e.parent_=this,this.bcSet_.add(e,t)}},{key:"remove",value:function(e){e.parent_=null,this.bcSet_.remove(e)}},{key:"find",value:function(e){return g(this.bcSet_.allItems().filter((function(t){return t instanceof e})))}},{key:"onSetAdd_",value:function(e){this.updatePositions_();var t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,isRoot:t,sender:this}),t){var n=e.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),n instanceof Re)n.binding.emitter.on("change",this.onChildInputChange_);else if(n instanceof Ue)n.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(n instanceof ye)n.value.emitter.on("change",this.onChildValueChange_);else{var r=Ze(n);if(r){var i=r.emitter;i.on("layout",this.onDescendantLayout_),i.on("inputchange",this.onDescendantInputChange_),i.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}}},{key:"onSetRemove_",value:function(e){this.updatePositions_();var t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,isRoot:t,sender:this}),t){var n=e.item;if(n instanceof Re)n.binding.emitter.off("change",this.onChildInputChange_);else if(n instanceof Ue)n.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(n instanceof ye)n.value.emitter.off("change",this.onChildValueChange_);else{var r=Ze(n);if(r){var i=r.emitter;i.off("layout",this.onDescendantLayout_),i.off("inputchange",this.onDescendantInputChange_),i.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}}},{key:"updatePositions_",value:function(){var e=this,t=this.bcSet_.items.filter((function(e){return!e.viewProps.get("hidden")})),n=t[0],r=t[t.length-1];this.bcSet_.items.forEach((function(t){var i=[];t===n&&(i.push("first"),e.blade_&&!e.blade_.get("positions").includes("veryfirst")||i.push("veryfirst")),t===r&&(i.push("last"),e.blade_&&!e.blade_.get("positions").includes("verylast")||i.push("verylast")),t.blade.set("positions",i)}))}},{key:"onChildPositionsChange_",value:function(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}},{key:"onChildViewPropsChange_",value:function(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}},{key:"onChildDispose_",value:function(){var e=this;this.bcSet_.items.filter((function(e){return e.viewProps.get("disposed")})).forEach((function(t){e.bcSet_.remove(t)}))}},{key:"onChildInputChange_",value:function(e){var t=Ge(this.find(Re),e.sender);if(!t)throw k.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:t,options:e.options,sender:this})}},{key:"onChildMonitorUpdate_",value:function(e){var t=ze(this.find(Ue),e.sender);if(!t)throw k.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:t,sender:this})}},{key:"onChildValueChange_",value:function(e){var t=qe(this.find(ye),e.sender);if(!t)throw k.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:t,options:e.options,sender:this})}},{key:"onDescendantLayout_",value:function(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}},{key:"onDescendantInputChange_",value:function(e){this.emitter.emit("inputchange",{bladeController:e.bladeController,options:e.options,sender:this})}},{key:"onDescendantMonitorUpdate_",value:function(e){this.emitter.emit("monitorupdate",{bladeController:e.bladeController,sender:this})}},{key:"onBladePositionsChange_",value:function(){this.updatePositions_()}}]),e}(),Xe=function(e){c(n,e);var t=p(n);function n(e,r){var i;h(this,n),(i=t.call(this,Object.assign(Object.assign({},r),{view:new He(e,{viewName:"brk",viewProps:r.viewProps})}))).onRackAdd_=i.onRackAdd_.bind(a(i)),i.onRackRemove_=i.onRackRemove_.bind(a(i));var o=new Ye(r.root?void 0:r.blade);return o.emitter.on("add",i.onRackAdd_),o.emitter.on("remove",i.onRackRemove_),i.rack=o,i.viewProps.handleDispose((function(){for(var e=i.rack.children.length-1;e>=0;e--)i.rack.children[e].viewProps.set("disposed",!0)})),i}return v(n,[{key:"onRackAdd_",value:function(e){e.isRoot&&pe(this.view.element,e.bladeController.view.element,e.index)}},{key:"onRackRemove_",value:function(e){e.isRoot&&de(e.bladeController.view.element)}}]),n}(ee),$e=V("cnt"),Qe=v((function e(t,n){var r=this;h(this,e),this.className_=V(n.viewName||"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),$e()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),M(this.foldable_,"completed",R(this.element,this.className_(void 0,"cpl")));var i=t.createElement("button");i.classList.add(this.className_("b")),M(n.props,"title",(function(e){w(e)?r.element.classList.add(r.className_(void 0,"not")):r.element.classList.remove(r.className_(void 0,"not"))})),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;var o=t.createElement("div");o.classList.add(this.className_("t")),B(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;var a=t.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);var s=n.containerElement;s.classList.add(this.className_("c")),this.element.appendChild(s),this.containerElement=s})),Je=function(e){c(n,e);var t=p(n);function n(e,r){var i,o;h(this,n);var s=ke.create(null===(o=r.expanded)||void 0===o||o),l=new Xe(e,{blade:r.blade,root:r.root,viewProps:r.viewProps});return(i=t.call(this,Object.assign(Object.assign({},r),{rackController:l,view:new Qe(e,{containerElement:l.view.element,foldable:s,props:r.props,viewName:r.root?"rot":void 0,viewProps:r.viewProps})}))).onTitleClick_=i.onTitleClick_.bind(a(i)),i.props=r.props,i.foldable=s,Ee(i.foldable,i.view.containerElement),i.view.buttonElement.addEventListener("click",i.onTitleClick_),i}return v(n,[{key:"document",get:function(){return this.view.element.ownerDocument}},{key:"onTitleClick_",value:function(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}]),n}(Ke),et={id:"folder",type:"blade",accept:function(e){var t=W,n=Y(e,{title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean});return n?{params:n}:null},controller:function(e){return new Je(e.document,{blade:e.blade,expanded:e.params.expanded,props:K.fromObject({title:e.params.title}),viewProps:e.viewProps})},api:function(e){return e.controller instanceof Je?new Ne(e.controller,e.pool):null}},tt=function(e){c(n,e);var t=p(n);function n(e,r){var i;h(this,n);var o=r.valueController.viewProps;return(i=t.call(this,Object.assign(Object.assign({},r),{value:r.valueController.value,view:new _e(e,{props:r.props,viewProps:o}),viewProps:o}))).props=r.props,i.valueController=r.valueController,i.view.valueElement.appendChild(i.valueController.view.element),i}return v(n)}(ye),nt=function(e){c(n,e);var t=p(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n)}(n),rt=V("spr"),it=v((function e(t,n){h(this,e),this.element=t.createElement("div"),this.element.classList.add(rt()),n.viewProps.bindClassModifiers(this.element);var r=t.createElement("hr");r.classList.add(rt("r")),this.element.appendChild(r)})),ot=function(e){c(n,e);var t=p(n);function n(e,r){return h(this,n),t.call(this,Object.assign(Object.assign({},r),{view:new it(e,{viewProps:r.viewProps})}))}return v(n)}(ee),at={id:"separator",type:"blade",accept:function(e){var t=Y(e,{view:W.required.constant("separator")});return t?{params:t}:null},controller:function(e){return new ot(e.document,{blade:e.blade,viewProps:e.viewProps})},api:function(e){return e.controller instanceof ot?new nt(e.controller):null}},st=V("");function lt(e,t){return R(e,st(void 0,t))}var ut=function(e){c(n,e);var t=p(n);function n(e){return h(this,n),t.call(this,e)}return v(n,[{key:"bindClassModifiers",value:function(e){M(this,"disabled",lt(e,"disabled")),M(this,"hidden",lt(e,"hidden"))}},{key:"bindDisabled",value:function(e){M(this,"disabled",(function(t){e.disabled=t}))}},{key:"bindTabIndex",value:function(e){M(this,"disabled",(function(t){e.tabIndex=t?-1:0}))}},{key:"handleDispose",value:function(e){this.value("disposed").emitter.on("change",(function(t){t&&e()}))}}],[{key:"create",value:function(e){var t,r,i=null!==e&&void 0!==e?e:{},o={disabled:null!==(t=i.disabled)&&void 0!==t&&t,disposed:!1,hidden:null!==(r=i.hidden)&&void 0!==r&&r};return new n(K.createCore(o))}}]),n}(K),ct=V("tbi"),pt=v((function e(t,n){var r=this;h(this,e),this.element=t.createElement("div"),this.element.classList.add(ct()),n.viewProps.bindClassModifiers(this.element),M(n.props,"selected",(function(e){e?r.element.classList.add(ct(void 0,"sel")):r.element.classList.remove(ct(void 0,"sel"))}));var i=t.createElement("button");i.classList.add(ct("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;var o=t.createElement("div");o.classList.add(ct("t")),B(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o})),dt=function(){function e(t,n){h(this,e),this.emitter=new E,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new pt(t,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return v(e,[{key:"onClick_",value:function(){this.emitter.emit("click",{sender:this})}}]),e}(),ht=function(){function e(t,n){var r=this;h(this,e),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new dt(t,{props:n.itemProps,viewProps:ut.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Xe(t,{blade:xe(),viewProps:ut.create()}),this.props=n.props,M(this.props,"selected",(function(e){r.itemController.props.set("selected",e),r.contentController.viewProps.set("hidden",!e)}))}return v(e,[{key:"itemController",get:function(){return this.ic_}},{key:"contentController",get:function(){return this.cc_}},{key:"onItemClick_",value:function(){this.props.set("selected",!0)}}]),e}(),vt=function(){function e(t,n){h(this,e),this.controller_=t,this.rackApi_=n}return v(e,[{key:"title",get:function(){var e;return null!==(e=this.controller_.itemController.props.get("title"))&&void 0!==e?e:""},set:function(e){this.controller_.itemController.props.set("title",e)}},{key:"selected",get:function(){return this.controller_.props.get("selected")},set:function(e){this.controller_.props.set("selected",e)}},{key:"children",get:function(){return this.rackApi_.children}},{key:"addButton",value:function(e){return this.rackApi_.addButton(e)}},{key:"addFolder",value:function(e){return this.rackApi_.addFolder(e)}},{key:"addSeparator",value:function(e){return this.rackApi_.addSeparator(e)}},{key:"addTab",value:function(e){return this.rackApi_.addTab(e)}},{key:"add",value:function(e,t){this.rackApi_.add(e,t)}},{key:"remove",value:function(e){this.rackApi_.remove(e)}},{key:"addInput",value:function(e,t,n){return this.rackApi_.addInput(e,t,n)}},{key:"addMonitor",value:function(e,t,n){return this.rackApi_.addMonitor(e,t,n)}},{key:"addBlade",value:function(e){return this.rackApi_.addBlade(e)}}]),e}(),ft=function(e){c(n,e);var t=p(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,new je(e.rackController,r))).onPageAdd_=i.onPageAdd_.bind(a(i)),i.onPageRemove_=i.onPageRemove_.bind(a(i)),i.emitter_=new E,i.pageApiMap_=new Map,i.rackApi_.on("change",(function(e){i.emitter_.emit("change",{event:e})})),i.rackApi_.on("update",(function(e){i.emitter_.emit("update",{event:e})})),i.controller_.pageSet.emitter.on("add",i.onPageAdd_),i.controller_.pageSet.emitter.on("remove",i.onPageRemove_),i.controller_.pageSet.items.forEach((function(e){i.setUpPageApi_(e)})),i}return v(n,[{key:"pages",get:function(){var e=this;return this.controller_.pageSet.items.map((function(t){var n=e.pageApiMap_.get(t);if(!n)throw k.shouldNeverHappen();return n}))}},{key:"addPage",value:function(e){var t=this.controller_.view.element.ownerDocument,n=new ht(t,{itemProps:K.fromObject({selected:!1,title:e.title}),props:K.fromObject({selected:!1})});this.controller_.add(n,e.index);var r=this.pageApiMap_.get(n);if(!r)throw k.shouldNeverHappen();return r}},{key:"removePage",value:function(e){this.controller_.remove(e)}},{key:"on",value:function(e,t){var n=t.bind(this);return this.emitter_.on(e,(function(e){n(e.event)})),this}},{key:"setUpPageApi_",value:function(e){var t=this.rackApi_.apiSet_.find((function(t){return t.controller_===e.contentController}));if(!t)throw k.shouldNeverHappen();var n=new vt(e,t);this.pageApiMap_.set(e,n)}},{key:"onPageAdd_",value:function(e){this.setUpPageApi_(e.item)}},{key:"onPageRemove_",value:function(e){if(!this.pageApiMap_.get(e.item))throw k.shouldNeverHappen();this.pageApiMap_.delete(e.item)}}]),n}(Se),mt=V("tab"),bt=v((function e(t,n){h(this,e),this.element=t.createElement("div"),this.element.classList.add(mt(),$e()),n.viewProps.bindClassModifiers(this.element),L(n.empty,R(this.element,mt(void 0,"nop")));var r=t.createElement("div");r.classList.add(mt("i")),this.element.appendChild(r),this.itemsElement=r;var i=n.contentsElement;i.classList.add(mt("c")),this.element.appendChild(i),this.contentsElement=i})),_t=function(e){c(n,e);var t=p(n);function n(e,r){var i;h(this,n);var o=new Xe(e,{blade:r.blade,viewProps:r.viewProps}),s=N(!0);return(i=t.call(this,{blade:r.blade,rackController:o,view:new bt(e,{contentsElement:o.view.element,empty:s,viewProps:r.viewProps})})).onPageAdd_=i.onPageAdd_.bind(a(i)),i.onPageRemove_=i.onPageRemove_.bind(a(i)),i.onPageSelectedChange_=i.onPageSelectedChange_.bind(a(i)),i.pageSet_=new Me((function(){return null})),i.pageSet_.emitter.on("add",i.onPageAdd_),i.pageSet_.emitter.on("remove",i.onPageRemove_),i.empty_=s,i.applyPages_(),i}return v(n,[{key:"pageSet",get:function(){return this.pageSet_}},{key:"add",value:function(e,t){this.pageSet_.add(e,null!==t&&void 0!==t?t:this.pageSet_.items.length)}},{key:"remove",value:function(e){this.pageSet_.remove(this.pageSet_.items[e])}},{key:"applyPages_",value:function(){this.keepSelection_(),this.empty_.rawValue=0===this.pageSet_.items.length}},{key:"onPageAdd_",value:function(e){var t=e.item;pe(this.view.itemsElement,t.itemController.view.element,e.index),this.rackController.rack.add(t.contentController,e.index),t.props.value("selected").emitter.on("change",this.onPageSelectedChange_),this.applyPages_()}},{key:"onPageRemove_",value:function(e){var t=e.item;de(t.itemController.view.element),this.rackController.rack.remove(t.contentController),t.props.value("selected").emitter.off("change",this.onPageSelectedChange_),this.applyPages_()}},{key:"keepSelection_",value:function(){if(0!==this.pageSet_.items.length){var e=this.pageSet_.items.findIndex((function(e){return e.props.get("selected")}));e<0?this.pageSet_.items.forEach((function(e,t){e.props.set("selected",0===t)})):this.pageSet_.items.forEach((function(t,n){t.props.set("selected",n===e)}))}}},{key:"onPageSelectedChange_",value:function(e){if(e.rawValue){var t=this.pageSet_.items.findIndex((function(t){return t.props.value("selected")===e.sender}));this.pageSet_.items.forEach((function(e,n){e.props.set("selected",n===t)}))}else this.keepSelection_()}}]),n}(Ke),gt={id:"tab",type:"blade",accept:function(e){var t=W,n=Y(e,{pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")});return n&&0!==n.pages.length?{params:n}:null},controller:function(e){var t=new _t(e.document,{blade:e.blade,viewProps:e.viewProps});return e.params.pages.forEach((function(n){var r=new ht(e.document,{itemProps:K.fromObject({selected:!1,title:n.title}),props:K.fromObject({selected:!1})});t.add(r)})),t},api:function(e){return e.controller instanceof _t?new ft(e.controller,e.pool):null}};function wt(e,t){var n=e.accept(t.params);if(!n)return null;var r=W.optional.boolean(t.params.disabled).value,i=W.optional.boolean(t.params.hidden).value;return e.controller({blade:xe(),document:t.document,params:g(Object.assign(Object.assign({},n.params),{disabled:r,hidden:i})),viewProps:ut.create({disabled:r,hidden:i})})}var yt=function(){function e(){h(this,e),this.disabled=!1,this.emitter=new E}return v(e,[{key:"dispose",value:function(){}},{key:"tick",value:function(){this.disabled||this.emitter.emit("tick",{sender:this})}}]),e}(),xt=function(){function e(t,n){h(this,e),this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new E,this.interval_=n,this.setTimer_()}return v(e,[{key:"disabled",get:function(){return this.disabled_},set:function(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}},{key:"dispose",value:function(){this.clearTimer_()}},{key:"clearTimer_",value:function(){if(null!==this.timerId_){var e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}}},{key:"setTimer_",value:function(){if(this.clearTimer_(),!(this.interval_<=0)){var e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}}},{key:"onTick_",value:function(){this.disabled_||this.emitter.emit("tick",{sender:this})}}]),e}(),kt=function(){function e(t){h(this,e),this.constraints=t}return v(e,[{key:"constrain",value:function(e){return this.constraints.reduce((function(e,t){return t.constrain(e)}),e)}}]),e}();function Ct(e,t){if(e instanceof t)return e;if(e instanceof kt){var n=e.constraints.reduce((function(e,n){return e||(n instanceof t?n:null)}),null);if(n)return n}return null}var Pt=function(){function e(t){h(this,e),this.options=t}return v(e,[{key:"constrain",value:function(e){var t=this.options;return 0===t.length||t.filter((function(t){return t.value===e})).length>0?e:t[0].value}}]),e}(),Et=function(){function e(t){h(this,e),this.maxValue=t.max,this.minValue=t.min}return v(e,[{key:"constrain",value:function(e){var t=e;return w(this.minValue)||(t=Math.max(t,this.minValue)),w(this.maxValue)||(t=Math.min(t,this.maxValue)),t}}]),e}(),St=function(){function e(t){h(this,e),this.step=t}return v(e,[{key:"constrain",value:function(e){return(e<0?-Math.round(-e/this.step):Math.round(e/this.step))*this.step}}]),e}(),Vt=V("lst"),At=function(){function e(t,n){h(this,e),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=t.createElement("div"),this.element.classList.add(Vt()),n.viewProps.bindClassModifiers(this.element);var r=t.createElement("select");r.classList.add(Vt("s")),M(this.props_,"options",(function(e){he(r),e.forEach((function(e,n){var i=t.createElement("option");i.dataset.index=String(n),i.textContent=e.text,i.value=String(e.value),r.appendChild(i)}))})),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;var i=t.createElement("div");i.classList.add(Vt("m")),i.appendChild(ce(t,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,this.update_()}return v(e,[{key:"update_",value:function(){this.selectElement.value=String(this.value_.rawValue)}},{key:"onValueChange_",value:function(){this.update_()}}]),e}(),Tt=function(){function e(t,n){h(this,e),this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new At(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}return v(e,[{key:"onSelectChange_",value:function(e){var t=g(e.currentTarget).selectedOptions.item(0);if(t){var n=Number(t.dataset.index);this.value.rawValue=this.props.get("options")[n].value}}}]),e}(),Lt=V("pop"),Mt=v((function e(t,n){h(this,e),this.element=t.createElement("div"),this.element.classList.add(Lt()),n.viewProps.bindClassModifiers(this.element),L(n.shows,R(this.element,Lt(void 0,"v")))})),Dt=v((function e(t,n){h(this,e),this.shows=N(!1),this.viewProps=n.viewProps,this.view=new Mt(t,{shows:this.shows,viewProps:this.viewProps})})),Rt=V("txt"),Bt=function(){function e(t,n){h(this,e),this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Rt()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);var r=t.createElement("input");r.classList.add(Rt("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}return v(e,[{key:"refresh",value:function(){var e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}},{key:"onChange_",value:function(){this.refresh()}}]),e}(),Ut=function(){function e(t,n){h(this,e),this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Bt(t,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return v(e,[{key:"onInputChange_",value:function(e){var t=g(e.currentTarget).value,n=this.parser_(t);w(n)||(this.value.rawValue=n),this.view.refresh()}}]),e}();function Ot(e){return String(e)}function Ft(e){return"false"!==e&&!!e}function It(e){return Ot(e)}var jt=function(){function e(t){h(this,e),this.text=t}return v(e,[{key:"evaluate",value:function(){return Number(this.text)}},{key:"toString",value:function(){return this.text}}]),e}(),Nt={"**":function(e,t){return Math.pow(e,t)},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<<":function(e,t){return e<<t},">>":function(e,t){return e>>t},">>>":function(e,t){return e>>>t},"&":function(e,t){return e&t},"^":function(e,t){return e^t},"|":function(e,t){return e|t}},Kt=function(){function e(t,n,r){h(this,e),this.left=n,this.operator=t,this.right=r}return v(e,[{key:"evaluate",value:function(){var e=Nt[this.operator];if(!e)throw new Error("unexpected binary operator: '".concat(this.operator));return e(this.left.evaluate(),this.right.evaluate())}},{key:"toString",value:function(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}]),e}(),Ht={"+":function(e){return e},"-":function(e){return-e},"~":function(e){return~e}},Gt=function(){function e(t,n){h(this,e),this.operator=t,this.expression=n}return v(e,[{key:"evaluate",value:function(){var e=Ht[this.operator];if(!e)throw new Error("unexpected unary operator: '".concat(this.operator));return e(this.expression.evaluate())}},{key:"toString",value:function(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}]),e}();function zt(e){return function(t,n){for(var r=0;r<e.length;r++){var i=e[r](t,n);if(""!==i)return i}return""}}function qt(e,t){var n,r=e.substr(t).match(/^\s+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Zt(e,t){var n=e.substr(t,1);return n.match(/^[1-9]$/)?n:""}function Wt(e,t){var n,r=e.substr(t).match(/^[0-9]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Yt(e,t){var n=Wt(e,t);if(""!==n)return n;var r=e.substr(t,1);if("-"!==r&&"+"!==r)return"";var i=Wt(e,t+=1);return""===i?"":r+i}function Xt(e,t){var n=e.substr(t,1);if(t+=1,"e"!==n.toLowerCase())return"";var r=Yt(e,t);return""===r?"":n+r}function $t(e,t){var n=e.substr(t,1);if("0"===n)return n;var r=Zt(e,t);return t+=r.length,""===r?"":r+Wt(e,t)}function Qt(e,t){var n=$t(e,t);if(t+=n.length,""===n)return"";var r=e.substr(t,1);if(t+=r.length,"."!==r)return"";var i=Wt(e,t);return n+r+i+Xt(e,t+=i.length)}function Jt(e,t){var n=e.substr(t,1);if(t+=n.length,"."!==n)return"";var r=Wt(e,t);return t+=r.length,""===r?"":n+r+Xt(e,t)}function en(e,t){var n=$t(e,t);return t+=n.length,""===n?"":n+Xt(e,t)}var tn=zt([Qt,Jt,en]);function nn(e,t){var n,r=e.substr(t).match(/^[01]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function rn(e,t){var n=e.substr(t,2);if(t+=n.length,"0b"!==n.toLowerCase())return"";var r=nn(e,t);return""===r?"":n+r}function on(e,t){var n,r=e.substr(t).match(/^[0-7]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function an(e,t){var n=e.substr(t,2);if(t+=n.length,"0o"!==n.toLowerCase())return"";var r=on(e,t);return""===r?"":n+r}function sn(e,t){var n,r=e.substr(t).match(/^[0-9a-f]+/i);return null!==(n=r&&r[0])&&void 0!==n?n:""}function ln(e,t){var n=e.substr(t,2);if(t+=n.length,"0x"!==n.toLowerCase())return"";var r=sn(e,t);return""===r?"":n+r}var un=zt([rn,an,ln]),cn=zt([un,tn]);function pn(e,t){var n=cn(e,t);return t+=n.length,""===n?null:{evaluable:new jt(n),cursor:t}}function dn(e,t){var n=e.substr(t,1);if(t+=n.length,"("!==n)return null;var r=_n(e,t);if(!r)return null;t=r.cursor,t+=qt(e,t).length;var i=e.substr(t,1);return t+=i.length,")"!==i?null:{evaluable:r.evaluable,cursor:t}}function hn(e,t){return pn(e,t)||dn(e,t)}function vn(e,t){var n=hn(e,t);if(n)return n;var r=e.substr(t,1);if(t+=r.length,"+"!==r&&"-"!==r&&"~"!==r)return null;var i=vn(e,t);return i?{cursor:t=i.cursor,evaluable:new Gt(r,i.evaluable)}:null}function fn(e,t,n){n+=qt(t,n).length;var r=e.filter((function(e){return t.startsWith(e,n)}))[0];return r?(n+=r.length,{cursor:n+=qt(t,n).length,operator:r}):null}function mn(e,t){return function(n,r){var i=e(n,r);if(!i)return null;r=i.cursor;for(var o=i.evaluable;;){var a=fn(t,n,r);if(!a)break;r=a.cursor;var s=e(n,r);if(!s)return null;r=s.cursor,o=new Kt(a.operator,o,s.evaluable)}return o?{cursor:r,evaluable:o}:null}}var bn=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((function(e,t){return mn(e,t)}),vn);function _n(e,t){return t+=qt(e,t).length,bn(e,t)}function gn(e){var t=_n(e,0);return t?t.cursor+qt(e,t.cursor).length!==e.length?null:t.evaluable:null}function wn(e){var t,n=gn(e);return null!==(t=null===n||void 0===n?void 0:n.evaluate())&&void 0!==t?t:null}function yn(e){if("number"===typeof e)return e;if("string"===typeof e){var t=wn(e);if(!w(t))return t}return 0}function xn(e){return String(e)}function kn(e){return function(t){return t.toFixed(Math.max(Math.min(e,20),0))}}var Cn=kn(0);function Pn(e){return Cn(e)+"%"}function En(e){return String(e)}function Sn(e){return e}function Vn(e,t){for(;e.length<t;)e.push(void 0)}function An(e){var t=[];return Vn(t,e),N(t)}function Tn(e){var t=e.indexOf(void 0);return g(t<0?e:e.slice(0,t))}function Ln(e,t){var n=[].concat(l(Tn(e)),[t]);return n.length>e.length?n.splice(0,n.length-e.length):Vn(n,e.length),n}function Mn(e){var t=e.primary,n=e.secondary,r=e.forward,i=e.backward,o=!1;function a(e){o||(o=!0,e(),o=!1)}t.emitter.on("change",(function(e){a((function(){n.setRawValue(r(t,n),e.options)}))})),n.emitter.on("change",(function(e){a((function(){t.setRawValue(i(t,n),e.options)})),a((function(){n.setRawValue(r(t,n),e.options)}))})),a((function(){n.setRawValue(r(t,n),{forceEmit:!1,last:!0})}))}function Dn(e,t){var n=e*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+n:t.downKey?-n:0}function Rn(e){return{altKey:e.altKey,downKey:"ArrowDown"===e.key,shiftKey:e.shiftKey,upKey:"ArrowUp"===e.key}}function Bn(e){return{altKey:e.altKey,downKey:"ArrowLeft"===e.key,shiftKey:e.shiftKey,upKey:"ArrowRight"===e.key}}function Un(e){return"ArrowUp"===e||"ArrowDown"===e}function On(e){return Un(e)||"ArrowLeft"===e||"ArrowRight"===e}function Fn(e,t){var n=t.ownerDocument.defaultView,r=t.getBoundingClientRect();return{x:e.pageX-((n&&n.scrollX||0)+r.left),y:e.pageY-((n&&n.scrollY||0)+r.top)}}var In=function(){function e(t){h(this,e),this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new E,t.addEventListener("touchstart",this.onTouchStart_),t.addEventListener("touchmove",this.onTouchMove_),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}return v(e,[{key:"computePosition_",value:function(e){var t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}},{key:"onMouseDown_",value:function(e){var t;e.preventDefault(),null===(t=e.currentTarget)||void 0===t||t.focus();var n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Fn(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}},{key:"onDocumentMouseMove_",value:function(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Fn(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}},{key:"onDocumentMouseUp_",value:function(e){var t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Fn(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}},{key:"onTouchStart_",value:function(e){e.preventDefault();var t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}},{key:"onTouchMove_",value:function(e){var t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}},{key:"onTouchEnd_",value:function(e){var t,n=null!==(t=e.targetTouches.item(0))&&void 0!==t?t:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey})}}]),e}();function jn(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}function Nn(e){return String(e.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Kn(e,t,n){return Math.min(Math.max(e,t),n)}function Hn(e,t){return(e%t+t)%t}var Gn=V("txt"),zn=function(){function e(t,n){h(this,e),this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Gn(),Gn(void 0,"num")),n.arrayPosition&&this.element.classList.add(Gn(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);var r=t.createElement("input");r.classList.add(Gn("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Gn()),this.inputElement.classList.add(Gn("i"));var i=t.createElement("div");i.classList.add(Gn("k")),this.element.appendChild(i),this.knobElement=i;var o=t.createElementNS(te,"svg");o.classList.add(Gn("g")),this.knobElement.appendChild(o);var a=t.createElementNS(te,"path");a.classList.add(Gn("gb")),o.appendChild(a),this.guideBodyElem_=a;var s=t.createElementNS(te,"path");s.classList.add(Gn("gh")),o.appendChild(s),this.guideHeadElem_=s;var l=t.createElement("div");l.classList.add(V("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}return v(e,[{key:"onDraggingChange_",value:function(e){if(null!==e.rawValue){this.element.classList.add(Gn(void 0,"drg"));var t=e.rawValue/this.props_.get("draggingScale"),n=t+(t>0?-1:t<0?1:0),r=Kn(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",["M ".concat(n+r,",0 L").concat(n,",4 L").concat(n+r,",8"),"M ".concat(t,",-1 L").concat(t,",9")].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d","M 0,4 L".concat(t,",4"));var i=this.props_.get("formatter");this.tooltipElem_.textContent=i(this.value.rawValue),this.tooltipElem_.style.left="".concat(t,"px")}else this.element.classList.remove(Gn(void 0,"drg"))}},{key:"refresh",value:function(){var e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}},{key:"onChange_",value:function(){this.refresh()}}]),e}(),qn=function(){function e(t,n){h(this,e),this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=n.baseStep,this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=N(null),this.view=new zn(t,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);var r=new In(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}return v(e,[{key:"onInputChange_",value:function(e){var t=g(e.currentTarget).value,n=this.parser_(t);w(n)||(this.value.rawValue=n),this.view.refresh()}},{key:"onInputKeyDown_",value:function(e){var t=Dn(this.baseStep_,Rn(e));0!==t&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}},{key:"onInputKeyUp_",value:function(e){0!==Dn(this.baseStep_,Rn(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},{key:"onPointerDown_",value:function(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}},{key:"computeDraggingValue_",value:function(e){if(!e.point)return null;var t=e.point.x-e.bounds.width/2;return this.originRawValue_+t*this.props.get("draggingScale")}},{key:"onPointerMove_",value:function(e){var t=this.computeDraggingValue_(e.data);null!==t&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}},{key:"onPointerUp_",value:function(e){var t=this.computeDraggingValue_(e.data);null!==t&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}]),e}(),Zn=V("sld"),Wn=function(){function e(t,n){h(this,e),this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Zn()),n.viewProps.bindClassModifiers(this.element);var r=t.createElement("div");r.classList.add(Zn("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;var i=t.createElement("div");i.classList.add(Zn("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}return v(e,[{key:"update_",value:function(){var e=Kn(jn(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width="".concat(e,"%")}},{key:"onChange_",value:function(){this.update_()}}]),e}(),Yn=function(){function e(t,n){h(this,e),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=n.baseStep,this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new Wn(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}return v(e,[{key:"handlePointerEvent_",value:function(e,t){e.point&&this.value.setRawValue(jn(Kn(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),t)}},{key:"onPointerDownOrMove_",value:function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(e){var t=Dn(this.baseStep_,Bn(e));0!==t&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}},{key:"onKeyUp_",value:function(e){0!==Dn(this.baseStep_,Bn(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),e}(),Xn=V("sldtxt"),$n=v((function e(t,n){h(this,e),this.element=t.createElement("div"),this.element.classList.add(Xn());var r=t.createElement("div");r.classList.add(Xn("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);var i=t.createElement("div");i.classList.add(Xn("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)})),Qn=function(){function e(t,n){h(this,e),this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new Yn(t,{baseStep:n.baseStep,props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new qn(t,{baseStep:n.baseStep,parser:n.parser,props:n.textProps,value:n.value,viewProps:n.viewProps}),this.view=new $n(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}return v(e,[{key:"sliderController",get:function(){return this.sliderC_}},{key:"textController",get:function(){return this.textC_}}]),e}();function Jn(e,t){e.write(t)}function er(e){var t=W;return Array.isArray(e)?t.required.array(t.required.object({text:t.required.string,value:t.required.raw}))(e).value:"object"===typeof e?t.required.raw(e).value:void 0}function tr(e){if("inline"===e||"popup"===e)return e}function nr(e){var t=W;return t.required.object({max:t.optional.number,min:t.optional.number,step:t.optional.number})(e).value}function rr(e){if(Array.isArray(e))return e;var t=[];return Object.keys(e).forEach((function(n){t.push({text:n,value:e[n]})})),t}function ir(e){return w(e)?null:new Pt(rr(g(e)))}function or(e){var t=e?Ct(e,Pt):null;return t?t.options:null}function ar(e){var t=e?Ct(e,St):null;return t?t.step:null}function sr(e,t){var n=e&&Ct(e,St);return n?Nn(n.step):Math.max(Nn(t),2)}function lr(e){var t=ar(e);return null!==t&&void 0!==t?t:1}function ur(e,t){var n,r=e&&Ct(e,St),i=Math.abs(null!==(n=null===r||void 0===r?void 0:r.step)&&void 0!==n?n:t);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}var cr=V("ckb"),pr=function(){function e(t,n){h(this,e),this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(cr()),n.viewProps.bindClassModifiers(this.element);var r=t.createElement("label");r.classList.add(cr("l")),this.element.appendChild(r);var i=t.createElement("input");i.classList.add(cr("i")),i.type="checkbox",r.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);var o=t.createElement("div");o.classList.add(cr("w")),r.appendChild(o);var a=ce(t,"check");o.appendChild(a),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}return v(e,[{key:"update_",value:function(){this.inputElement.checked=this.value.rawValue}},{key:"onValueChange_",value:function(){this.update_()}}]),e}(),dr=function(){function e(t,n){h(this,e),this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new pr(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return v(e,[{key:"onInputChange_",value:function(e){var t=g(e.currentTarget);this.value.rawValue=t.checked}}]),e}();function hr(e){var t=[],n=ir(e.options);return n&&t.push(n),new kt(t)}var vr={id:"input-bool",type:"input",accept:function(e,t){if("boolean"!==typeof e)return null;var n=Y(t,{options:W.optional.custom(er)});return n?{initialValue:e,params:n}:null},binding:{reader:function(e){return Ft},constraint:function(e){return hr(e.params)},writer:function(e){return Jn}},controller:function(e){var t,n=e.document,r=e.value,i=e.constraint;return i&&Ct(i,Pt)?new Tt(n,{props:K.fromObject({options:null!==(t=or(i))&&void 0!==t?t:[]}),value:r,viewProps:e.viewProps}):new dr(n,{value:r,viewProps:e.viewProps})}},fr=V("col"),mr=v((function e(t,n){h(this,e),this.element=t.createElement("div"),this.element.classList.add(fr()),n.foldable.bindExpandedClass(this.element,fr(void 0,"expanded")),M(n.foldable,"completed",R(this.element,fr(void 0,"cpl")));var r=t.createElement("div");r.classList.add(fr("h")),this.element.appendChild(r);var i=t.createElement("div");i.classList.add(fr("s")),r.appendChild(i),this.swatchElement=i;var o=t.createElement("div");if(o.classList.add(fr("t")),r.appendChild(o),this.textElement=o,"inline"===n.pickerLayout){var a=t.createElement("div");a.classList.add(fr("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}));function br(e,t,n){var r=Kn(e/255,0,1),i=Kn(t/255,0,1),o=Kn(n/255,0,1),a=Math.max(r,i,o),s=Math.min(r,i,o),l=a-s,u=0,c=0,p=(s+a)/2;return 0!==l&&(c=l/(1-Math.abs(a+s-1)),u=(u=r===a?(i-o)/l:i===a?2+(o-r)/l:4+(r-i)/l)/6+(u<0?1:0)),[360*u,100*c,100*p]}function _r(e,t,n){var r,i,o,a=(e%360+360)%360,s=Kn(t/100,0,1),l=Kn(n/100,0,1),u=(1-Math.abs(2*l-1))*s,c=u*(1-Math.abs(a/60%2-1)),p=l-u/2;return a>=0&&a<60?(r=u,i=c,o=0):a>=60&&a<120?(r=c,i=u,o=0):a>=120&&a<180?(r=0,i=u,o=c):a>=180&&a<240?(r=0,i=c,o=u):a>=240&&a<300?(r=c,i=0,o=u):(r=u,i=0,o=c),[255*(r+p),255*(i+p),255*(o+p)]}function gr(e,t,n){var r=Kn(e/255,0,1),i=Kn(t/255,0,1),o=Kn(n/255,0,1),a=Math.max(r,i,o),s=a-Math.min(r,i,o);return[0===s?0:a===r?((i-o)/s%6+6)%6*60:a===i?60*((o-r)/s+2):60*((r-i)/s+4),100*(0===a?0:s/a),100*a]}function wr(e,t,n){var r,i,o,a=Hn(e,360),s=Kn(t/100,0,1),l=Kn(n/100,0,1),u=l*s,c=u*(1-Math.abs(a/60%2-1)),p=l-u;return a>=0&&a<60?(r=u,i=c,o=0):a>=60&&a<120?(r=c,i=u,o=0):a>=120&&a<180?(r=0,i=u,o=c):a>=180&&a<240?(r=0,i=c,o=u):a>=240&&a<300?(r=c,i=0,o=u):(r=u,i=0,o=c),[255*(r+p),255*(i+p),255*(o+p)]}function yr(e,t,n){var r=n+t*(100-Math.abs(2*n-100))/200;return[e,0!==r?t*(100-Math.abs(2*n-100))/r:0,n+t*(100-Math.abs(2*n-100))/200]}function xr(e,t,n){var r=100-Math.abs(n*(200-t)/100-100);return[e,0!==r?t*n/r:0,n*(200-t)/200]}function kr(e){return[e[0],e[1],e[2]]}function Cr(e,t){return[e[0],e[1],e[2],t]}var Pr={hsl:{hsl:function(e,t,n){return[e,t,n]},hsv:yr,rgb:_r},hsv:{hsl:xr,hsv:function(e,t,n){return[e,t,n]},rgb:wr},rgb:{hsl:br,hsv:gr,rgb:function(e,t,n){return[e,t,n]}}};function Er(e,t,n){var r;return(r=Pr[t])[n].apply(r,l(e))}var Sr={hsl:function(e){var t;return[Hn(e[0],360),Kn(e[1],0,100),Kn(e[2],0,100),Kn(null!==(t=e[3])&&void 0!==t?t:1,0,1)]},hsv:function(e){var t;return[Hn(e[0],360),Kn(e[1],0,100),Kn(e[2],0,100),Kn(null!==(t=e[3])&&void 0!==t?t:1,0,1)]},rgb:function(e){var t;return[Kn(e[0],0,255),Kn(e[1],0,255),Kn(e[2],0,255),Kn(null!==(t=e[3])&&void 0!==t?t:1,0,1)]}};function Vr(e,t){return"object"===typeof e&&!w(e)&&t in e&&"number"===typeof e[t]}var Ar=function(){function e(t,n){h(this,e),this.mode_=n,this.comps_=Sr[n](t)}return v(e,[{key:"mode",get:function(){return this.mode_}},{key:"getComponents",value:function(e){return Cr(Er(kr(this.comps_),this.mode_,e||this.mode_),this.comps_[3])}},{key:"toRgbaObject",value:function(){var e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}],[{key:"black",value:function(){return new e([0,0,0],"rgb")}},{key:"fromObject",value:function(t){return new e("a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b],"rgb")}},{key:"toRgbaObject",value:function(e){return e.toRgbaObject()}},{key:"isRgbColorObject",value:function(e){return Vr(e,"r")&&Vr(e,"g")&&Vr(e,"b")}},{key:"isRgbaColorObject",value:function(e){return this.isRgbColorObject(e)&&Vr(e,"a")}},{key:"isColorObject",value:function(e){return this.isRgbColorObject(e)}},{key:"equals",value:function(e,t){if(e.mode_!==t.mode_)return!1;for(var n=e.comps_,r=t.comps_,i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}}]),e}(),Tr=V("colp"),Lr=function(){function e(t,n){h(this,e),this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(Tr());var r=t.createElement("div");r.classList.add(Tr("hsv"));var i=t.createElement("div");i.classList.add(Tr("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);var o=t.createElement("div");o.classList.add(Tr("h")),this.hPaletteView_=n.hPaletteView,o.appendChild(this.hPaletteView_.element),r.appendChild(o),this.element.appendChild(r);var a=t.createElement("div");if(a.classList.add(Tr("rgb")),this.textView_=n.textView,a.appendChild(this.textView_.element),this.element.appendChild(a),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};var s=t.createElement("div");s.classList.add(Tr("a"));var l=t.createElement("div");l.classList.add(Tr("ap")),l.appendChild(this.alphaViews_.palette.element),s.appendChild(l);var u=t.createElement("div");u.classList.add(Tr("at")),u.appendChild(this.alphaViews_.text.element),s.appendChild(u),this.element.appendChild(s)}}return v(e,[{key:"allFocusableElements",get:function(){var e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement].concat(l(this.textView_.textViews.map((function(e){return e.inputElement}))));return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}]),e}();function Mr(e){var t=W;return Y(e,{alpha:t.optional.boolean,expanded:t.optional.boolean,picker:t.optional.custom(tr)})}function Dr(e){return e?.1:1}function Rr(e,t){var n=e.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*t,t):Math.min(parseFloat(e),t)}var Br={deg:function(e){return e},grad:function(e){return 360*e/400},rad:function(e){return 360*e/(2*Math.PI)},turn:function(e){return 360*e}};function Ur(e){var t=e.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(e);var n=parseFloat(t[1]),r=t[2];return Br[r](n)}var Or={"func.rgb":function(e){var t=e.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;var n=[Rr(t[1],255),Rr(t[2],255),Rr(t[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new Ar(n,"rgb")},"func.rgba":function(e){var t=e.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;var n=[Rr(t[1],255),Rr(t[2],255),Rr(t[3],255),Rr(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new Ar(n,"rgb")},"func.hsl":function(e){var t=e.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;var n=[Ur(t[1]),Rr(t[2],100),Rr(t[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new Ar(n,"hsl")},"func.hsla":function(e){var t=e.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;var n=[Ur(t[1]),Rr(t[2],100),Rr(t[3],100),Rr(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new Ar(n,"hsl")},"hex.rgb":function(e){var t=e.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return new Ar([parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)],"rgb");var n=e.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new Ar([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)],"rgb"):null},"hex.rgba":function(e){var t=e.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return new Ar([parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),jn(parseInt(t[4]+t[4],16),0,255,0,1)],"rgb");var n=e.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new Ar([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),jn(parseInt(n[4],16),0,255,0,1)],"rgb"):null}};function Fr(e){return Object.keys(Or).reduce((function(t,n){return t||((0,Or[n])(e)?n:null)}),null)}var Ir=function(e){var t=Fr(e);return t?Or[t](e):null};function jr(e){return"func.hsla"===e||"func.rgba"===e||"hex.rgba"===e}function Nr(e){if("string"===typeof e){var t=Ir(e);if(t)return t}return Ar.black()}function Kr(e){var t=Kn(Math.floor(e),0,255).toString(16);return 1===t.length?"0".concat(t):t}function Hr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",n=kr(e.getComponents("rgb")).map(Kr).join("");return"".concat(t).concat(n)}function Gr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",n=e.getComponents("rgb"),r=[n[0],n[1],n[2],255*n[3]].map(Kr).join("");return"".concat(t).concat(r)}function zr(e){var t=kn(0),n=kr(e.getComponents("rgb")).map((function(e){return t(e)}));return"rgb(".concat(n.join(", "),")")}function qr(e){var t=kn(2),n=kn(0),r=e.getComponents("rgb").map((function(e,r){return(3===r?t:n)(e)}));return"rgba(".concat(r.join(", "),")")}function Zr(e){var t=[kn(0),Pn,Pn],n=kr(e.getComponents("hsl")).map((function(e,n){return t[n](e)}));return"hsl(".concat(n.join(", "),")")}function Wr(e){var t=[kn(0),Pn,Pn,kn(2)],n=e.getComponents("hsl").map((function(e,n){return t[n](e)}));return"hsla(".concat(n.join(", "),")")}var Yr={"func.hsl":Zr,"func.hsla":Wr,"func.rgb":zr,"func.rgba":qr,"hex.rgb":Hr,"hex.rgba":Gr};function Xr(e){return Yr[e]}var $r=V("apl"),Qr=function(){function e(t,n){h(this,e),this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add($r()),n.viewProps.bindTabIndex(this.element);var r=t.createElement("div");r.classList.add($r("b")),this.element.appendChild(r);var i=t.createElement("div");i.classList.add($r("c")),r.appendChild(i),this.colorElem_=i;var o=t.createElement("div");o.classList.add($r("m")),this.element.appendChild(o),this.markerElem_=o;var a=t.createElement("div");a.classList.add($r("p")),this.markerElem_.appendChild(a),this.previewElem_=a,this.update_()}return v(e,[{key:"update_",value:function(){var e=this.value.rawValue,t=e.getComponents("rgb"),n=new Ar([t[0],t[1],t[2],0],"rgb"),r=new Ar([t[0],t[1],t[2],255],"rgb"),i=["to right",qr(n),qr(r)];this.colorElem_.style.background="linear-gradient(".concat(i.join(","),")"),this.previewElem_.style.backgroundColor=qr(e);var o=jn(t[3],0,1,0,100);this.markerElem_.style.left="".concat(o,"%")}},{key:"onValueChange_",value:function(){this.update_()}}]),e}(),Jr=function(){function e(t,n){h(this,e),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Qr(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return v(e,[{key:"handlePointerEvent_",value:function(e,t){if(e.point){var n=e.point.x/e.bounds.width,r=this.value.rawValue.getComponents("hsv"),i=d(r,3),o=i[0],a=i[1],s=i[2];this.value.setRawValue(new Ar([o,a,s,n],"hsv"),t)}}},{key:"onPointerDown_",value:function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(e){var t=Dn(Dr(!0),Bn(e));if(0!==t){var n=this.value.rawValue.getComponents("hsv"),r=d(n,4),i=r[0],o=r[1],a=r[2],s=r[3];this.value.setRawValue(new Ar([i,o,a,s+t],"hsv"),{forceEmit:!1,last:!1})}}},{key:"onKeyUp_",value:function(e){0!==Dn(Dr(!0),Bn(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),e}(),ei=V("coltxt");function ti(e){var t=e.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return t.appendChild(n.reduce((function(t,n){var r=e.createElement("option");return r.textContent=n.text,r.value=n.value,t.appendChild(r),t}),e.createDocumentFragment())),t}var ni=function(){function e(t,n){var r=this;h(this,e),this.element=t.createElement("div"),this.element.classList.add(ei());var i=t.createElement("div");i.classList.add(ei("m")),this.modeElem_=ti(t),this.modeElem_.classList.add(ei("ms")),i.appendChild(this.modeSelectElement);var o=t.createElement("div");o.classList.add(ei("mm")),o.appendChild(ce(t,"dropdown")),i.appendChild(o),this.element.appendChild(i);var a=t.createElement("div");a.classList.add(ei("w")),this.element.appendChild(a),this.textsElem_=a,this.textViews_=n.textViews,this.applyTextViews_(),L(n.colorMode,(function(e){r.modeElem_.value=e}))}return v(e,[{key:"modeSelectElement",get:function(){return this.modeElem_}},{key:"textViews",get:function(){return this.textViews_},set:function(e){this.textViews_=e,this.applyTextViews_()}},{key:"applyTextViews_",value:function(){var e=this;he(this.textsElem_);var t=this.element.ownerDocument;this.textViews_.forEach((function(n){var r=t.createElement("div");r.classList.add(ei("c")),r.appendChild(n.element),e.textsElem_.appendChild(r)}))}}]),e}(),ri=kn(0),ii={rgb:function(){return new Et({min:0,max:255})},hsl:function(e){return new Et(0===e?{min:0,max:360}:{min:0,max:100})},hsv:function(e){return new Et(0===e?{min:0,max:360}:{min:0,max:100})}};function oi(e,t,n){return new qn(e,{arrayPosition:0===n?"fst":2===n?"lst":"mid",baseStep:Dr(!1),parser:t.parser,props:K.fromObject({draggingScale:1,formatter:ri}),value:N(0,{constraint:ii[t.colorMode](n)}),viewProps:t.viewProps})}var ai=function(){function e(t,n){h(this,e),this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.parser_=n.parser,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=N(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new ni(t,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}return v(e,[{key:"createComponentControllers_",value:function(e){var t=this,n={colorMode:this.colorMode.rawValue,parser:this.parser_,viewProps:this.viewProps},r=[oi(e,n,0),oi(e,n,1),oi(e,n,2)];return r.forEach((function(e,n){Mn({primary:t.value,secondary:e.value,forward:function(e){return e.rawValue.getComponents(t.colorMode.rawValue)[n]},backward:function(e,r){var i=t.colorMode.rawValue,o=e.rawValue.getComponents(i);return o[n]=r.rawValue,new Ar(Cr(kr(o),o[3]),i)}})})),r}},{key:"onModeSelectChange_",value:function(e){var t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}]),e}(),si=V("hpl"),li=function(){function e(t,n){h(this,e),this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(si()),n.viewProps.bindTabIndex(this.element);var r=t.createElement("div");r.classList.add(si("c")),this.element.appendChild(r);var i=t.createElement("div");i.classList.add(si("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}return v(e,[{key:"update_",value:function(){var e=this.value.rawValue.getComponents("hsv"),t=d(e,1)[0];this.markerElem_.style.backgroundColor=zr(new Ar([t,100,100],"hsv"));var n=jn(t,0,360,0,100);this.markerElem_.style.left="".concat(n,"%")}},{key:"onValueChange_",value:function(){this.update_()}}]),e}(),ui=function(){function e(t,n){h(this,e),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new li(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return v(e,[{key:"handlePointerEvent_",value:function(e,t){if(e.point){var n=jn(e.point.x,0,e.bounds.width,0,360),r=this.value.rawValue.getComponents("hsv"),i=d(r,4),o=i[1],a=i[2],s=i[3];this.value.setRawValue(new Ar([n,o,a,s],"hsv"),t)}}},{key:"onPointerDown_",value:function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(e){var t=Dn(Dr(!1),Bn(e));if(0!==t){var n=this.value.rawValue.getComponents("hsv"),r=d(n,4),i=r[0],o=r[1],a=r[2],s=r[3];this.value.setRawValue(new Ar([i+t,o,a,s],"hsv"),{forceEmit:!1,last:!1})}}},{key:"onKeyUp_",value:function(e){0!==Dn(Dr(!1),Bn(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),e}(),ci=V("svp"),pi=64,di=function(){function e(t,n){h(this,e),this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(ci()),n.viewProps.bindTabIndex(this.element);var r=t.createElement("canvas");r.height=pi,r.width=pi,r.classList.add(ci("c")),this.element.appendChild(r),this.canvasElement=r;var i=t.createElement("div");i.classList.add(ci("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}return v(e,[{key:"update_",value:function(){var e=le(this.canvasElement);if(e){for(var t=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,r=this.canvasElement.height,i=e.getImageData(0,0,n,r),o=i.data,a=0;a<r;a++)for(var s=0;s<n;s++){var l=jn(s,0,n,0,100),u=jn(a,0,r,100,0),c=wr(t[0],l,u),p=4*(a*n+s);o[p]=c[0],o[p+1]=c[1],o[p+2]=c[2],o[p+3]=255}e.putImageData(i,0,0);var d=jn(t[1],0,100,0,100);this.markerElem_.style.left="".concat(d,"%");var h=jn(t[2],0,100,100,0);this.markerElem_.style.top="".concat(h,"%")}}},{key:"onValueChange_",value:function(){this.update_()}}]),e}(),hi=function(){function e(t,n){h(this,e),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new di(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return v(e,[{key:"handlePointerEvent_",value:function(e,t){if(e.point){var n=jn(e.point.x,0,e.bounds.width,0,100),r=jn(e.point.y,0,e.bounds.height,100,0),i=this.value.rawValue.getComponents("hsv"),o=d(i,4),a=o[0],s=o[3];this.value.setRawValue(new Ar([a,n,r,s],"hsv"),t)}}},{key:"onPointerDown_",value:function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(e){On(e.key)&&e.preventDefault();var t=this.value.rawValue.getComponents("hsv"),n=d(t,4),r=n[0],i=n[1],o=n[2],a=n[3],s=Dr(!1),l=Dn(s,Bn(e)),u=Dn(s,Rn(e));0===l&&0===u||this.value.setRawValue(new Ar([r,i+l,o+u,a],"hsv"),{forceEmit:!1,last:!1})}},{key:"onKeyUp_",value:function(e){var t=Dr(!1),n=Dn(t,Bn(e)),r=Dn(t,Rn(e));0===n&&0===r||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),e}(),vi=function(){function e(t,n){h(this,e),this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new ui(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new hi(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new Jr(t,{value:this.value,viewProps:this.viewProps}),text:new qn(t,{parser:wn,baseStep:.1,props:K.fromObject({draggingScale:.01,formatter:kn(2)}),value:N(0,{constraint:new Et({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Mn({primary:this.value,secondary:this.alphaIcs_.text.value,forward:function(e){return e.rawValue.getComponents()[3]},backward:function(e,t){var n=e.rawValue.getComponents();return n[3]=t.rawValue,new Ar(n,e.rawValue.mode)}}),this.textC_=new ai(t,{parser:wn,value:this.value,viewProps:this.viewProps}),this.view=new Lr(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}return v(e,[{key:"textController",get:function(){return this.textC_}}]),e}(),fi=V("colsw"),mi=function(){function e(t,n){h(this,e),this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=t.createElement("div"),this.element.classList.add(fi()),n.viewProps.bindClassModifiers(this.element);var r=t.createElement("div");r.classList.add(fi("sw")),this.element.appendChild(r),this.swatchElem_=r;var i=t.createElement("button");i.classList.add(fi("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}return v(e,[{key:"update_",value:function(){var e=this.value.rawValue;this.swatchElem_.style.backgroundColor=Gr(e)}},{key:"onValueChange_",value:function(){this.update_()}}]),e}(),bi=v((function e(t,n){h(this,e),this.value=n.value,this.viewProps=n.viewProps,this.view=new mi(t,{value:this.value,viewProps:this.viewProps})})),_i=function(){function e(t,n){var r=this;h(this,e),this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=ke.create(n.expanded),this.swatchC_=new bi(t,{value:this.value,viewProps:this.viewProps});var i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new Ut(t,{parser:n.parser,props:K.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new mr(t,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===n.pickerLayout?new Dt(t,{viewProps:this.viewProps}):null;var o=new vi(t,{supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach((function(e){e.addEventListener("blur",r.onPopupChildBlur_),e.addEventListener("keydown",r.onPopupChildKeydown_)})),this.pickerC_=o,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(o.view.element),Mn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(e){return e.rawValue},backward:function(e,t){return t.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Ee(this.foldable_,this.view.pickerElement))}return v(e,[{key:"textController",get:function(){return this.textC_}},{key:"onButtonBlur_",value:function(e){if(this.popC_){var t=this.view.element,n=g(e.relatedTarget);n&&t.contains(n)||(this.popC_.shows.rawValue=!1)}}},{key:"onButtonClick_",value:function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}},{key:"onPopupChildBlur_",value:function(e){if(this.popC_){var t=this.popC_.view.element,n=fe(e);n&&t.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!ie(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}}},{key:"onPopupChildKeydown_",value:function(e){this.popC_?"Escape"===e.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===e.key&&this.swatchC_.view.buttonElement.focus()}}]),e}();function gi(e){return Ar.isColorObject(e)?Ar.fromObject(e):Ar.black()}function wi(e){return kr(e.getComponents("rgb")).reduce((function(e,t){return e<<8|255&Math.floor(t)}),0)}function yi(e){return e.getComponents("rgb").reduce((function(e,t,n){return e<<8|255&Math.floor(3===n?255*t:t)}),0)>>>0}function xi(e){return new Ar([e>>16&255,e>>8&255,255&e],"rgb")}function ki(e){return new Ar([e>>24&255,e>>16&255,e>>8&255,jn(255&e,0,255,0,1)],"rgb")}function Ci(e){return"number"!==typeof e?Ar.black():xi(e)}function Pi(e){return"number"!==typeof e?Ar.black():ki(e)}function Ei(e){var t=Xr(e);return function(e,n){Jn(e,t(n))}}function Si(e){var t=e?yi:wi;return function(e,n){Jn(e,t(n))}}function Vi(e,t){var n=t.toRgbaObject();e.writeProperty("r",n.r),e.writeProperty("g",n.g),e.writeProperty("b",n.b),e.writeProperty("a",n.a)}function Ai(e,t){var n=t.toRgbaObject();e.writeProperty("r",n.r),e.writeProperty("g",n.g),e.writeProperty("b",n.b)}function Ti(e){return e?Vi:Ai}function Li(e){return"alpha"in e&&!0===e.alpha}function Mi(e){return e?function(e){return Gr(e,"0x")}:function(e){return Hr(e,"0x")}}var Di={id:"input-color-number",type:"input",accept:function(e,t){if("number"!==typeof e)return null;if(!("view"in t))return null;if("color"!==t.view)return null;var n=Mr(t);return n?{initialValue:e,params:n}:null},binding:{reader:function(e){return Li(e.params)?Pi:Ci},equals:Ar.equals,writer:function(e){return Si(Li(e.params))}},controller:function(e){var t=Li(e.params),n="expanded"in e.params?e.params.expanded:void 0,r="picker"in e.params?e.params.picker:void 0;return new _i(e.document,{expanded:null!==n&&void 0!==n&&n,formatter:Mi(t),parser:Ir,pickerLayout:null!==r&&void 0!==r?r:"popup",supportsAlpha:t,value:e.value,viewProps:e.viewProps})}};function Ri(e){return Ar.isRgbaColorObject(e)}var Bi={id:"input-color-object",type:"input",accept:function(e,t){if(!Ar.isColorObject(e))return null;var n=Mr(t);return n?{initialValue:e,params:n}:null},binding:{reader:function(e){return gi},equals:Ar.equals,writer:function(e){return Ti(Ri(e.initialValue))}},controller:function(e){var t=Ar.isRgbaColorObject(e.initialValue),n="expanded"in e.params?e.params.expanded:void 0,r="picker"in e.params?e.params.picker:void 0,i=t?Gr:Hr;return new _i(e.document,{expanded:null!==n&&void 0!==n&&n,formatter:i,parser:Ir,pickerLayout:null!==r&&void 0!==r?r:"popup",supportsAlpha:t,value:e.value,viewProps:e.viewProps})}},Ui={id:"input-color-string",type:"input",accept:function(e,t){if("string"!==typeof e)return null;if("view"in t&&"text"===t.view)return null;if(!Fr(e))return null;var n=Mr(t);return n?{initialValue:e,params:n}:null},binding:{reader:function(e){return Nr},equals:Ar.equals,writer:function(e){var t=Fr(e.initialValue);if(!t)throw k.shouldNeverHappen();return Ei(t)}},controller:function(e){var t=Fr(e.initialValue);if(!t)throw k.shouldNeverHappen();var n=Xr(t),r="expanded"in e.params?e.params.expanded:void 0,i="picker"in e.params?e.params.picker:void 0;return new _i(e.document,{expanded:null!==r&&void 0!==r&&r,formatter:n,parser:Ir,pickerLayout:null!==i&&void 0!==i?i:"popup",supportsAlpha:jr(t),value:e.value,viewProps:e.viewProps})}},Oi=function(){function e(t){h(this,e),this.components=t.components,this.asm_=t.assembly}return v(e,[{key:"constrain",value:function(e){var t=this,n=this.asm_.toComponents(e).map((function(e,n){var r,i;return null!==(i=null===(r=t.components[n])||void 0===r?void 0:r.constrain(e))&&void 0!==i?i:e}));return this.asm_.fromComponents(n)}}]),e}(),Fi=V("pndtxt"),Ii=v((function e(t,n){var r=this;h(this,e),this.textViews=n.textViews,this.element=t.createElement("div"),this.element.classList.add(Fi()),this.textViews.forEach((function(e){var n=t.createElement("div");n.classList.add(Fi("a")),n.appendChild(e.element),r.element.appendChild(n)}))}));function ji(e,t,n){return new qn(e,{arrayPosition:0===n?"fst":n===t.axes.length-1?"lst":"mid",baseStep:t.axes[n].baseStep,parser:t.parser,props:t.axes[n].textProps,value:N(0,{constraint:t.axes[n].constraint}),viewProps:t.viewProps})}var Ni=v((function e(t,n){var r=this;h(this,e),this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((function(e,r){return ji(t,n,r)})),this.acs_.forEach((function(e,t){Mn({primary:r.value,secondary:e.value,forward:function(e){return n.assembly.toComponents(e.rawValue)[t]},backward:function(e,r){var i=n.assembly.toComponents(e.rawValue);return i[t]=r.rawValue,n.assembly.fromComponents(i)}})})),this.view=new Ii(t,{textViews:this.acs_.map((function(e){return e.view}))})}));function Ki(e){return"step"in e&&!w(e.step)?new St(e.step):null}function Hi(e){return"max"in e&&!w(e.max)||"min"in e&&!w(e.min)?new Et({max:e.max,min:e.min}):null}function Gi(e){var t=[],n=Ki(e);n&&t.push(n);var r=Hi(e);r&&t.push(r);var i=ir(e.options);return i&&t.push(i),new kt(t)}function zi(e){var t=e?Ct(e,Et):null;return t?[t.minValue,t.maxValue]:[void 0,void 0]}function qi(e){var t=zi(e),n=d(t,2),r=n[0],i=n[1];return[null!==r&&void 0!==r?r:0,null!==i&&void 0!==i?i:100]}var Zi={id:"input-number",type:"input",accept:function(e,t){if("number"!==typeof e)return null;var n=W,r=Y(t,{format:n.optional.function,max:n.optional.number,min:n.optional.number,options:n.optional.custom(er),step:n.optional.number});return r?{initialValue:e,params:r}:null},binding:{reader:function(e){return yn},constraint:function(e){return Gi(e.params)},writer:function(e){return Jn}},controller:function(e){var t,n,r=e.value,i=e.constraint;if(i&&Ct(i,Pt))return new Tt(e.document,{props:K.fromObject({options:null!==(t=or(i))&&void 0!==t?t:[]}),value:r,viewProps:e.viewProps});var o=null!==(n="format"in e.params?e.params.format:void 0)&&void 0!==n?n:kn(sr(i,r.rawValue));if(i&&Ct(i,Et)){var a=qi(i),s=d(a,2),l=s[0],u=s[1];return new Qn(e.document,{baseStep:lr(i),parser:wn,sliderProps:K.fromObject({maxValue:u,minValue:l}),textProps:K.fromObject({draggingScale:ur(i,r.rawValue),formatter:o}),value:r,viewProps:e.viewProps})}return new qn(e.document,{baseStep:lr(i),parser:wn,props:K.fromObject({draggingScale:ur(i,r.rawValue),formatter:o}),value:r,viewProps:e.viewProps})}},Wi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(this,e),this.x=t,this.y=n}return v(e,[{key:"getComponents",value:function(){return[this.x,this.y]}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}}],[{key:"isObject",value:function(e){if(w(e))return!1;var t=e.x,n=e.y;return"number"===typeof t&&"number"===typeof n}},{key:"equals",value:function(e,t){return e.x===t.x&&e.y===t.y}}]),e}(),Yi={toComponents:function(e){return e.getComponents()},fromComponents:function(e){return o(Wi,l(e))}},Xi=V("p2d"),$i=v((function e(t,n){h(this,e),this.element=t.createElement("div"),this.element.classList.add(Xi()),n.viewProps.bindClassModifiers(this.element),L(n.expanded,R(this.element,Xi(void 0,"expanded")));var r=t.createElement("div");r.classList.add(Xi("h")),this.element.appendChild(r);var i=t.createElement("button");i.classList.add(Xi("b")),i.appendChild(ce(t,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;var o=t.createElement("div");if(o.classList.add(Xi("t")),r.appendChild(o),this.textElement=o,"inline"===n.pickerLayout){var a=t.createElement("div");a.classList.add(Xi("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null})),Qi=V("p2dp"),Ji=function(){function e(t,n){h(this,e),this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=n.invertsY,this.maxValue_=n.maxValue,this.element=t.createElement("div"),this.element.classList.add(Qi()),"popup"===n.layout&&this.element.classList.add(Qi(void 0,"p"));var r=t.createElement("div");r.classList.add(Qi("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;var i=t.createElementNS(te,"svg");i.classList.add(Qi("g")),this.padElement.appendChild(i),this.svgElem_=i;var o=t.createElementNS(te,"line");o.classList.add(Qi("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);var a=t.createElementNS(te,"line");a.classList.add(Qi("ax")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","0"),a.setAttributeNS(null,"x2","50%"),a.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(a);var s=t.createElementNS(te,"line");s.classList.add(Qi("l")),s.setAttributeNS(null,"x1","50%"),s.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(s),this.lineElem_=s;var l=t.createElement("div");l.classList.add(Qi("m")),this.padElement.appendChild(l),this.markerElem_=l,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}return v(e,[{key:"allFocusableElements",get:function(){return[this.padElement]}},{key:"update_",value:function(){var e=this.value.rawValue.getComponents(),t=d(e,2),n=t[0],r=t[1],i=this.maxValue_,o=jn(n,-i,+i,0,100),a=jn(r,-i,+i,0,100),s=this.invertsY_?100-a:a;this.lineElem_.setAttributeNS(null,"x2","".concat(o,"%")),this.lineElem_.setAttributeNS(null,"y2","".concat(s,"%")),this.markerElem_.style.left="".concat(o,"%"),this.markerElem_.style.top="".concat(s,"%")}},{key:"onValueChange_",value:function(){this.update_()}},{key:"onFoldableChange_",value:function(){this.update_()}}]),e}();function eo(e,t,n){return[Dn(t[0],Bn(e)),Dn(t[1],Rn(e))*(n?1:-1)]}var to=function(){function e(t,n){h(this,e),this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.baseSteps_=n.baseSteps,this.maxValue_=n.maxValue,this.invertsY_=n.invertsY,this.view=new Ji(t,{invertsY:this.invertsY_,layout:n.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}return v(e,[{key:"handlePointerEvent_",value:function(e,t){if(e.point){var n=this.maxValue_,r=jn(e.point.x,0,e.bounds.width,-n,+n),i=jn(this.invertsY_?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-n,+n);this.value.setRawValue(new Wi(r,i),t)}}},{key:"onPointerDown_",value:function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}},{key:"onPadKeyDown_",value:function(e){On(e.key)&&e.preventDefault();var t=eo(e,this.baseSteps_,this.invertsY_),n=d(t,2),r=n[0],i=n[1];0===r&&0===i||this.value.setRawValue(new Wi(this.value.rawValue.x+r,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}},{key:"onPadKeyUp_",value:function(e){var t=eo(e,this.baseSteps_,this.invertsY_),n=d(t,2),r=n[0],i=n[1];0===r&&0===i||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),e}(),no=function(){function e(t,n){var r,i,o=this;h(this,e),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=ke.create(n.expanded),this.popC_="popup"===n.pickerLayout?new Dt(t,{viewProps:this.viewProps}):null;var a=new to(t,{baseSteps:[n.axes[0].baseStep,n.axes[1].baseStep],invertsY:n.invertsY,layout:n.pickerLayout,maxValue:n.maxValue,value:this.value,viewProps:this.viewProps});a.view.allFocusableElements.forEach((function(e){e.addEventListener("blur",o.onPopupChildBlur_),e.addEventListener("keydown",o.onPopupChildKeydown_)})),this.pickerC_=a,this.textC_=new Ni(t,{assembly:Yi,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new $i(t,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(r=this.view.buttonElement)||void 0===r||r.addEventListener("blur",this.onPadButtonBlur_),null===(i=this.view.buttonElement)||void 0===i||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Mn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(e){return e.rawValue},backward:function(e,t){return t.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Ee(this.foldable_,this.view.pickerElement))}return v(e,[{key:"onPadButtonBlur_",value:function(e){if(this.popC_){var t=this.view.element,n=g(e.relatedTarget);n&&t.contains(n)||(this.popC_.shows.rawValue=!1)}}},{key:"onPadButtonClick_",value:function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}},{key:"onPopupChildBlur_",value:function(e){if(this.popC_){var t=this.popC_.view.element,n=fe(e);n&&t.contains(n)||n&&n===this.view.buttonElement&&!ie(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}}},{key:"onPopupChildKeydown_",value:function(e){this.popC_?"Escape"===e.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===e.key&&this.view.buttonElement.focus()}}]),e}();function ro(e){return Wi.isObject(e)?new Wi(e.x,e.y):new Wi}function io(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y)}function oo(e){if(e){var t=[];return w(e.step)||t.push(new St(e.step)),w(e.max)&&w(e.min)||t.push(new Et({max:e.max,min:e.min})),new kt(t)}}function ao(e){return new Oi({assembly:Yi,components:[oo("x"in e?e.x:void 0),oo("y"in e?e.y:void 0)]})}function so(e,t){var n=e&&Ct(e,Et);if(n)return Math.max(Math.abs(n.minValue||0),Math.abs(n.maxValue||0));var r=lr(e);return Math.max(10*Math.abs(r),10*Math.abs(t))}function lo(e,t){var n=t instanceof Oi?t.components[0]:void 0,r=t instanceof Oi?t.components[1]:void 0,i=so(n,e.x),o=so(r,e.y);return Math.max(i,o)}function uo(e,t){return{baseStep:lr(t),constraint:t,textProps:K.fromObject({draggingScale:ur(t,e),formatter:kn(sr(t,e))})}}function co(e){if(!("y"in e))return!1;var t=e.y;return!!t&&"inverted"in t&&!!t.inverted}var po={id:"input-point2d",type:"input",accept:function(e,t){if(!Wi.isObject(e))return null;var n=W,r=Y(t,{expanded:n.optional.boolean,picker:n.optional.custom(tr),x:n.optional.custom(nr),y:n.optional.object({inverted:n.optional.boolean,max:n.optional.number,min:n.optional.number,step:n.optional.number})});return r?{initialValue:e,params:r}:null},binding:{reader:function(e){return ro},constraint:function(e){return ao(e.params)},equals:Wi.equals,writer:function(e){return io}},controller:function(e){var t=e.document,n=e.value,r=e.constraint;if(!(r instanceof Oi))throw k.shouldNeverHappen();var i="expanded"in e.params?e.params.expanded:void 0,o="picker"in e.params?e.params.picker:void 0;return new no(t,{axes:[uo(n.rawValue.x,r.components[0]),uo(n.rawValue.y,r.components[1])],expanded:null!==i&&void 0!==i&&i,invertsY:co(e.params),maxValue:lo(n.rawValue,r),parser:wn,pickerLayout:null!==o&&void 0!==o?o:"popup",value:n,viewProps:e.viewProps})}},ho=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;h(this,e),this.x=t,this.y=n,this.z=r}return v(e,[{key:"getComponents",value:function(){return[this.x,this.y,this.z]}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z}}}],[{key:"isObject",value:function(e){if(w(e))return!1;var t=e.x,n=e.y,r=e.z;return"number"===typeof t&&"number"===typeof n&&"number"===typeof r}},{key:"equals",value:function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}}]),e}(),vo={toComponents:function(e){return e.getComponents()},fromComponents:function(e){return o(ho,l(e))}};function fo(e){return ho.isObject(e)?new ho(e.x,e.y,e.z):new ho}function mo(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z)}function bo(e){if(e){var t=[];return w(e.step)||t.push(new St(e.step)),w(e.max)&&w(e.min)||t.push(new Et({max:e.max,min:e.min})),new kt(t)}}function _o(e){return new Oi({assembly:vo,components:[bo("x"in e?e.x:void 0),bo("y"in e?e.y:void 0),bo("z"in e?e.z:void 0)]})}function go(e,t){return{baseStep:lr(t),constraint:t,textProps:K.fromObject({draggingScale:ur(t,e),formatter:kn(sr(t,e))})}}var wo={id:"input-point3d",type:"input",accept:function(e,t){if(!ho.isObject(e))return null;var n=W,r=Y(t,{x:n.optional.custom(nr),y:n.optional.custom(nr),z:n.optional.custom(nr)});return r?{initialValue:e,params:r}:null},binding:{reader:function(e){return fo},constraint:function(e){return _o(e.params)},equals:ho.equals,writer:function(e){return mo}},controller:function(e){var t=e.value,n=e.constraint;if(!(n instanceof Oi))throw k.shouldNeverHappen();return new Ni(e.document,{assembly:vo,axes:[go(t.rawValue.x,n.components[0]),go(t.rawValue.y,n.components[1]),go(t.rawValue.z,n.components[2])],parser:wn,value:t,viewProps:e.viewProps})}},yo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;h(this,e),this.x=t,this.y=n,this.z=r,this.w=i}return v(e,[{key:"getComponents",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}],[{key:"isObject",value:function(e){if(w(e))return!1;var t=e.x,n=e.y,r=e.z,i=e.w;return"number"===typeof t&&"number"===typeof n&&"number"===typeof r&&"number"===typeof i}},{key:"equals",value:function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}}]),e}(),xo={toComponents:function(e){return e.getComponents()},fromComponents:function(e){return o(yo,l(e))}};function ko(e){return yo.isObject(e)?new yo(e.x,e.y,e.z,e.w):new yo}function Co(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z),e.writeProperty("w",t.w)}function Po(e){if(e){var t=[];return w(e.step)||t.push(new St(e.step)),w(e.max)&&w(e.min)||t.push(new Et({max:e.max,min:e.min})),new kt(t)}}function Eo(e){return new Oi({assembly:xo,components:[Po("x"in e?e.x:void 0),Po("y"in e?e.y:void 0),Po("z"in e?e.z:void 0),Po("w"in e?e.w:void 0)]})}function So(e,t){return{baseStep:lr(t),constraint:t,textProps:K.fromObject({draggingScale:ur(t,e),formatter:kn(sr(t,e))})}}var Vo={id:"input-point4d",type:"input",accept:function(e,t){if(!yo.isObject(e))return null;var n=W,r=Y(t,{x:n.optional.custom(nr),y:n.optional.custom(nr),z:n.optional.custom(nr),w:n.optional.custom(nr)});return r?{initialValue:e,params:r}:null},binding:{reader:function(e){return ko},constraint:function(e){return Eo(e.params)},equals:yo.equals,writer:function(e){return Co}},controller:function(e){var t=e.value,n=e.constraint;if(!(n instanceof Oi))throw k.shouldNeverHappen();return new Ni(e.document,{assembly:xo,axes:t.rawValue.getComponents().map((function(e,t){return So(e,n.components[t])})),parser:wn,value:t,viewProps:e.viewProps})}};function Ao(e){var t=[],n=ir(e.options);return n&&t.push(n),new kt(t)}var To={id:"input-string",type:"input",accept:function(e,t){if("string"!==typeof e)return null;var n=Y(t,{options:W.optional.custom(er)});return n?{initialValue:e,params:n}:null},binding:{reader:function(e){return En},constraint:function(e){return Ao(e.params)},writer:function(e){return Jn}},controller:function(e){var t,n=e.document,r=e.value,i=e.constraint;return i&&Ct(i,Pt)?new Tt(n,{props:K.fromObject({options:null!==(t=or(i))&&void 0!==t?t:[]}),value:r,viewProps:e.viewProps}):new Ut(n,{parser:function(e){return e},props:K.fromObject({formatter:Sn}),value:r,viewProps:e.viewProps})}},Lo={monitor:{defaultInterval:200,defaultLineCount:3}},Mo=V("mll"),Do=function(){function e(t,n){h(this,e),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=t.createElement("div"),this.element.classList.add(Mo()),n.viewProps.bindClassModifiers(this.element);var r=t.createElement("textarea");r.classList.add(Mo("i")),r.style.height="calc(var(--bld-us) * ".concat(n.lineCount,")"),r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}return v(e,[{key:"update_",value:function(){var e=this,t=this.textareaElem_,n=t.scrollTop===t.scrollHeight-t.clientHeight,r=[];this.value.rawValue.forEach((function(t){void 0!==t&&r.push(e.formatter_(t))})),t.textContent=r.join("\n"),n&&(t.scrollTop=t.scrollHeight)}},{key:"onValueUpdate_",value:function(){this.update_()}}]),e}(),Ro=v((function e(t,n){h(this,e),this.value=n.value,this.viewProps=n.viewProps,this.view=new Do(t,{formatter:n.formatter,lineCount:n.lineCount,value:this.value,viewProps:this.viewProps})})),Bo=V("sgl"),Uo=function(){function e(t,n){h(this,e),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=t.createElement("div"),this.element.classList.add(Bo()),n.viewProps.bindClassModifiers(this.element);var r=t.createElement("input");r.classList.add(Bo("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}return v(e,[{key:"update_",value:function(){var e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=void 0!==t?this.formatter_(t):""}},{key:"onValueUpdate_",value:function(){this.update_()}}]),e}(),Oo=v((function e(t,n){h(this,e),this.value=n.value,this.viewProps=n.viewProps,this.view=new Uo(t,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})})),Fo={id:"monitor-bool",type:"monitor",accept:function(e,t){if("boolean"!==typeof e)return null;var n=Y(t,{lineCount:W.optional.number});return n?{initialValue:e,params:n}:null},binding:{reader:function(e){return Ft}},controller:function(e){var t;return 1===e.value.rawValue.length?new Oo(e.document,{formatter:It,value:e.value,viewProps:e.viewProps}):new Ro(e.document,{formatter:It,lineCount:null!==(t=e.params.lineCount)&&void 0!==t?t:Lo.monitor.defaultLineCount,value:e.value,viewProps:e.viewProps})}},Io=function(){function e(){h(this,e),this.emitter=new E,this.index_=-1}return v(e,[{key:"index",get:function(){return this.index_},set:function(e){this.index_!==e&&(this.index_=e,this.emitter.emit("change",{index:e,sender:this}))}}]),e}(),jo=V("grl"),No=function(){function e(t,n){h(this,e),this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(jo()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.minValue_=n.minValue,this.maxValue_=n.maxValue,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);var r=t.createElementNS(te,"svg");r.classList.add(jo("g")),r.style.height="calc(var(--bld-us) * ".concat(n.lineCount,")"),this.element.appendChild(r),this.svgElem_=r;var i=t.createElementNS(te,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;var o=t.createElement("div");o.classList.add(jo("t"),V("tt")()),this.element.appendChild(o),this.tooltipElem_=o,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}return v(e,[{key:"graphElement",get:function(){return this.svgElem_}},{key:"update_",value:function(){var e=this.svgElem_.getBoundingClientRect(),t=this.value.rawValue.length-1,n=this.minValue_,r=this.maxValue_,i=[];this.value.rawValue.forEach((function(o,a){if(void 0!==o){var s=jn(a,0,t,0,e.width),l=jn(o,n,r,e.height,0);i.push([s,l].join(","))}})),this.lineElem_.setAttributeNS(null,"points",i.join(" "));var o=this.tooltipElem_,a=this.value.rawValue[this.cursor_.index];if(void 0!==a){var s=jn(this.cursor_.index,0,t,0,e.width),l=jn(a,n,r,e.height,0);o.style.left="".concat(s,"px"),o.style.top="".concat(l,"px"),o.textContent="".concat(this.formatter_(a)),o.classList.contains(jo("t","a"))||(o.classList.add(jo("t","a"),jo("t","in")),ne(o),o.classList.remove(jo("t","in")))}else o.classList.remove(jo("t","a"))}},{key:"onValueUpdate_",value:function(){this.update_()}},{key:"onCursorChange_",value:function(){this.update_()}}]),e}(),Ko=function(){function e(t,n){if(h(this,e),this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.cursor_=new Io,this.view=new No(t,{cursor:this.cursor_,formatter:n.formatter,lineCount:n.lineCount,maxValue:n.maxValue,minValue:n.minValue,value:this.value,viewProps:this.viewProps}),ie(t)){var r=new In(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}return v(e,[{key:"onGraphMouseLeave_",value:function(){this.cursor_.index=-1}},{key:"onGraphMouseMove_",value:function(e){var t=this.view.element.getBoundingClientRect();this.cursor_.index=Math.floor(jn(e.offsetX,0,t.width,0,this.value.rawValue.length))}},{key:"onGraphPointerDown_",value:function(e){this.onGraphPointerMove_(e)}},{key:"onGraphPointerMove_",value:function(e){e.data.point?this.cursor_.index=Math.floor(jn(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.index=-1}},{key:"onGraphPointerUp_",value:function(){this.cursor_.index=-1}}]),e}();function Ho(e){return"format"in e&&!w(e.format)?e.format:kn(2)}function Go(e){var t;return 1===e.value.rawValue.length?new Oo(e.document,{formatter:Ho(e.params),value:e.value,viewProps:e.viewProps}):new Ro(e.document,{formatter:Ho(e.params),lineCount:null!==(t=e.params.lineCount)&&void 0!==t?t:Lo.monitor.defaultLineCount,value:e.value,viewProps:e.viewProps})}function zo(e){var t,n,r;return new Ko(e.document,{formatter:Ho(e.params),lineCount:null!==(t=e.params.lineCount)&&void 0!==t?t:Lo.monitor.defaultLineCount,maxValue:null!==(n="max"in e.params?e.params.max:null)&&void 0!==n?n:100,minValue:null!==(r="min"in e.params?e.params.min:null)&&void 0!==r?r:0,value:e.value,viewProps:e.viewProps})}function qo(e){return"view"in e&&"graph"===e.view}var Zo={id:"monitor-number",type:"monitor",accept:function(e,t){if("number"!==typeof e)return null;var n=W,r=Y(t,{format:n.optional.function,lineCount:n.optional.number,max:n.optional.number,min:n.optional.number,view:n.optional.string});return r?{initialValue:e,params:r}:null},binding:{defaultBufferSize:function(e){return qo(e)?64:1},reader:function(e){return yn}},controller:function(e){return qo(e.params)?zo(e):Go(e)}},Wo={id:"monitor-string",type:"monitor",accept:function(e,t){if("string"!==typeof e)return null;var n=W,r=Y(t,{lineCount:n.optional.number,multiline:n.optional.boolean});return r?{initialValue:e,params:r}:null},binding:{reader:function(e){return En}},controller:function(e){var t,n=e.value;return n.rawValue.length>1||"multiline"in e.params&&e.params.multiline?new Ro(e.document,{formatter:Sn,lineCount:null!==(t=e.params.lineCount)&&void 0!==t?t:Lo.monitor.defaultLineCount,value:n,viewProps:e.viewProps}):new Oo(e.document,{formatter:Sn,value:n,viewProps:e.viewProps})}},Yo=function(){function e(t){h(this,e),this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new E,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}return v(e,[{key:"read",value:function(){var e=this.target.read();void 0!==e&&(this.value.rawValue=this.reader(e))}},{key:"write_",value:function(e){this.writer(this.target,e)}},{key:"onValueChange_",value:function(e){this.write_(e.rawValue),this.emitter.emit("change",{options:e.options,rawValue:e.rawValue,sender:this})}}]),e}();function Xo(e,t){var n=e.accept(t.target.read(),t.params);if(w(n))return null;var r=W,i={target:t.target,initialValue:n.initialValue,params:n.params},o=e.binding.reader(i),a=e.binding.constraint?e.binding.constraint(i):void 0,s=N(o(n.initialValue),{constraint:a,equals:e.binding.equals}),l=new Yo({reader:o,target:t.target,value:s,writer:e.binding.writer(i)}),u=r.optional.boolean(t.params.disabled).value,c=r.optional.boolean(t.params.hidden).value,p=e.controller({constraint:a,document:t.document,initialValue:n.initialValue,params:n.params,value:l.value,viewProps:ut.create({disabled:u,hidden:c})}),d=r.optional.string(t.params.label).value;return new Re(t.document,{binding:l,blade:xe(),props:K.fromObject({label:d||t.target.key}),valueController:p})}var $o=function(){function e(t){h(this,e),this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new E,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}return v(e,[{key:"dispose",value:function(){this.ticker.dispose()}},{key:"read",value:function(){var e=this.target.read();if(void 0!==e){var t=this.value.rawValue,n=this.reader_(e);this.value.rawValue=Ln(t,n),this.emitter.emit("update",{rawValue:n,sender:this})}}},{key:"onTick_",value:function(e){this.read()}}]),e}();function Qo(e,t){return 0===t?new yt:new xt(e,null!==t&&void 0!==t?t:Lo.monitor.defaultInterval)}function Jo(e,t){var n,r,i,o=W,a=e.accept(t.target.read(),t.params);if(w(a))return null;var s={target:t.target,initialValue:a.initialValue,params:a.params},l=e.binding.reader(s),u=null!==(r=null!==(n=o.optional.number(t.params.bufferSize).value)&&void 0!==n?n:e.binding.defaultBufferSize&&e.binding.defaultBufferSize(a.params))&&void 0!==r?r:1,c=o.optional.number(t.params.interval).value,p=new $o({reader:l,target:t.target,ticker:Qo(t.document,c),value:An(u)}),d=o.optional.boolean(t.params.disabled).value,h=o.optional.boolean(t.params.hidden).value,v=e.controller({document:t.document,params:a.params,value:p.value,viewProps:ut.create({disabled:d,hidden:h})}),f=null!==(i=o.optional.string(t.params.label).value)&&void 0!==i?i:t.target.key;return new Ue(t.document,{binding:p,blade:xe(),props:K.fromObject({label:f}),valueController:v})}var ea=function(){function e(){h(this,e),this.pluginsMap_={blades:[],inputs:[],monitors:[]}}return v(e,[{key:"getAll",value:function(){return[].concat(l(this.pluginsMap_.blades),l(this.pluginsMap_.inputs),l(this.pluginsMap_.monitors))}},{key:"register",value:function(e){"blade"===e.type?this.pluginsMap_.blades.unshift(e):"input"===e.type?this.pluginsMap_.inputs.unshift(e):"monitor"===e.type&&this.pluginsMap_.monitors.unshift(e)}},{key:"createInput",value:function(e,t,n){if(w(t.read()))throw new k({context:{key:t.key},type:"nomatchingcontroller"});var r=this.pluginsMap_.inputs.reduce((function(r,i){return r||Xo(i,{document:e,target:t,params:n})}),null);if(r)return r;throw new k({context:{key:t.key},type:"nomatchingcontroller"})}},{key:"createMonitor",value:function(e,t,n){var r=this.pluginsMap_.monitors.reduce((function(r,i){return r||Jo(i,{document:e,params:n,target:t})}),null);if(r)return r;throw new k({context:{key:t.key},type:"nomatchingcontroller"})}},{key:"createBlade",value:function(e,t){var n=this.pluginsMap_.blades.reduce((function(n,r){return n||wt(r,{document:e,params:t})}),null);if(!n)throw new k({type:"nomatchingview",context:{params:t}});return n}},{key:"createBladeApi",value:function(e){var t=this;if(e instanceof Re)return new De(e);if(e instanceof Ue)return new Be(e);if(e instanceof Xe)return new je(e,this);var n=this.pluginsMap_.blades.reduce((function(n,r){return n||r.api({controller:e,pool:t})}),null);if(!n)throw k.shouldNeverHappen();return n}}]),e}();function ta(){var e=new ea;return[po,wo,Vo,To,Zi,Ui,Bi,Di,vr,Fo,Wo,Zo,we,et,at,gt].forEach((function(t){e.register(t)})),e}var na=function(e){c(n,e);var t=p(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).emitter_=new E,r.controller_.valueController.value.emitter.on("change",(function(e){r.emitter_.emit("change",{event:new m(a(r),e.rawValue)})})),r}return v(n,[{key:"label",get:function(){return this.controller_.props.get("label")},set:function(e){this.controller_.props.set("label",e)}},{key:"options",get:function(){return this.controller_.valueController.props.get("options")},set:function(e){this.controller_.valueController.props.set("options",e)}},{key:"value",get:function(){return this.controller_.valueController.value.rawValue},set:function(e){this.controller_.valueController.value.rawValue=e}},{key:"on",value:function(e,t){var n=t.bind(this);return this.emitter_.on(e,(function(e){n(e.event)})),this}}]),n}(n),ra=function(e){c(n,e);var t=p(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).emitter_=new E,r.controller_.valueController.value.emitter.on("change",(function(e){r.emitter_.emit("change",{event:new m(a(r),e.rawValue)})})),r}return v(n,[{key:"label",get:function(){return this.controller_.props.get("label")},set:function(e){this.controller_.props.set("label",e)}},{key:"maxValue",get:function(){return this.controller_.valueController.sliderController.props.get("maxValue")},set:function(e){this.controller_.valueController.sliderController.props.set("maxValue",e)}},{key:"minValue",get:function(){return this.controller_.valueController.sliderController.props.get("minValue")},set:function(e){this.controller_.valueController.sliderController.props.set("minValue",e)}},{key:"value",get:function(){return this.controller_.valueController.value.rawValue},set:function(e){this.controller_.valueController.value.rawValue=e}},{key:"on",value:function(e,t){var n=t.bind(this);return this.emitter_.on(e,(function(e){n(e.event)})),this}}]),n}(n),ia=function(e){c(n,e);var t=p(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).emitter_=new E,r.controller_.valueController.value.emitter.on("change",(function(e){r.emitter_.emit("change",{event:new m(a(r),e.rawValue)})})),r}return v(n,[{key:"label",get:function(){return this.controller_.props.get("label")},set:function(e){this.controller_.props.set("label",e)}},{key:"formatter",get:function(){return this.controller_.valueController.props.get("formatter")},set:function(e){this.controller_.valueController.props.set("formatter",e)}},{key:"value",get:function(){return this.controller_.valueController.value.rawValue},set:function(e){this.controller_.valueController.value.rawValue=e}},{key:"on",value:function(e,t){var n=t.bind(this);return this.emitter_.on(e,(function(e){n(e.event)})),this}}]),n}(n),oa={id:"list",type:"blade",accept:function(e){var t=W,n=Y(e,{options:t.required.custom(er),value:t.required.raw,view:t.required.constant("list"),label:t.optional.string});return n?{params:n}:null},controller:function(e){var t=new Tt(e.document,{props:K.fromObject({options:rr(e.params.options)}),value:N(e.params.value),viewProps:e.viewProps});return new tt(e.document,{blade:e.blade,props:K.fromObject({label:e.params.label}),valueController:t})},api:function(e){return e.controller instanceof tt&&e.controller.valueController instanceof Tt?new na(e.controller):null}};function aa(e){return e.reduce((function(e,t){return Object.assign(e,u({},t.presetKey,t.read()))}),{})}function sa(e,t){e.forEach((function(e){var n=t[e.presetKey];void 0!==n&&e.write(n)}))}var la=function(e){c(n,e);var t=p(n);function n(e,r){return h(this,n),t.call(this,e,r)}return v(n,[{key:"element",get:function(){return this.controller_.view.element}},{key:"importPreset",value:function(e){sa(this.controller_.rackController.rack.find(Re).map((function(e){return e.binding.target})),e),this.refresh()}},{key:"exportPreset",value:function(){return aa(this.controller_.rackController.rack.find(Re).map((function(e){return e.binding.target})))}},{key:"refresh",value:function(){this.controller_.rackController.rack.find(Re).forEach((function(e){e.binding.read()})),this.controller_.rackController.rack.find(Ue).forEach((function(e){e.binding.read()}))}}]),n}(Ne),ua=function(e){c(n,e);var t=p(n);function n(e,r){return h(this,n),t.call(this,e,{expanded:r.expanded,blade:r.blade,props:r.props,root:!0,viewProps:r.viewProps})}return v(n)}(Je),ca={id:"slider",type:"blade",accept:function(e){var t=W,n=Y(e,{max:t.required.number,min:t.required.number,view:t.required.constant("slider"),format:t.optional.function,label:t.optional.string,value:t.optional.number});return n?{params:n}:null},controller:function(e){var t,n,r=null!==(t=e.params.value)&&void 0!==t?t:0,i=new Qn(e.document,{baseStep:1,parser:wn,sliderProps:K.fromObject({maxValue:e.params.max,minValue:e.params.min}),textProps:K.fromObject({draggingScale:ur(void 0,r),formatter:null!==(n=e.params.format)&&void 0!==n?n:xn}),value:N(r),viewProps:e.viewProps});return new tt(e.document,{blade:e.blade,props:K.fromObject({label:e.params.label}),valueController:i})},api:function(e){return e.controller instanceof tt&&e.controller.valueController instanceof Qn?new ra(e.controller):null}},pa={id:"text",type:"blade",accept:function(e){var t=W,n=Y(e,{parse:t.required.function,value:t.required.raw,view:t.required.constant("text"),format:t.optional.function,label:t.optional.string});return n?{params:n}:null},controller:function(e){var t,n=new Ut(e.document,{parser:e.params.parse,props:K.fromObject({formatter:null!==(t=e.params.format)&&void 0!==t?t:function(e){return String(e)}}),value:N(e.params.value),viewProps:e.viewProps});return new tt(e.document,{blade:e.blade,props:K.fromObject({label:e.params.label}),valueController:n})},api:function(e){return e.controller instanceof tt&&e.controller.valueController instanceof Ut?new ia(e.controller):null}};function da(e){var t=e.createElement("div");return t.classList.add(V("dfw")()),e.body&&e.body.appendChild(t),t}function ha(e,t,n){if(!e.querySelector("style[data-tp-style=".concat(t,"]"))){var r=e.createElement("style");r.dataset.tpStyle=t,r.textContent=n,e.head.appendChild(r)}}var va=function(e){c(n,e);var t=p(n);function n(e){var r,i;h(this,n);var o=e||{},a=null!==(i=o.document)&&void 0!==i?i:ae(),s=ta(),l=new ua(a,{expanded:o.expanded,blade:xe(),props:K.fromObject({title:o.title}),viewProps:ut.create()});return(r=t.call(this,l,s)).pool_=s,r.containerElem_=o.container||da(a),r.containerElem_.appendChild(r.element),r.doc_=a,r.usesDefaultWrapper_=!o.container,r.setUpDefaultPlugins_(),r}return v(n,[{key:"document",get:function(){if(!this.doc_)throw k.alreadyDisposed();return this.doc_}},{key:"dispose",value:function(){var e=this.containerElem_;if(!e)throw k.alreadyDisposed();if(this.usesDefaultWrapper_){var t=e.parentElement;t&&t.removeChild(e)}this.containerElem_=null,this.doc_=null,r(i(n.prototype),"dispose",this).call(this)}},{key:"registerPlugin",value:function(e){var t=this;("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach((function(e){t.pool_.register(e),t.embedPluginStyle_(e)}))}},{key:"embedPluginStyle_",value:function(e){e.css&&ha(this.document,"plugin-".concat(e.id),e.css)}},{key:"setUpDefaultPlugins_",value:function(){var e=this;ha(this.document,"default",".tp-lstv_s,.tp-btnv_b,.tp-p2dv_b,.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i,.tp-grlv_g,.tp-sglv_i,.tp-mllv_i,.tp-fldv_b,.tp-rotv_b,.tp-ckbv_i,.tp-coltxtv_ms,.tp-tbiv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-lstv_s:hover,.tp-btnv_b:hover,.tp-p2dv_b:hover{background-color:var(--btn-bg-h)}.tp-lstv_s:focus,.tp-btnv_b:focus,.tp-p2dv_b:focus{background-color:var(--btn-bg-f)}.tp-lstv_s:active,.tp-btnv_b:active,.tp-p2dv_b:active{background-color:var(--btn-bg-a)}.tp-lstv_s:disabled,.tp-btnv_b:disabled,.tp-p2dv_b:disabled{opacity:0.5}.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-colswv_sw:hover,.tp-p2dpv_p:hover,.tp-txtv_i:hover{background-color:var(--in-bg-h)}.tp-colswv_sw:focus,.tp-p2dpv_p:focus,.tp-txtv_i:focus{background-color:var(--in-bg-f)}.tp-colswv_sw:active,.tp-p2dpv_p:active,.tp-txtv_i:active{background-color:var(--in-bg-a)}.tp-colswv_sw:disabled,.tp-p2dpv_p:disabled,.tp-txtv_i:disabled{opacity:0.5}.tp-grlv_g,.tp-sglv_i,.tp-mllv_i{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);width:100%}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #2f3137);--bs-sh: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #2f3137);--cnt-bg: var(--tp-container-background-color, rgba(187,188,196,0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187,188,196,0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187,188,196,0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187,188,196,0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(0,0,0,0.2));--in-bg-a: var(--tp-input-background-color-active, rgba(0,0,0,0.35));--in-bg-f: var(--tp-input-background-color-focus, rgba(0,0,0,0.3));--in-bg-h: var(--tp-input-background-color-hover, rgba(0,0,0,0.25));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187,188,196,0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0,0,0,0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187,188,196,0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(0,0,0,0.2))}.tp-fldv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-rotv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-v-p))}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-rotv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-fldv_c>.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c,.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-tabv>.tp-tabv_i,.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-fldv_c .tp-tabv>.tp-tabv_c,.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_b,.tp-rotv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:calc(var(--cnt-h-p) + 8px);padding-right:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_b:hover,.tp-rotv_b:hover{background-color:var(--cnt-bg-h)}.tp-fldv_b:focus,.tp-rotv_b:focus{background-color:var(--cnt-bg-f)}.tp-fldv_b:active,.tp-rotv_b:active{background-color:var(--cnt-bg-a)}.tp-fldv_b:disabled,.tp-rotv_b:disabled{opacity:0.5}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:'';display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px) / 2 - 2px);margin:auto;opacity:0.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c,.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c{display:none}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-coltxtv_m,.tp-lstv{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-coltxtv_mm,.tp-lstv_m{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-coltxtv_mm svg,.tp-lstv_m svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-coltxtv_mm svg path,.tp-lstv_m svg path{fill:currentColor}.tp-coltxtv_w,.tp-pndtxtv{display:flex}.tp-coltxtv_c,.tp-pndtxtv_a{width:100%}.tp-coltxtv_c+.tp-coltxtv_c,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-pndtxtv_a{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:0.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:'';height:2px;left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us) * 4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br)}.tp-colswv.tp-v-disabled{opacity:0.5}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:'';display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left 0.05s, top 0.05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:0.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:0.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:0.5}.tp-mllv_i{display:block;height:calc(var(--bld-us) * 3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:0.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:0.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:'';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:'';display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:'';display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:0.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:'';height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:'';height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:0.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:0.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:0.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:'';height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:0.1;position:absolute;top:0;transition:border-radius 0.1s, height 0.1s, transform 0.1s, width 0.1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:'';font-size:0.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}"),this.pool_.getAll().forEach((function(t){e.embedPluginStyle_(t)})),this.registerPlugin({plugins:[ca,oa,gt,pa]})}}]),n}(la),fa=new t("3.0.5");e.BladeApi=n,e.ButtonApi=P,e.FolderApi=Ne,e.InputBindingApi=De,e.ListApi=na,e.MonitorBindingApi=Be,e.Pane=va,e.SeparatorApi=nt,e.SliderApi=ra,e.TabApi=ft,e.TabPageApi=vt,e.TextApi=ia,e.TpChangeEvent=m,e.VERSION=fa,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2982:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var i=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},6900:function(e,t,n){"use strict";n.d(t,{g:function(){return p}});var r=n(885),i=n(1413),o=n(5671),a=n(3144),s=n(136),l=n(4062),u=n(3562),c=new WeakMap,p=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).transcoderPath="",r.transcoderBinary=null,r.transcoderPending=null,r.workerLimit=4,r.workerPool=[],r.workerNextTaskID=1,r.workerSourceURL="",r.workerConfig=null,r}return(0,a.Z)(n,[{key:"setTranscoderPath",value:function(e){return this.transcoderPath=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"detectSupport",value:function(e){return this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}},{key:"load",value:function(e,t,n,r){var i=this,o=new u.hH6(this.manager);o.setResponseType("arraybuffer"),o.setWithCredentials(this.withCredentials);var a=new u.EB7;return o.load(e,(function(e){if(c.has(e))return c.get(e).promise.then(t).catch(r);i._createTexture([e]).then((function(e){a.copy(e),a.needsUpdate=!0,t&&t(a)})).catch(r)}),n,r),a}},{key:"parseInternalAsync",value:function(e){for(var t=e.levels,n=new Set,r=0;r<t.length;r++)n.add(t[r].data.buffer);return this._createTexture(Array.from(n),(0,i.Z)((0,i.Z)({},e),{},{lowLevel:!0}))}},{key:"_createTexture",value:function(e){for(var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i,a=0,s=0;s<e.length;s++)a+=e[s].byteLength;var l=this._allocateWorker(a).then((function(i){return t=i,n=r.workerNextTaskID++,new Promise((function(r,i){t._callbacks[n]={resolve:r,reject:i},t.postMessage({type:"transcode",id:n,buffers:e,taskConfig:o},e)}))})).then((function(e){var t=e.mipmaps,n=e.width,r=e.height,i=e.format,o=new u.EB7(t,n,r,i,u.ywz);return o.minFilter=1===t.length?u.wem:u.D1R,o.magFilter=u.wem,o.generateMipmaps=!1,o.needsUpdate=!0,o}));return l.catch((function(){return!0})).then((function(){t&&n&&(t._taskLoad-=a,delete t._callbacks[n])})),c.set(e[0],{promise:l}),l}},{key:"_initTranscoder",value:function(){var e=this;if(!this.transcoderPending){var t=new u.hH6(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);var i=new Promise((function(e,n){t.load("basis_transcoder.js",e,void 0,n)})),o=new u.hH6(this.manager);o.setPath(this.transcoderPath),o.setResponseType("arraybuffer"),o.setWithCredentials(this.withCredentials);var a=new Promise((function(e,t){o.load("basis_transcoder.wasm",e,void 0,t)}));this.transcoderPending=Promise.all([i,a]).then((function(t){var i=(0,r.Z)(t,2),o=i[0],a=i[1],s=n.BasisWorker.toString(),l=["/* constants */","let _EngineFormat = "+JSON.stringify(n.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(n.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(n.BasisFormat),"/* basis_transcoder.js */",o,"/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([l])),e.transcoderBinary=a}))}return this.transcoderPending}},{key:"_allocateWorker",value:function(e){var t=this;return this._initTranscoder().then((function(){if(t.workerPool.length<t.workerLimit){var n=new Worker(t.workerSourceURL);n._callbacks={},n._taskLoad=0,n.postMessage({type:"init",config:t.workerConfig,transcoderBinary:t.transcoderBinary}),n.onmessage=function(e){var t=e.data;switch(t.type){case"transcode":n._callbacks[t.id].resolve(t);break;case"error":n._callbacks[t.id].reject(t);break;default:console.error('THREE.BasisTextureLoader: Unexpected message, "'+t.type+'"')}},t.workerPool.push(n)}else t.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var r=t.workerPool[t.workerPool.length-1];return r._taskLoad+=e,r}))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;e++)this.workerPool[e].terminate();return this.workerPool.length=0,this}}]),n}(u.aNw);p.BasisFormat={ETC1S:0,UASTC_4x4:1},p.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},p.EngineFormat={RGBAFormat:u.wk1,RGBA_ASTC_4x4_Format:u.ptH,RGBA_BPTC_Format:u.bsb,RGBA_ETC2_EAC_Format:u.ekQ,RGBA_PVRTC_4BPPV1_Format:u.eaV,RGBA_S3TC_DXT5_Format:u.ILR,RGB_ETC1_Format:u.fto,RGB_ETC2_Format:u.l0P,RGB_PVRTC_4BPPV1_Format:u._AM,RGB_S3TC_DXT1_Format:u.wuA},p.BasisWorker=function(){var e,t,n,r=_EngineFormat,i=_TranscoderFormat,o=_BasisFormat;onmessage=function(r){var i,a=r.data;switch(a.type){case"init":e=a.config,i=a.transcoderBinary,t=new Promise((function(e){n={wasmBinary:i,onRuntimeInitialized:e},BASIS(n)})).then((function(){n.initializeBasis()}));break;case"transcode":t.then((function(){try{for(var e=a.taskConfig.lowLevel?function(e){var t=e.basisFormat,r=e.width,i=e.height,a=e.hasAlpha,s=u(t,r,i,a),l=s.transcoderFormat,v=s.engineFormat,f=n.getBytesPerBlockOrPixel(l);c(n.isFormatSupported(l),"THREE.BasisTextureLoader: Unsupported format.");var m=[];if(t===o.ETC1S){var b=new n.LowLevelETC1SImageTranscoder,_=e.globalData,g=_.endpointCount,w=_.endpointsData,y=_.selectorCount,x=_.selectorsData,k=_.tablesData;try{c(b.decodePalettes(g,w,y,x),"THREE.BasisTextureLoader: decodePalettes() failed."),c(b.decodeTables(k),"THREE.BasisTextureLoader: decodeTables() failed.");for(var C=0;C<e.levels.length;C++){var P=e.levels[C],E=e.globalData.imageDescs[C],S=h(l,P.width,P.height),V=new Uint8Array(S);c(b.transcodeImage(l,V,S/f,P.data,p(l,P.width),d(l,P.height),P.width,P.height,P.index,E.rgbSliceByteOffset,E.rgbSliceByteLength,E.alphaSliceByteOffset,E.alphaSliceByteLength,E.imageFlags,a,!1,0,0),"THREE.BasisTextureLoader: transcodeImage() failed for level "+P.index+"."),m.push({data:V,width:P.width,height:P.height})}}finally{b.delete()}}else for(var A=0;A<e.levels.length;A++){var T=e.levels[A],L=h(l,T.width,T.height),M=new Uint8Array(L);c(n.transcodeUASTCImage(l,M,L/f,T.data,p(l,T.width),d(l,T.height),T.width,T.height,T.index,0,T.data.byteLength,0,a,!1,0,0,-1,-1),"THREE.BasisTextureLoader: transcodeUASTCImage() failed for level "+T.index+"."),m.push({data:M,width:T.width,height:T.height})}return{width:r,height:i,hasAlpha:a,mipmaps:m,format:v}}(a.taskConfig):function(e){var t=new n.BasisFile(new Uint8Array(e)),r=t.isUASTC()?o.UASTC_4x4:o.ETC1S,i=t.getImageWidth(0,0),a=t.getImageHeight(0,0),s=t.getNumLevels(0),l=t.getHasAlpha();function c(){t.close(),t.delete()}var p=u(r,i,a,l),d=p.transcoderFormat,h=p.engineFormat;if(!i||!a||!s)throw c(),new Error("THREE.BasisTextureLoader:\tInvalid texture");if(!t.startTranscoding())throw c(),new Error("THREE.BasisTextureLoader: .startTranscoding failed");for(var v=[],f=0;f<s;f++){var m=t.getImageWidth(0,f),b=t.getImageHeight(0,f),_=new Uint8Array(t.getImageTranscodedSizeInBytes(0,f,d));if(!t.transcodeImage(_,0,f,d,0,l))throw c(),new Error("THREE.BasisTextureLoader: .transcodeImage failed.");v.push({data:_,width:m,height:b})}return c(),{width:i,height:a,hasAlpha:l,mipmaps:v,format:h}}(a.buffers[0]),t=e.width,r=e.height,i=e.hasAlpha,s=e.mipmaps,l=e.format,v=[],f=0;f<s.length;++f)v.push(s[f].data.buffer);self.postMessage({type:"transcode",id:a.id,width:t,height:r,hasAlpha:i,mipmaps:s,format:l},v)}catch(m){console.error(m),self.postMessage({type:"error",id:a.id,error:m.message})}}))}};var a=[{if:"astcSupported",basisFormat:[o.UASTC_4x4],transcoderFormat:[i.ASTC_4x4,i.ASTC_4x4],engineFormat:[r.RGBA_ASTC_4x4_Format,r.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.BC7_M5,i.BC7_M5],engineFormat:[r.RGBA_BPTC_Format,r.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.BC1,i.BC3],engineFormat:[r.RGB_S3TC_DXT1_Format,r.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.ETC1,i.ETC2],engineFormat:[r.RGB_ETC2_Format,r.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.ETC1,i.ETC1],engineFormat:[r.RGB_ETC1_Format,r.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.PVRTC1_4_RGB,i.PVRTC1_4_RGBA],engineFormat:[r.RGB_PVRTC_4BPPV1_Format,r.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],s=a.sort((function(e,t){return e.priorityETC1S-t.priorityETC1S})),l=a.sort((function(e,t){return e.priorityUASTC-t.priorityUASTC}));function u(t,n,a,u){for(var c=t===o.ETC1S?s:l,p=0;p<c.length;p++){var d=c[p];if(e[d.if]&&(d.basisFormat.includes(t)&&(!d.needsPowerOfTwo||v(n)&&v(a))))return{transcoderFormat:d.transcoderFormat[u?1:0],engineFormat:d.engineFormat[u?1:0]}}return console.warn("THREE.BasisTextureLoader: No suitable compressed texture format found. Decoding to RGBA32."),{transcoderFormat:i.RGBA32,engineFormat:r.RGBAFormat}}function c(e,t){if(!e)throw new Error(t)}function p(e,t){return Math.ceil(t/n.getFormatBlockWidth(e))}function d(e,t){return Math.ceil(t/n.getFormatBlockHeight(e))}function h(e,t,r){var o=n.getBytesPerBlockOrPixel(e);if(n.formatIsUncompressed(e))return t*r*o;if(e===i.PVRTC1_4_RGB||e===i.PVRTC1_4_RGBA){var a=t+3&-4,s=r+3&-4;return(Math.max(8,a)*Math.max(8,s)*4+7)/8}return p(e,t)*d(e,r)*o}function v(e){return e<=2||0===(e&e-1)&&0!==e}}},4849:function(e,t,n){"use strict";n.d(t,{_:function(){return u}});var r=n(5671),i=n(3144),o=n(136),a=n(4062),s=n(3562),l=new WeakMap,u=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).decoderPath="",i.decoderConfig={},i.decoderBinary=null,i.decoderPending=null,i.workerLimit=4,i.workerPool=[],i.workerNextTaskID=1,i.workerSourceURL="",i.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},i.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},i}return(0,i.Z)(n,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,t,n,r){var i=this,o=new s.hH6(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(e){var n={attributeIDs:i.defaultAttributeIDs,attributeTypes:i.defaultAttributeTypes,useUniqueIDs:!1};i.decodeGeometry(e,n).then(t).catch(r)}),n,r)}},{key:"decodeDracoFile",value:function(e,t,n,r){var i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}},{key:"decodeGeometry",value:function(e,t){var n=this;for(var r in t.attributeTypes){var i=t.attributeTypes[r];void 0!==i.BYTES_PER_ELEMENT&&(t.attributeTypes[r]=i.name)}var o,a=JSON.stringify(t);if(l.has(e)){var s=l.get(e);if(s.key===a)return s.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var u=this.workerNextTaskID++,c=e.byteLength,p=this._getWorker(u,c).then((function(n){return o=n,new Promise((function(n,r){o._callbacks[u]={resolve:n,reject:r},o.postMessage({type:"decode",id:u,taskConfig:t,buffer:e},[e])}))})).then((function(e){return n._createGeometry(e.geometry)}));return p.catch((function(){return!0})).then((function(){o&&u&&n._releaseTask(o,u)})),l.set(e,{key:a,promise:p}),p}},{key:"_createGeometry",value:function(e){var t=new s.u9r;e.index&&t.setIndex(new s.TlE(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n],i=r.name,o=r.array,a=r.itemSize;t.setAttribute(i,new s.TlE(o,a))}return t}},{key:"_loadLibrary",value:function(e,t){var n=new s.hH6(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((function(t,r){n.load(e,t,void 0,r)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var r=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var i=c.toString(),o=["/* draco decoder */",r,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([o]))})),this.decoderPending}},{key:"_getWorker",value:function(e,t){var n=this;return this._initDecoder().then((function(){if(n.workerPool.length<n.workerLimit){var r=new Worker(n.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:n.decoderConfig}),r.onmessage=function(e){var t=e.data;switch(t.type){case"decode":r._callbacks[t.id].resolve(t);break;case"error":r._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(r)}else n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var i=n.workerPool[n.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i}))}},{key:"_releaseTask",value:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}]),n}(s.aNw);function c(){var e,t;function n(e,t,n,r,i,o){var a=o.num_components(),s=n.num_points()*a,l=s*i.BYTES_PER_ELEMENT,u=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),c=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,o,u,l,c);var p=new i(e.HEAPF32.buffer,c,s).slice();return e._free(c),{name:r,array:p,itemSize:a}}onmessage=function(r){var i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var o=i.buffer,a=i.taskConfig;t.then((function(e){var t=e.draco,r=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(o),o.byteLength);try{var l=function(e,t,r,i){var o,a,s=i.attributeIDs,l=i.attributeTypes,u=t.GetEncodedGeometryType(r);if(u===e.TRIANGULAR_MESH)o=new e.Mesh,a=t.DecodeBufferToMesh(r,o);else{if(u!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,a=t.DecodeBufferToPointCloud(r,o)}if(!a.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());var c={index:null,attributes:[]};for(var p in s){var d=self[l[p]],h=void 0,v=void 0;if(i.useUniqueIDs)v=s[p],h=t.GetAttributeByUniqueId(o,v);else{if(-1===(v=t.GetAttributeId(o,e[s[p]])))continue;h=t.GetAttribute(o,v)}c.attributes.push(n(e,t,o,p,d,h))}u===e.TRIANGULAR_MESH&&(c.index=function(e,t,n){var r=3*n.num_faces(),i=4*r,o=e._malloc(i);t.GetTrianglesUInt32Array(n,i,o);var a=new Uint32Array(e.HEAPF32.buffer,o,r).slice();return e._free(o),{array:a,itemSize:1}}(e,t,o));return e.destroy(o),c}(t,r,s,a),u=l.attributes.map((function(e){return e.array.buffer}));l.index&&u.push(l.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:l},u)}catch(c){console.error(c),self.postMessage({type:"error",id:i.id,error:c.message})}finally{t.destroy(s),t.destroy(r)}}))}}}},598:function(e,t,n){"use strict";n.d(t,{x:function(){return c}});var r=n(5671),i=n(3144),o=n(1752),a=n(1120),s=n(136),l=n(4062),u=n(3562),c=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).type=u.cLu,i}return(0,i.Z)(n,[{key:"parse",value:function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;for(var r=e.pos,i=-1,o=0,a="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));0>(i=s.indexOf("\n"))&&o<t&&r<e.byteLength;)a+=s,o+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<i&&(!1!==n&&(e.pos+=o+i+1),a+s.slice(0,i))},r=function(e,t,n,r){var i=e[t+3],o=Math.pow(2,i-128)/255;n[r+0]=e[t+0]*o,n[r+1]=e[t+1]*o,n[r+2]=e[t+2]*o},i=function(e,t,n,r){var i=e[t+3],o=Math.pow(2,i-128)/255;n[r+0]=u.A5E.toHalfFloat(Math.min(e[t+0]*o,65504)),n[r+1]=u.A5E.toHalfFloat(Math.min(e[t+1]*o,65504)),n[r+2]=u.A5E.toHalfFloat(Math.min(e[t+2]*o,65504))},o=new Uint8Array(e);o.pos=0;var a=function(e){var r,i,o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(r=n(e)))return t(1,"no header found");if(!(i=r.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(u.valid|=1,u.programtype=i[1],u.string+=r+"\n";!1!==(r=n(e));)if(u.string+=r+"\n","#"!==r.charAt(0)){if((i=r.match(o))&&(u.gamma=parseFloat(i[1],10)),(i=r.match(a))&&(u.exposure=parseFloat(i[1],10)),(i=r.match(s))&&(u.valid|=2,u.format=i[1]),(i=r.match(l))&&(u.valid|=4,u.height=parseInt(i[1],10),u.width=parseInt(i[2],10)),2&u.valid&&4&u.valid)break}else u.comments+=r+"\n";return 2&u.valid?4&u.valid?u:t(3,"missing image size specifier"):t(3,"missing format specifier")}(o);if(-1!==a){var s=a.width,l=a.height,c=function(e,n,r){var i=n;if(i<8||i>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(i!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");var o=new Uint8Array(4*n*r);if(!o.length)return t(4,"unable to allocate buffer space");for(var a=0,s=0,l=4*i,u=new Uint8Array(4),c=new Uint8Array(l),p=r;p>0&&s<e.byteLength;){if(s+4>e.byteLength)return t(1);if(u[0]=e[s++],u[1]=e[s++],u[2]=e[s++],u[3]=e[s++],2!=u[0]||2!=u[1]||(u[2]<<8|u[3])!=i)return t(3,"bad rgbe scanline format");for(var d=0,h=void 0;d<l&&s<e.byteLength;){var v=(h=e[s++])>128;if(v&&(h-=128),0===h||d+h>l)return t(3,"bad scanline data");if(v)for(var f=e[s++],m=0;m<h;m++)c[d++]=f;else c.set(e.subarray(s,s+h),d),d+=h,s+=h}for(var b=i,_=0;_<b;_++){var g=0;o[a]=c[_+g],g+=i,o[a+1]=c[_+g],g+=i,o[a+2]=c[_+g],g+=i,o[a+3]=c[_+g],a+=4}p--}return o}(o.subarray(o.pos),s,l);if(-1!==c){var p,d,h,v;switch(this.type){case u.VzW:v=c.length/4;for(var f=new Float32Array(3*v),m=0;m<v;m++)r(c,4*m,f,3*m);p=f,d=u.UCm,h=u.VzW;break;case u.cLu:v=c.length/4;for(var b=new Uint16Array(3*v),_=0;_<v;_++)i(c,4*_,b,3*_);p=b,d=u.UCm,h=u.cLu;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:s,height:l,data:p,header:a.string,gamma:a.gamma,exposure:a.exposure,format:d,type:h}}}return null}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,t,r,i){return(0,o.Z)((0,a.Z)(n.prototype),"load",this).call(this,e,(function(e,n){switch(e.type){case u.VzW:case u.cLu:e.encoding=u.rnI,e.minFilter=u.wem,e.magFilter=u.wem,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),r,i)}}]),n}(u.yxD)},5413:function(e,t,n){"use strict";n.d(t,{A:function(){return c}});var r=n(5671),i=n(3144),o=n(136),a=n(4062),s=n(3562),l=n(6531),u={defines:{DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tColor:{value:null},tDepth:{value:null},focus:{value:1},aspect:{value:1},aperture:{value:.025},maxblur:{value:.01},nearClip:{value:1},farClip:{value:1e3}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\tvarying vec2 vUv;\n\n\t\tuniform sampler2D tColor;\n\t\tuniform sampler2D tDepth;\n\n\t\tuniform float maxblur; // max blur amount\n\t\tuniform float aperture; // aperture - bigger values for shallower depth of field\n\n\t\tuniform float nearClip;\n\t\tuniform float farClip;\n\n\t\tuniform float focus;\n\t\tuniform float aspect;\n\n\t\t#include <packing>\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, nearClip, farClip );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, nearClip, farClip );\n\t\t\t#endif\n\t\t}\n\n\n\t\tvoid main() {\n\n\t\t\tvec2 aspectcorrect = vec2( 1.0, aspect );\n\n\t\t\tfloat viewZ = getViewZ( getDepth( vUv ) );\n\n\t\t\tfloat factor = ( focus + viewZ ); // viewZ is <= 0, so this is a difference equation\n\n\t\t\tvec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );\n\n\t\t\tvec2 dofblur9 = dofblur * 0.9;\n\t\t\tvec2 dofblur7 = dofblur * 0.7;\n\t\t\tvec2 dofblur4 = dofblur * 0.4;\n\n\t\t\tvec4 col = vec4( 0.0 );\n\n\t\t\tcol += texture2D( tColor, vUv.xy );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );\n\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );\n\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );\n\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );\n\n\t\t\tgl_FragColor = col / 41.0;\n\t\t\tgl_FragColor.a = 1.0;\n\n\t\t}"},c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,i,o){var a;(0,r.Z)(this,n),(a=t.call(this)).scene=e,a.camera=i;var c=void 0!==o.focus?o.focus:1,p=void 0!==o.aspect?o.aspect:i.aspect,d=void 0!==o.aperture?o.aperture:.025,h=void 0!==o.maxblur?o.maxblur:1,v=o.width||window.innerWidth||1,f=o.height||window.innerHeight||1;a.renderTargetDepth=new s.dd2(v,f,{minFilter:s.TyD,magFilter:s.TyD}),a.renderTargetDepth.texture.name="BokehPass.depth",a.materialDepth=new s.lRF,a.materialDepth.depthPacking=s.mSO,a.materialDepth.blending=s.jFi,void 0===u&&console.error("THREE.BokehPass relies on BokehShader");var m=u,b=s.rDY.clone(m.uniforms);return b.tDepth.value=a.renderTargetDepth.texture,b.focus.value=c,b.aspect.value=p,b.aperture.value=d,b.maxblur.value=h,b.nearClip.value=i.near,b.farClip.value=i.far,a.materialBokeh=new s.jyz({defines:Object.assign({},m.defines),uniforms:b,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader}),a.uniforms=b,a.needsSwap=!1,a.fsQuad=new l.T(a.materialBokeh),a._oldClearColor=new s.Ilk,a}return(0,i.Z)(n,[{key:"render",value:function(e,t,n){this.scene.overrideMaterial=this.materialDepth,e.getClearColor(this._oldClearColor);var r=e.getClearAlpha(),i=e.autoClear;e.autoClear=!1,e.setClearColor(16777215),e.setClearAlpha(1),e.setRenderTarget(this.renderTargetDepth),e.clear(),e.render(this.scene,this.camera),this.uniforms.tColor.value=n.texture,this.uniforms.nearClip.value=this.camera.near,this.uniforms.farClip.value=this.camera.far,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),e.clear(),this.fsQuad.render(e)),this.scene.overrideMaterial=null,e.setClearColor(this._oldClearColor),e.setClearAlpha(r),e.autoClear=i}}]),n}(l.w)},1935:function(e,t,n){"use strict";n.d(t,{xC:function(){return h}});var r=n(5671),i=n(3144),o=n(3562),a=n(3500),s=n(136),l=n(4062),u=n(6531),c=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e,i){var a;return(0,r.Z)(this,n),(a=t.call(this)).textureID=void 0!==i?i:"tDiffuse",e instanceof o.jyz?(a.uniforms=e.uniforms,a.material=e):e&&(a.uniforms=o.rDY.clone(e.uniforms),a.material=new o.jyz({defines:Object.assign({},e.defines),uniforms:a.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),a.fsQuad=new u.T(a.material),a}return(0,i.Z)(n,[{key:"render",value:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}]),n}(u.w),p=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this)).scene=e,o.camera=i,o.clear=!0,o.needsSwap=!1,o.inverse=!1,o}return(0,i.Z)(n,[{key:"render",value:function(e,t,n){var r,i,o=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(r=0,i=1):(r=1,i=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,r,4294967295),a.buffers.stencil.setClear(i),a.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}}]),n}(u.w),d=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.call(this)).needsSwap=!1,e}return(0,i.Z)(n,[{key:"render",value:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}]),n}(u.w),h=function(){function e(t,n){if((0,r.Z)(this,e),this.renderer=t,void 0===n){var i={minFilter:o.wem,magFilter:o.wem,format:o.wk1},s=t.getSize(new o.FM8);this._pixelRatio=t.getPixelRatio(),this._width=s.width,this._height=s.height,(n=new o.dd2(this._width*this._pixelRatio,this._height*this._pixelRatio,i)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===a.C&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===c&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new c(a.C),this.clock=new o.SUY}return(0,i.Z)(e,[{key:"swapBuffers",value:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}},{key:"addPass",value:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"insertPass",value:function(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"removePass",value:function(e){var t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}},{key:"isLastEnabledPass",value:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}},{key:"render",value:function(e){void 0===e&&(e=this.clock.getDelta());for(var t=this.renderer.getRenderTarget(),n=!1,r=0,i=this.passes.length;r<i;r++){var o=this.passes[r];if(!1!==o.enabled){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),o.needsSwap){if(n){var a=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),s.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==p&&(o instanceof p?n=!0:o instanceof d&&(n=!1))}}this.renderer.setRenderTarget(t)}},{key:"reset",value:function(e){if(void 0===e){var t=this.renderer.getSize(new o.FM8);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}},{key:"setSize",value:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}]),e}(),v=(new o.iKG(-1,1,1,-1,0,1),new o.u9r);v.setAttribute("position",new o.a$l([-1,3,0,-1,-1,0,3,-1,0],3)),v.setAttribute("uv",new o.a$l([0,2,0,0,2,0],2))},6531:function(e,t,n){"use strict";n.d(t,{T:function(){return u},w:function(){return a}});var r=n(5671),i=n(3144),o=n(3562),a=function(){function e(){(0,r.Z)(this,e),this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}return(0,i.Z)(e,[{key:"setSize",value:function(){}},{key:"render",value:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}]),e}(),s=new o.iKG(-1,1,1,-1,0,1),l=new o.u9r;l.setAttribute("position",new o.a$l([-1,3,0,-1,-1,0,3,-1,0],3)),l.setAttribute("uv",new o.a$l([0,2,0,0,2,0],2));var u=function(){function e(t){(0,r.Z)(this,e),this._mesh=new o.Kj0(l,t)}return(0,i.Z)(e,[{key:"dispose",value:function(){this._mesh.geometry.dispose()}},{key:"render",value:function(e){e.render(this._mesh,s)}},{key:"material",get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}]),e}()},6938:function(e,t,n){"use strict";n.d(t,{C:function(){return l}});var r=n(5671),i=n(3144),o=n(136),a=n(4062),s=n(3562),l=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,i,o,a,l){var u;return(0,r.Z)(this,n),(u=t.call(this)).scene=e,u.camera=i,u.overrideMaterial=o,u.clearColor=a,u.clearAlpha=void 0!==l?l:0,u.clear=!0,u.clearDepth=!1,u.needsSwap=!1,u._oldClearColor=new s.Ilk,u}return(0,i.Z)(n,[{key:"render",value:function(e,t,n){var r,i,o=e.autoClear;e.autoClear=!1,void 0!==this.overrideMaterial&&(i=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),r=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,r),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=i),e.autoClear=o}}]),n}(n(6531).w)},3500:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});var r={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"}}}]);